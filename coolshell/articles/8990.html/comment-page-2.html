<!DOCTYPE html>
<!--[if IE 8]>
<html id="ie8" dir="ltr" lang="zh-CN"
	prefix="og: https://ogp.me/ns#" >
<![endif]-->
<!--[if !(IE 8) ]><!-->
<html dir="ltr" lang="zh-CN" prefix="og: https://ogp.me/ns#">
<!--<![endif]-->
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width" />
<link rel="profile" href="https://gmpg.org/xfn/11" />
<link rel="pingback" href="https://coolshell.cn/xmlrpc.php" />
<link rel="shortcut icon" href="/coolshell/favicon.png">
<title>Linus：利用二级指针删除单向链表 | 酷 壳 - CoolShell</title>

<meta name="robots" content="noindex, nofollow, max-image-preview:large" />
<meta name="keywords" content="c++,coding,kernel,linus torvalds,linux,c/c++语言,unix/linux" />
<link rel="canonical" href="/coolshell/articles/8990.html/comment-page-2#comments" />
<meta name="generator" content="All in One SEO (AIOSEO) 4.3.6.1 " />
<meta property="og:locale" content="zh_CN" />
<meta property="og:site_name" content="酷 壳 - CoolShell" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Linus：利用二级指针删除单向链表 | 酷 壳 - CoolShell" />
<meta property="og:url" content="/coolshell/articles/8990.html/comment-page-2#comments" />
<meta property="og:image" content="/coolshell/wp-content/uploads/2013/02/linus_pointer_to_pointer.jpg" />
<meta property="og:image:secure_url" content="/coolshell/wp-content/uploads/2013/02/linus_pointer_to_pointer.jpg" />
<meta property="og:image:width" content="479" />
<meta property="og:image:height" content="470" />
<meta property="article:published_time" content="2013-02-04T00:33:20+00:00" />
<meta property="article:modified_time" content="2013-02-04T07:12:58+00:00" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="Linus：利用二级指针删除单向链表 | 酷 壳 - CoolShell" />
<meta name="twitter:image" content="/coolshell/wp-content/uploads/2013/02/linus_pointer_to_pointer.jpg" />
<script type="application/ld+json" class="aioseo-schema">
			{"@context":"https:\/\/schema.org","@graph":[{"@type":"Article","@id":"https:\/\/coolshell.cn\/articles\/8990.html#article","name":"Linus\uff1a\u5229\u7528\u4e8c\u7ea7\u6307\u9488\u5220\u9664\u5355\u5411\u94fe\u8868 | \u9177 \u58f3 - CoolShell","headline":"Linus\uff1a\u5229\u7528\u4e8c\u7ea7\u6307\u9488\u5220\u9664\u5355\u5411\u94fe\u8868","author":{"@id":"https:\/\/coolshell.cn\/articles\/author\/full_of_bull#author"},"publisher":{"@id":"https:\/\/coolshell.cn\/#organization"},"image":{"@type":"ImageObject","url":"https:\/\/coolshell.cn\/wp-content\/uploads\/2013\/02\/linus_pointer_to_pointer.jpg","@id":"https:\/\/coolshell.cn\/#articleImage","width":479,"height":470},"datePublished":"2013-02-04T00:33:20+08:00","dateModified":"2013-02-04T07:12:58+08:00","inLanguage":"zh-CN","commentCount":194,"mainEntityOfPage":{"@id":"https:\/\/coolshell.cn\/articles\/8990.html#webpage"},"isPartOf":{"@id":"https:\/\/coolshell.cn\/articles\/8990.html#webpage"},"articleSection":"C\/C++\u8bed\u8a00, Unix\/Linux, C++, Coding, Kernel, Linus Torvalds, Linux"},{"@type":"BreadcrumbList","@id":"https:\/\/coolshell.cn\/articles\/8990.html#breadcrumblist","itemListElement":[{"@type":"ListItem","@id":"https:\/\/coolshell.cn\/#listItem","position":1,"item":{"@type":"WebPage","@id":"https:\/\/coolshell.cn\/","name":"\u4e3b\u9801","description":"\u4eab\u53d7\u7f16\u7a0b\u548c\u6280\u672f\u6240\u5e26\u6765\u7684\u5feb\u4e50 \u2013 https:\/\/coolshell.cn","url":"https:\/\/coolshell.cn\/"}}]},{"@type":"Organization","@id":"https:\/\/coolshell.cn\/#organization","name":"\u9177\u58f3-CoolShell","url":"https:\/\/coolshell.cn\/","logo":{"@type":"ImageObject","url":"https:\/\/coolshell.cn\/wp-content\/uploads\/2020\/04\/mini.logo_.png","@id":"https:\/\/coolshell.cn\/#organizationLogo","width":306,"height":306},"image":{"@id":"https:\/\/coolshell.cn\/#organizationLogo"}},{"@type":"Person","@id":"https:\/\/coolshell.cn\/articles\/author\/full_of_bull#author","url":"https:\/\/coolshell.cn\/articles\/author\/full_of_bull","name":"Leo","image":{"@type":"ImageObject","@id":"https:\/\/coolshell.cn\/articles\/8990.html#authorImage","url":"https:\/\/secure.gravatar.com\/avatar\/a6e9e679d4d308a570b1e74705c026de?s=96&d=mm&r=g","width":96,"height":96,"caption":"Leo"}},{"@type":"WebPage","@id":"https:\/\/coolshell.cn\/articles\/8990.html#webpage","url":"https:\/\/coolshell.cn\/articles\/8990.html","name":"Linus\uff1a\u5229\u7528\u4e8c\u7ea7\u6307\u9488\u5220\u9664\u5355\u5411\u94fe\u8868 | \u9177 \u58f3 - CoolShell","inLanguage":"zh-CN","isPartOf":{"@id":"https:\/\/coolshell.cn\/#website"},"breadcrumb":{"@id":"https:\/\/coolshell.cn\/articles\/8990.html#breadcrumblist"},"author":{"@id":"https:\/\/coolshell.cn\/articles\/author\/full_of_bull#author"},"creator":{"@id":"https:\/\/coolshell.cn\/articles\/author\/full_of_bull#author"},"datePublished":"2013-02-04T00:33:20+08:00","dateModified":"2013-02-04T07:12:58+08:00"},{"@type":"WebSite","@id":"https:\/\/coolshell.cn\/#website","url":"https:\/\/coolshell.cn\/","name":"\u9177 \u58f3 - CoolShell","description":"\u4eab\u53d7\u7f16\u7a0b\u548c\u6280\u672f\u6240\u5e26\u6765\u7684\u5feb\u4e50 - Coding Your Ambition","inLanguage":"zh-CN","publisher":{"@id":"https:\/\/coolshell.cn\/#organization"}}]}
		</script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-X07ZBQJ84C"></script>

<link rel="dns-prefetch" href="//fonts.googleapis.com" />
<link rel="alternate" type="application/rss+xml" title="酷 壳 - CoolShell &raquo; Feed" href="https://coolshell.cn/feed" />
<link rel="alternate" type="application/rss+xml" title="酷 壳 - CoolShell &raquo; 评论Feed" href="https://coolshell.cn/comments/feed" />
<link rel="alternate" type="application/rss+xml" title="酷 壳 - CoolShell &raquo; Linus：利用二级指针删除单向链表评论Feed" href="/coolshell/articles/8990.html/feed" />
<script type="62a8d6b6eca02664e6366ca2-text/javascript">
window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/14.0.0\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/14.0.0\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/coolshell.cn\/wp-includes\/js\/wp-emoji-release.min.js?ver=6.2"}};
/*! This file is auto-generated */
!function(e,a,t){var n,r,o,i=a.createElement("canvas"),p=i.getContext&&i.getContext("2d");function s(e,t){p.clearRect(0,0,i.width,i.height),p.fillText(e,0,0);e=i.toDataURL();return p.clearRect(0,0,i.width,i.height),p.fillText(t,0,0),e===i.toDataURL()}function c(e){var t=a.createElement("script");t.src=e,t.defer=t.type="text/javascript",a.getElementsByTagName("head")[0].appendChild(t)}for(o=Array("flag","emoji"),t.supports={everything:!0,everythingExceptFlag:!0},r=0;r<o.length;r++)t.supports[o[r]]=function(e){if(p&&p.fillText)switch(p.textBaseline="top",p.font="600 32px Arial",e){case"flag":return s("\ud83c\udff3\ufe0f\u200d\u26a7\ufe0f","\ud83c\udff3\ufe0f\u200b\u26a7\ufe0f")?!1:!s("\ud83c\uddfa\ud83c\uddf3","\ud83c\uddfa\u200b\ud83c\uddf3")&&!s("\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f","\ud83c\udff4\u200b\udb40\udc67\u200b\udb40\udc62\u200b\udb40\udc65\u200b\udb40\udc6e\u200b\udb40\udc67\u200b\udb40\udc7f");case"emoji":return!s("\ud83e\udef1\ud83c\udffb\u200d\ud83e\udef2\ud83c\udfff","\ud83e\udef1\ud83c\udffb\u200b\ud83e\udef2\ud83c\udfff")}return!1}(o[r]),t.supports.everything=t.supports.everything&&t.supports[o[r]],"flag"!==o[r]&&(t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&t.supports[o[r]]);t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&!t.supports.flag,t.DOMReady=!1,t.readyCallback=function(){t.DOMReady=!0},t.supports.everything||(n=function(){t.readyCallback()},a.addEventListener?(a.addEventListener("DOMContentLoaded",n,!1),e.addEventListener("load",n,!1)):(e.attachEvent("onload",n),a.attachEvent("onreadystatechange",function(){"complete"===a.readyState&&t.readyCallback()})),(e=t.source||{}).concatemoji?c(e.concatemoji):e.wpemoji&&e.twemoji&&(c(e.twemoji),c(e.wpemoji)))}(window,document,window._wpemojiSettings);
</script>
<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 0.07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel="stylesheet" id="series_font-css" href="/coolshell/wp-content/plugins/simple-post-series/inc/icomoon/style.css?ver=2.4" type="text/css" media="all" />
<link rel="stylesheet" id="wp-block-library-css" href="/coolshell/wp-content/plugins/gutenberg/build/block-library/style.css?ver=15.7.0" type="text/css" media="all" />
<link rel="stylesheet" id="classic-theme-styles-css" href="/coolshell/wp-includes/css/classic-themes.min.css?ver=6.2" type="text/css" media="all" />
<style id="global-styles-inline-css" type="text/css">
body{--wp--preset--color--black: #000000;--wp--preset--color--cyan-bluish-gray: #abb8c3;--wp--preset--color--white: #ffffff;--wp--preset--color--pale-pink: #f78da7;--wp--preset--color--vivid-red: #cf2e2e;--wp--preset--color--luminous-vivid-orange: #ff6900;--wp--preset--color--luminous-vivid-amber: #fcb900;--wp--preset--color--light-green-cyan: #7bdcb5;--wp--preset--color--vivid-green-cyan: #00d084;--wp--preset--color--pale-cyan-blue: #8ed1fc;--wp--preset--color--vivid-cyan-blue: #0693e3;--wp--preset--color--vivid-purple: #9b51e0;--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple: linear-gradient(135deg,rgba(6,147,227,1) 0%,rgb(155,81,224) 100%);--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan: linear-gradient(135deg,rgb(122,220,180) 0%,rgb(0,208,130) 100%);--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange: linear-gradient(135deg,rgba(252,185,0,1) 0%,rgba(255,105,0,1) 100%);--wp--preset--gradient--luminous-vivid-orange-to-vivid-red: linear-gradient(135deg,rgba(255,105,0,1) 0%,rgb(207,46,46) 100%);--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray: linear-gradient(135deg,rgb(238,238,238) 0%,rgb(169,184,195) 100%);--wp--preset--gradient--cool-to-warm-spectrum: linear-gradient(135deg,rgb(74,234,220) 0%,rgb(151,120,209) 20%,rgb(207,42,186) 40%,rgb(238,44,130) 60%,rgb(251,105,98) 80%,rgb(254,248,76) 100%);--wp--preset--gradient--blush-light-purple: linear-gradient(135deg,rgb(255,206,236) 0%,rgb(152,150,240) 100%);--wp--preset--gradient--blush-bordeaux: linear-gradient(135deg,rgb(254,205,165) 0%,rgb(254,45,45) 50%,rgb(107,0,62) 100%);--wp--preset--gradient--luminous-dusk: linear-gradient(135deg,rgb(255,203,112) 0%,rgb(199,81,192) 50%,rgb(65,88,208) 100%);--wp--preset--gradient--pale-ocean: linear-gradient(135deg,rgb(255,245,203) 0%,rgb(182,227,212) 50%,rgb(51,167,181) 100%);--wp--preset--gradient--electric-grass: linear-gradient(135deg,rgb(202,248,128) 0%,rgb(113,206,126) 100%);--wp--preset--gradient--midnight: linear-gradient(135deg,rgb(2,3,129) 0%,rgb(40,116,252) 100%);--wp--preset--font-size--small: 13px;--wp--preset--font-size--medium: 20px;--wp--preset--font-size--large: 36px;--wp--preset--font-size--x-large: 42px;--wp--preset--spacing--20: 0.44rem;--wp--preset--spacing--30: 0.67rem;--wp--preset--spacing--40: 1rem;--wp--preset--spacing--50: 1.5rem;--wp--preset--spacing--60: 2.25rem;--wp--preset--spacing--70: 3.38rem;--wp--preset--spacing--80: 5.06rem;--wp--preset--shadow--natural: 6px 6px 9px rgba(0, 0, 0, 0.2);--wp--preset--shadow--deep: 12px 12px 50px rgba(0, 0, 0, 0.4);--wp--preset--shadow--sharp: 6px 6px 0px rgba(0, 0, 0, 0.2);--wp--preset--shadow--outlined: 6px 6px 0px -3px rgba(255, 255, 255, 1), 6px 6px rgba(0, 0, 0, 1);--wp--preset--shadow--crisp: 6px 6px 0px rgba(0, 0, 0, 1);}:where(.is-layout-flex){gap: 0.5em;}body .is-layout-flow > .alignleft{float: left;margin-inline-start: 0;margin-inline-end: 2em;}body .is-layout-flow > .alignright{float: right;margin-inline-start: 2em;margin-inline-end: 0;}body .is-layout-flow > .aligncenter{margin-left: auto !important;margin-right: auto !important;}body .is-layout-constrained > .alignleft{float: left;margin-inline-start: 0;margin-inline-end: 2em;}body .is-layout-constrained > .alignright{float: right;margin-inline-start: 2em;margin-inline-end: 0;}body .is-layout-constrained > .aligncenter{margin-left: auto !important;margin-right: auto !important;}body .is-layout-constrained > :where(:not(.alignleft):not(.alignright):not(.alignfull)){max-width: var(--wp--style--global--content-size);margin-left: auto !important;margin-right: auto !important;}body .is-layout-constrained > .alignwide{max-width: var(--wp--style--global--wide-size);}body .is-layout-flex{display: flex;}body .is-layout-flex{flex-wrap: wrap;align-items: center;}body .is-layout-flex > *{margin: 0;}body .is-layout-grid{display: grid;}body .is-layout-grid > *{margin: 0;}:where(.wp-block-columns.is-layout-flex){gap: 2em;}.has-black-color{color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-color{color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-color{color: var(--wp--preset--color--white) !important;}.has-pale-pink-color{color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-color{color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-color{color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-color{color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-color{color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-color{color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-color{color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-color{color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-color{color: var(--wp--preset--color--vivid-purple) !important;}.has-black-background-color{background-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-background-color{background-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-background-color{background-color: var(--wp--preset--color--white) !important;}.has-pale-pink-background-color{background-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-background-color{background-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-background-color{background-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-background-color{background-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-background-color{background-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-background-color{background-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-background-color{background-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-background-color{background-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-background-color{background-color: var(--wp--preset--color--vivid-purple) !important;}.has-black-border-color{border-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-border-color{border-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-border-color{border-color: var(--wp--preset--color--white) !important;}.has-pale-pink-border-color{border-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-border-color{border-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-border-color{border-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-border-color{border-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-border-color{border-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-border-color{border-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-border-color{border-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-border-color{border-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-border-color{border-color: var(--wp--preset--color--vivid-purple) !important;}.has-vivid-cyan-blue-to-vivid-purple-gradient-background{background: var(--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple) !important;}.has-light-green-cyan-to-vivid-green-cyan-gradient-background{background: var(--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan) !important;}.has-luminous-vivid-amber-to-luminous-vivid-orange-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange) !important;}.has-luminous-vivid-orange-to-vivid-red-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-orange-to-vivid-red) !important;}.has-very-light-gray-to-cyan-bluish-gray-gradient-background{background: var(--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray) !important;}.has-cool-to-warm-spectrum-gradient-background{background: var(--wp--preset--gradient--cool-to-warm-spectrum) !important;}.has-blush-light-purple-gradient-background{background: var(--wp--preset--gradient--blush-light-purple) !important;}.has-blush-bordeaux-gradient-background{background: var(--wp--preset--gradient--blush-bordeaux) !important;}.has-luminous-dusk-gradient-background{background: var(--wp--preset--gradient--luminous-dusk) !important;}.has-pale-ocean-gradient-background{background: var(--wp--preset--gradient--pale-ocean) !important;}.has-electric-grass-gradient-background{background: var(--wp--preset--gradient--electric-grass) !important;}.has-midnight-gradient-background{background: var(--wp--preset--gradient--midnight) !important;}.has-small-font-size{font-size: var(--wp--preset--font-size--small) !important;}.has-medium-font-size{font-size: var(--wp--preset--font-size--medium) !important;}.has-large-font-size{font-size: var(--wp--preset--font-size--large) !important;}.has-x-large-font-size{font-size: var(--wp--preset--font-size--x-large) !important;}
:where(.wp-block-columns.is-layout-flex){gap: 2em;}
.wp-block-pullquote{font-size: 1.5em;line-height: 1.6;}
.wp-block-navigation a:where(:not(.wp-element-button)){color: inherit;}
</style>
<link rel="stylesheet" id="wp-postratings-css" href="/coolshell/wp-content/plugins/wp-postratings/css/postratings-css.css?ver=1.90.1" type="text/css" media="all" />
<link rel="stylesheet" id="wp-pagenavi-css" href="/coolshell/wp-content/plugins/wp-pagenavi/pagenavi-css.css?ver=2.70" type="text/css" media="all" />
<link rel="stylesheet" id="ez-toc-css" href="/coolshell/wp-content/plugins/easy-table-of-contents/assets/css/screen.min.css?ver=2.0.48" type="text/css" media="all" />
<style id="ez-toc-inline-css" type="text/css">
div#ez-toc-container p.ez-toc-title {font-size: 120%;}div#ez-toc-container p.ez-toc-title {font-weight: 500;}div#ez-toc-container ul li {font-size: 95%;}div#ez-toc-container nav ul ul li ul li {font-size: %!important;}
.ez-toc-container-direction {direction: ltr;}.ez-toc-counter ul{counter-reset: item;}.ez-toc-counter nav ul li a::before {content: counters(item, ".", decimal) ". ";display: inline-block;counter-increment: item;flex-grow: 0;flex-shrink: 0;margin-right: .2em; float: left;}.ez-toc-widget-direction {direction: ltr;}.ez-toc-widget-container ul{counter-reset: item;}.ez-toc-widget-container nav ul li a::before {content: counters(item, ".", decimal) ". ";display: inline-block;counter-increment: item;flex-grow: 0;flex-shrink: 0;margin-right: .2em; float: left;}
</style>
<link rel="stylesheet" id="bootstrap-css" href="/coolshell/wp-content/themes/MyNisarg/css/bootstrap.css?ver=6.2" type="text/css" media="all" />
<link rel="stylesheet" id="nisarg-style-css" href="/coolshell/wp-content/themes/MyNisarg/style.css?ver=6.2" type="text/css" media="all" />
<style id="nisarg-style-inline-css" type="text/css">
	/* Color Scheme */

	/* Accent Color */

	a:active,
	a:hover,
	a:focus {
	    color: #009688;
	}

	.navbar-default .navbar-nav > li > a:hover, .navbar-default .navbar-nav > li > a:focus {
		color: #009688;
	}

	
	.navbar-default .navbar-nav > .active > a, .navbar-default .navbar-nav > .active > a:hover, .navbar-default .navbar-nav > .active > a:focus {
		color: #009688;			
	}

	@media (min-width: 768px){
		.navbar-default .navbar-nav > .active > a, .navbar-default .navbar-nav > .active > a:hover, .navbar-default .navbar-nav > .active > a:focus {
			border-top: 4px solid #009688;
		}		
	}

	.dropdown-menu > .active > a, .dropdown-menu > .active > a:hover, .dropdown-menu > .active > a:focus {	    
	    background-color: #009688;
	}


	.navbar-default .navbar-nav > .open > a, .navbar-default .navbar-nav > .open > a:hover, .navbar-default .navbar-nav > .open > a:focus {
		color: #009688;
	}

	.navbar-default .navbar-nav > li > .dropdown-menu > li > a:hover,
	.navbar-default .navbar-nav > li > .dropdown-menu > li > a:focus {
		color: #fff;
		background-color: #009688;
	}

	.navbar-default .navbar-nav .open .dropdown-menu > .active > a, .navbar-default .navbar-nav .open .dropdown-menu > .active > a:hover, .navbar-default .navbar-nav .open .dropdown-menu > .active > a:focus {
		background-color: #fff;
		color: #009688;
	}

	@media (max-width: 767px) {
		.navbar-default .navbar-nav .open .dropdown-menu > li > a:hover {
			background-color: #009688;
			color: #fff;
		}
	}

	.sticky-post{
	    background: #009688;
	    color:white;
	}
	
	.entry-title a:hover,
	.entry-title a:focus{
	    color: #009688;
	}

	.entry-header .entry-meta::after{
	    background: #009688;
	}

	.fa {
		color: #009688;
	}

	.btn-default{
		border-bottom: 1px solid #009688;
	}

	.btn-default:hover, .btn-default:focus{
	    border-bottom: 1px solid #009688;
	    background-color: #009688;
	}

	.nav-previous:hover, .nav-next:hover{
	    border: 1px solid #009688;
	    background-color: #009688;
	}

	.next-post a:hover,.prev-post a:hover{
	    color: #009688;
	}

	.posts-navigation .next-post a:hover .fa, .posts-navigation .prev-post a:hover .fa{
	    color: #009688;
	}


	#secondary .widget-title::after{
		background-color: #009688;
	    content: "";
	    position: absolute;
	    width: 75px;
	    display: block;
	    height: 4px;    
	    bottom: -15px;
	}

	#secondary .widget a:hover,
	#secondary .widget a:focus{
		color: #009688;
	}

	#secondary .widget_calendar tbody a {
	    background-color: #009688;
	    color: #fff;
	    padding: 0.2em;
	}

	#secondary .widget_calendar tbody a:hover{
	    background-color: #009688;
	    color: #fff;
	    padding: 0.2em;
	}	

</style>
<link rel="stylesheet" id="font-awesome-css" href="/coolshell/wp-content/themes/MyNisarg/font-awesome/css/font-awesome.min.css?ver=6.2" type="text/css" media="all" />
<link rel="stylesheet" id="nisarggooglefonts-css" href="//fonts.googleapis.com/css?family=Lato:400,300italic,700|Source+Sans+Pro:400,400italic" type="text/css" media="all" />
<link rel="stylesheet" id="enlighterjs-css" href="/coolshell/wp-content/plugins/enlighter/cache/enlighterjs.min.css?ver=0cuVQBPCj0viGB0" type="text/css" media="all" />
<script type="62a8d6b6eca02664e6366ca2-text/javascript" src="/coolshell/wp-includes/js/jquery/jquery.min.js?ver=3.6.3" id="jquery-core-js"></script>
<script type="62a8d6b6eca02664e6366ca2-text/javascript" src="/coolshell/wp-includes/js/jquery/jquery-migrate.min.js?ver=3.4.0" id="jquery-migrate-js"></script>
<script type="62a8d6b6eca02664e6366ca2-text/javascript" src="/coolshell/wp-content/plugins/simple-post-series/autohide.js?ver=2.4" id="series-js"></script>
<script type="62a8d6b6eca02664e6366ca2-text/javascript" id="ez-toc-scroll-scriptjs-js-after">
jQuery(document).ready(function(){document.querySelectorAll(".ez-toc-section").forEach(t=>{t.setAttribute("ez-toc-data-id","#"+decodeURI(t.getAttribute("id")))}),jQuery("a.ez-toc-link").click(function(){let t=jQuery(this).attr("href"),e=jQuery("#wpadminbar"),i=0;30>30&&(i=30),e.length&&(i+=e.height()),jQuery('[ez-toc-data-id="'+decodeURI(t)+'"]').length>0&&(i=jQuery('[ez-toc-data-id="'+decodeURI(t)+'"]').offset().top-i),jQuery("html, body").animate({scrollTop:i},500)})});
</script>
<!--[if lt IE 9]>
<script type='text/javascript' src='/coolshell/wp-content/themes/MyNisarg/js/html5shiv.js?ver=3.7.3' id='html5shiv-js'></script>
<![endif]-->
<link rel="https://api.w.org/" href="https://coolshell.cn/wp-json/" /><link rel="alternate" type="application/json" href="https://coolshell.cn/wp-json/wp/v2/posts/8990" /><link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://coolshell.cn/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="/coolshell/wp-includes/wlwmanifest.xml" />
<meta name="generator" content="WordPress 6.2" />
<link rel="shortlink" href="https://coolshell.cn/?p=8990" />
<link rel="alternate" type="application/json+oembed" href="https://coolshell.cn/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fcoolshell.cn%2Farticles%2F8990.html" />
<link rel="alternate" type="text/xml+oembed" href="https://coolshell.cn/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fcoolshell.cn%2Farticles%2F8990.html&#038;format=xml" />
<script type="62a8d6b6eca02664e6366ca2-text/javascript">
	window._wp_rp_static_base_url = 'https://wprp.zemanta.com/static/';
	window._wp_rp_wp_ajax_url = "https://coolshell.cn/wp-admin/admin-ajax.php";
	window._wp_rp_plugin_version = '3.6.4';
	window._wp_rp_post_id = '8990';
	window._wp_rp_num_rel_posts = '6';
	window._wp_rp_thumbnails = true;
	window._wp_rp_post_title = 'Linus%EF%BC%9A%E5%88%A9%E7%94%A8%E4%BA%8C%E7%BA%A7%E6%8C%87%E9%92%88%E5%88%A0%E9%99%A4%E5%8D%95%E5%90%91%E9%93%BE%E8%A1%A8';
	window._wp_rp_post_tags = ['linux', 'kernel', 'c%2B%2B', 'linus+torvalds', 'coding', 'unix%2Flinux', 'c%2Fc%2B%2B%E8%AF%AD%E8%A8%80', 'spectrum', 'pointer', 'thought', 'entri', 'pride', 'peopl', 'code', 'person', 'a', 'big', 'travers', 'core', 'linu', 'list', 'small'];
	window._wp_rp_promoted_content = true;
</script>
<link rel="stylesheet" href="/coolshell/wp-content/plugins/wordpress-23-related-posts-plugin/static/themes/vertical-m.css?version=3.6.4" />
<style type="text/css">
        .site-header { background: #1d2b2d; }
</style>
</head>
<body class="post-template-default single single-post postid-8990 single-format-standard group-blog">
<link rel="stylesheet" id="nisarg-style-css" href="/coolshell/wp-content/themes/MyNisarg/style.css" type="text/css" media="all">
<div id="page" class="hfeed site">
<header id="masthead" role="banner">
<nav class="navbar navbar-default navbar-fixed-top navbar-left" role="navigation">

<div class="container" id="navigation_menu">
<div class="navbar-header">
<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
<span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
</button>
<a class="navbar-brand" href="/coolshell/"><div class="coolshell_logo"></div>酷 壳 &#8211; CoolShell</a>
</div>
<div class="collapse navbar-collapse navbar-ex1-collapse"><ul id="menu-coolshell" class="nav navbar-nav"><li id="menu-item-17405" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-17405"><a title="首页" href="/coolshell/">首页</a></li>
<li id="menu-item-17406" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-17406"><a title="推荐文章" href="/coolshell/featured">推荐文章</a></li>
<li id="menu-item-17407" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-17407"><a title="本站插件" href="/coolshell/plugins">本站插件</a></li>
<li id="menu-item-17408" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-17408"><a title="留言小本" href="/coolshell/guestbook">留言小本</a></li>
<li id="menu-item-17409" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-17409"><a title="关于酷壳" href="/coolshell/about">关于酷壳</a></li>
<li id="menu-item-17410" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-17410"><a title="关于陈皓" href="/coolshell/haoel">关于陈皓</a></li>
<li id="menu-item-17582" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-17582"><a title="RSS" href="https://coolshell.cn/feed">RSS</a></li>
</ul></div>
</div>
</nav>
<div id="cc_spacer"></div>
<div class="site-header">
<div class="pull-right">
<a title="把这个链接拖到你的Chrome收藏夹工具栏中" href="javascript:(function(){function c(){var e=document.createElement(&quot;link&quot;);e.setAttribute(&quot;type&quot;,&quot;text/css&quot;);e.setAttribute(&quot;rel&quot;,&quot;stylesheet&quot;);e.setAttribute(&quot;href&quot;,f);e.setAttribute(&quot;class&quot;,l);document.body.appendChild(e)}function h(){var e=document.getElementsByClassName(l);for(var t=0;t<e.length;t++){document.body.removeChild(e[t])}}function p(){var e=document.createElement(&quot;div&quot;);e.setAttribute(&quot;class&quot;,a);document.body.appendChild(e);setTimeout(function(){document.body.removeChild(e)},100)}function d(e){return{height:e.offsetHeight,width:e.offsetWidth}}function v(i){var s=d(i);return s.height>e&&s.height<n&&s.width>t&&s.width<r}function m(e){var t=e;var n=0;while(!!t){n+=t.offsetTop;t=t.offsetParent}return n}function g(){var e=document.documentElement;if(!!window.innerWidth){return window.innerHeight}else if(e&&!isNaN(e.clientHeight)){return e.clientHeight}return 0}function y(){if(window.pageYOffset){return window.pageYOffset}return Math.max(document.documentElement.scrollTop,document.body.scrollTop)}function E(e){var t=m(e);return t>=w&&t<=b+w}function S(){var e=document.createElement(&quot;audio&quot;);e.setAttribute(&quot;class&quot;,l);e.src=i;e.loop=false;e.addEventListener(&quot;canplay&quot;,function(){setTimeout(function(){x(k)},500);setTimeout(function(){N();p();for(var e=0;e<O.length;e++){T(O[e])}},15500)},true);e.addEventListener(&quot;ended&quot;,function(){N();h()},true);e.innerHTML=&quot; <p>If you are reading this, it is because your browser does not support the audio element. We recommend that you get a new browser.</p> <p>&quot;;document.body.appendChild(e);e.play()}function x(e){e.className+=&quot; &quot;+s+&quot; &quot;+o}function T(e){e.className+=&quot; &quot;+s+&quot; &quot;+u[Math.floor(Math.random()*u.length)]}function N(){var e=document.getElementsByClassName(s);var t=new RegExp(&quot;\\b&quot;+s+&quot;\\b&quot;);for(var n=0;n<e.length;){e[n].className=e[n].className.replace(t,&quot;&quot;)}}var e=30;var t=30;var n=350;var r=350;var i=&quot;//s3.amazonaws.com/moovweb-marketing/playground/harlem-shake.mp3&quot;;var s=&quot;mw-harlem_shake_me&quot;;var o=&quot;im_first&quot;;var u=[&quot;im_drunk&quot;,&quot;im_baked&quot;,&quot;im_trippin&quot;,&quot;im_blown&quot;];var a=&quot;mw-strobe_light&quot;;var f=&quot;//s3.amazonaws.com/moovweb-marketing/playground/harlem-shake-style.css&quot;;var l=&quot;mw_added_css&quot;;var b=g();var w=y();var C=document.getElementsByTagName(&quot;*&quot;);var k=null;for(var L=0;L<C.length;L++){var A=C[L];if(v(A)){if(E(A)){k=A;break}}}if(A===null){console.warn(&quot;Could not find a node of the right size. Please try a different page.&quot;);return}c();S();var O=[];for(var L=0;L<C.length;L++){var A=C[L];if(v(A)){O.push(A)}}})()    ">High一下!</a>
</div>
<div class="site-branding">
<a class="home-link" href="https://coolshell.cn/" title="酷 壳 &#8211; CoolShell" rel="home">
<h1 class="site-title">酷 壳 &#8211; CoolShell</h1>
<h2 class="site-description">享受编程和技术所带来的快乐 &#8211; Coding Your Ambition</h2>
</a>
</div>
</div>
</header>
<div class="container">
<div class="row">
<div class="col-md-9 nav-searchbox hidden-lg hidden-md visible-sm-* visible-xs-*">
<form role="search" method="get" class="search-form" action="https://coolshell.cn/">
<label>
<span class="screen-reader-text">Search for:</span>
<input type="search" class="search-field" placeholder="Search …" value name="s" title="Search for:">
</label>
<button type="submit" class="search-submit"><span class="screen-reader-text">Search</span></button>
</form>
</div>
</div>
</div>
<div id="content" class="site-content">
<div class="container">
<div class="row">
<div id="primary" class="col-md-9 content-area">
<main id="main" role="main">
<article id="post-8990" class="post-content post-8990 post type-post status-publish format-standard hentry category-cplusplus category-unixlinux tag-c tag-coding tag-kernel tag-linus-torvalds tag-linux">
<header class="entry-header">
<span class="screen-reader-text">Linus：利用二级指针删除单向链表</span>
<h1 class="entry-title">Linus：利用二级指针删除单向链表</h1>
<div class="entry-meta">
<h5 class="entry-date"><i class="fa fa-calendar-o"></i> <a href="/coolshell/articles/8990.html" title="08:33" rel="bookmark"><time class="entry-date" datetime="2013-02-04T08:33:20+08:00" pubdate>2013年02月04日 </time></a><span class="byline"><span class="sep"></span><i class="fa fa-user"></i>
<span class="author vcard"><a class="url fn n" href="/coolshell/articles/author/full_of_bull" title="View all posts by Leo" rel="author">Leo</a></span></span> <i class="fa fa-comments-o"></i><span class="screen-reader-text">评论 </span> <a href="/coolshell/articles/8990.html#comments" class="comments-link">194 条评论</a> <i class="fa fa-users" style="margin-left:10px;"></i> 114,599 人阅读</h5>
</div>
</header>
<div class="entry-content">
<p><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3415450859608158" crossorigin="anonymous" type="62a8d6b6eca02664e6366ca2-text/javascript"></script><strong>感谢网友full_of_bull投递此文</strong>（注：此文最初发表在这个<a href="http://www.oldlinux.org/oldlinux/viewthread.php?tid=14575&amp;extra=page%3D1" target="_blank">这里</a>，我对原文后半段修改了许多，并加入了插图）</p>
<p>Linus大婶在<a href="http://meta.slashdot.org/story/12/10/11/0030249/linus-torvalds-answers-your-questions" target="_blank">slashdot</a>上回答一些编程爱好者的提问，其中一个人问他什么样的代码是他所喜好的，大婶表述了自己一些观点之后，举了一个指针的例子，解释了什么才是<strong>core low-level coding</strong>。</p>
<p>下面是Linus的教学原文及翻译——</p>
<p style="padding-left: 30px;">“At the opposite end of the spectrum, I actually wish more people understood the really core low-level kind of coding. Not big, complex stuff like the lockless name lookup, but simply good use of pointers-to-pointers etc. For example, I&#8217;ve seen too many people who delete a singly-linked list entry by keeping track of the &#8220;prev&#8221; entry, and then to delete the entry, doing something like。（在这段话的最后，我实际上希望更多的人了解什么是真正的核心底层代码。这并不像无锁文件名查询（注：可能是git源码里的设计）那样庞大、复杂，只是仅仅像诸如使用二级指针那样简单的技术。例如，我见过很多人在删除一个单项链表的时候，维护了一个&#8221;prev&#8221;表项指针，然后删除当前表项，就像这样）”</p>
<pre data-enlighter-language="c" class="EnlighterJSRAW">if (prev)
    prev-&gt;next = entry-&gt;next;
else
    list_head = entry-&gt;next;</pre>
<p style="padding-left: 30px;">and whenever I see code like that, I just go &#8220;This person doesn&#8217;t understand pointers&#8221;. And it&#8217;s sadly quite common.（当我看到这样的代码时，我就会想“这个人不了解指针”。令人难过的是这太常见了。）</p>
<p><span id="more-8990"></span></p>
<p style="padding-left: 30px;">People who understand pointers just use a &#8220;pointer to the entry pointer&#8221;, and initialize that with the address of the list_head. And then as they traverse the list, they can remove the entry without using any conditionals, by just doing a &#8220;*pp = entry-&gt;next&#8221;. （了解指针的人会使用链表头的地址来初始化一个“指向节点指针的指针”。当遍历链表的时候，可以不用任何条件判断（注：指prev是否为链表头）就能移除某个节点，只要写)</p>
<p><code data-enlighter-language="c" class="EnlighterJSRAW">*pp = entry-&gt;next</code></p>
<p style="padding-left: 30px;">So there&#8217;s lots of pride in doing the small details right. It may not be big and important code, but I do like seeing code where people really thought about the details, and clearly also were thinking about the compiler being able to generate efficient code (rather than hoping that the compiler is so smart that it can make efficient code *despite* the state of the original source code). （纠正细节是令人自豪的事。也许这段代码并非庞大和重要，<strong>但我喜欢看那些注重代码细节的人写的代码，也就是清楚地了解如何才能编译出有效代码</strong>（而不是寄望于聪明的编译器来产生有效代码，即使是那些原始的汇编代码））。</p>
<p>Linus举了一个单向链表的例子，但给出的代码太短了，一般的人很难搞明白这两个代码后面的含义。正好，有个编程爱好者阅读了这段话，并给出了一个<a href="http://wordaligned.org/articles/two-star-programming" target="_blank">比较完整的代码</a>。他的话我就不翻译了，下面给出代码说明。</p>
<p>如果我们需要写一个remove_if(link*, rm_cond_func*)的函数，也就是传入一个单向链表，和一个自定义的是否删除的函数，然后返回处理后的链接。</p>
<p>这个代码不难，基本上所有的教科书都会提供下面的代码示例，而这种写法也是大公司的面试题<strong>标准</strong>模板：</p>
<pre data-enlighter-language="c" class="EnlighterJSRAW">typedef struct node
{
    struct node * next;
    ....
} node;

typedef bool (* remove_fn)(node const * v);

// Remove all nodes from the supplied list for which the
// supplied remove function returns true.
// Returns the new head of the list.
node * remove_if(node * head, remove_fn rm)
{
    for (node * prev = NULL, * curr = head; curr != NULL; )
    {
        node * const next = curr-&gt;next;
        if (rm(curr))
        {
            if (prev)
                prev-&gt;next = next;
            else
                head = next;
            free(curr);
        }
        else
            prev = curr;
        curr = next;
    }
    return head;
}</pre>
<p>这里remove_fn由调用查提供的一个是否删除当前实体结点的函数指针，其会判断删除条件是否成立。这段代码维护了两个节点指针prev和curr，<strong>标准的教科书写法——删除当前结点时，需要一个previous的指针，并且还要这里还需要做一个边界条件的判断——curr是否为链表头</strong>。于是，要删除一个节点（不是表头），只要将前一个节点的next指向当前节点的next指向的对象，即下一个节点（即：prev-&gt;next = curr-&gt;next），然后释放当前节点。</p>
<p>但在Linus看来，这是不懂指针的人的做法。那么，什么是core low-level coding呢？那就是<strong>有效地利用二级指针，将其作为管理和操作链表的首要选项。</strong>代码如下：</p>
<pre data-enlighter-language="c" class="EnlighterJSRAW" data-enlighter-highlight="5,8,12">void remove_if(node ** head, remove_fn rm)
{
    for (node** curr = head; *curr; )
    {
        node * entry = *curr;
        if (rm(entry))
        {
            *curr = entry-&gt;next;
            free(entry);
        }
        else
            curr = &amp;entry-&gt;next;
    }
}</pre>
<p>同上一段代码有何改进呢？我们看到：<strong>不需要prev指针了，也不需要再去判断是否为链表头了，但是，<span style="color: #cc0000;">curr变成了一个指向指针的指针</span></strong>。这正是这段程序的精妙之处。（注意，我所highlight的那三行代码）</p>
<p>让我们来人肉跑一下这个代码，对于——</p>
<ul>
<li><strong>删除节点是表头</strong>的情况，输入参数中传入head的二级指针，在for循环里将其初始化curr，然后entry就是*head(*curr)，我们马上删除它，那么第8行就等效于*head = (*head)-&gt;next，就是删除表头的实现。</li>
</ul>
<ul>
<li><strong>删除节点不是表头</strong>的情况，对于上面的代码，我们可以看到——</li>
</ul>
<p style="padding-left: 30px;"><strong>1）<strong>（第12行）</strong>如果不删除当前结点 —— curr保存的是当前结点next指针的地址</strong>。</p>
<p style="padding-left: 30px;"><strong>2）（第5行） entry 保存了 *curr <strong>—— </strong>这意味着在下一次循环：entry就是prev-&gt;next指针所指向的内存。</strong></p>
<p style="padding-left: 30px;"><strong></strong><strong>3）（第8行）删除结点：*curr = entry-&gt;next; —— 于是：prev-&gt;next 指向了 entry -&gt; next;</strong></p>
<p>是不是很巧妙？我们可以只用一个二级指针来操作链表，对所有节点都一样。</p>
<p>如果你对上面的代码和描述理解上有困难的话，你可以看看下图的示意：</p>
<p><img decoding="async" class="aligncenter size-full wp-image-9018" alt src="/coolshell/wp-content/uploads/2013/02/linus_pointer_to_pointer.jpg" width="479" height="470" srcset="/coolshell/wp-content/uploads/2013/02/linus_pointer_to_pointer.jpg 479w, /coolshell/wp-content/uploads/2013/02/linus_pointer_to_pointer-300x294.jpg 300w, /coolshell/wp-content/uploads/2013/02/linus_pointer_to_pointer-275x270.jpg 275w" sizes="(max-width: 479px) 100vw, 479px" /></p>
<p>（全文完）</p>
<div style="margin-top: 15px; font-size: 16px;color: #cc0000;">
<p align="center"><strong>（转载本站文章请注明作者和出处 <a href="https://coolshell.cn/">酷 壳 &#8211; CoolShell</a> ，请勿用于任何商业用途）</strong></p>
</div>
<div class="wp_rp_wrap  wp_rp_vertical_m" id="wp_rp_first"><div class="wp_rp_content"><h3 class="related_post_title">相关文章</h3><ul class="related_post wp_rp"><li><a href="/coolshell/articles/9859.html" class="wp_rp_thumbnail"><img src="/coolshell/wp-content/uploads/2013/06/Alan-Cox-150x150.jpg" alt="Alan Cox：单向链表中prev指针的妙用" width="150" height="150" /></a><a href="/coolshell/articles/9859.html" class="wp_rp_title">Alan Cox：单向链表中prev指针的妙用</a></li><li><a href="/coolshell/articles/18360.html" class="wp_rp_thumbnail"><img src="/coolshell/wp-content/uploads/2018/05/300x262-150x150.jpg" alt="程序员练级攻略（2018)  与我的专栏" width="150" height="150" /></a><a href="/coolshell/articles/18360.html" class="wp_rp_title">程序员练级攻略（2018) 与我的专栏</a></li><li><a href="/coolshell/articles/18024.html" class="wp_rp_thumbnail"><img src="/coolshell/wp-content/uploads/2017/07/api-design-300x278-2-150x150.jpg" alt="API设计原则 &#8211; Qt官网的设计实践总结" width="150" height="150" /></a><a href="/coolshell/articles/18024.html" class="wp_rp_title">API设计原则 &#8211; Qt官网的设计实践总结</a></li><li><a href="/coolshell/articles/9917.html" class="wp_rp_thumbnail"><img src="/coolshell/wp-content/plugins/wordpress-23-related-posts-plugin/static/thumbs/10.jpg" alt="Alan Cox：大教堂、市集与市议会" width="150" height="150" /></a><a href="/coolshell/articles/9917.html" class="wp_rp_title">Alan Cox：大教堂、市集与市议会</a></li><li><a href="/coolshell/articles/8088.html" class="wp_rp_thumbnail"><img src="/coolshell/wp-content/plugins/wordpress-23-related-posts-plugin/static/thumbs/7.jpg" alt="对技术的态度" width="150" height="150" /></a><a href="/coolshell/articles/8088.html" class="wp_rp_title">对技术的态度</a></li><li><a href="/coolshell/articles/7886.html" class="wp_rp_thumbnail"><img src="/coolshell/wp-content/uploads/2012/07/muxnt-150x150.jpg" alt="代码执行的效率" width="150" height="150" /></a><a href="/coolshell/articles/7886.html" class="wp_rp_title">代码执行的效率</a></li></ul></div></div>
<div id="post-ratings-8990" class="post-ratings" itemscope itemtype="https://schema.org/Article" data-nonce="a28a6c3f98"><img id="rating_8990_1" src="/coolshell/wp-content/plugins/wp-postratings/images/stars_crystal/rating_on.gif" alt="好烂啊" title="好烂啊" onmouseover="if (!window.__cfRLUnblockHandlers) return false; current_rating(8990, 1, '好烂啊');" onmouseout="if (!window.__cfRLUnblockHandlers) return false; ratings_off(4.3, 5, 0);" onclick="if (!window.__cfRLUnblockHandlers) return false; rate_post();" onkeypress="if (!window.__cfRLUnblockHandlers) return false; rate_post();" style="cursor: pointer; border: 0px;" data-cf-modified-62a8d6b6eca02664e6366ca2- /><img id="rating_8990_2" src="/coolshell/wp-content/plugins/wp-postratings/images/stars_crystal/rating_on.gif" alt="有点差" title="有点差" onmouseover="if (!window.__cfRLUnblockHandlers) return false; current_rating(8990, 2, '有点差');" onmouseout="if (!window.__cfRLUnblockHandlers) return false; ratings_off(4.3, 5, 0);" onclick="if (!window.__cfRLUnblockHandlers) return false; rate_post();" onkeypress="if (!window.__cfRLUnblockHandlers) return false; rate_post();" style="cursor: pointer; border: 0px;" data-cf-modified-62a8d6b6eca02664e6366ca2- /><img id="rating_8990_3" src="/coolshell/wp-content/plugins/wp-postratings/images/stars_crystal/rating_on.gif" alt="凑合看看" title="凑合看看" onmouseover="if (!window.__cfRLUnblockHandlers) return false; current_rating(8990, 3, '凑合看看');" onmouseout="if (!window.__cfRLUnblockHandlers) return false; ratings_off(4.3, 5, 0);" onclick="if (!window.__cfRLUnblockHandlers) return false; rate_post();" onkeypress="if (!window.__cfRLUnblockHandlers) return false; rate_post();" style="cursor: pointer; border: 0px;" data-cf-modified-62a8d6b6eca02664e6366ca2- /><img id="rating_8990_4" src="/coolshell/wp-content/plugins/wp-postratings/images/stars_crystal/rating_on.gif" alt="还不错" title="还不错" onmouseover="if (!window.__cfRLUnblockHandlers) return false; current_rating(8990, 4, '还不错');" onmouseout="if (!window.__cfRLUnblockHandlers) return false; ratings_off(4.3, 5, 0);" onclick="if (!window.__cfRLUnblockHandlers) return false; rate_post();" onkeypress="if (!window.__cfRLUnblockHandlers) return false; rate_post();" style="cursor: pointer; border: 0px;" data-cf-modified-62a8d6b6eca02664e6366ca2- /><img id="rating_8990_5" src="/coolshell/wp-content/plugins/wp-postratings/images/stars_crystal/rating_half.gif" alt="很精彩" title="很精彩" onmouseover="if (!window.__cfRLUnblockHandlers) return false; current_rating(8990, 5, '很精彩');" onmouseout="if (!window.__cfRLUnblockHandlers) return false; ratings_off(4.3, 5, 0);" onclick="if (!window.__cfRLUnblockHandlers) return false; rate_post();" onkeypress="if (!window.__cfRLUnblockHandlers) return false; rate_post();" style="cursor: pointer; border: 0px;" data-cf-modified-62a8d6b6eca02664e6366ca2- /> (<strong>54</strong> 人打了分，平均分： <strong>4.28</strong> )<br/><span class="post-ratings-text" id="ratings_8990_text"></span><meta itemprop="name" content="Linus：利用二级指针删除单向链表" /><meta itemprop="headline" content="Linus：利用二级指针删除单向链表" /><meta itemprop="description" content="感谢网友full_of_bull投递此文（注：此文最初发表在这个这里，我对原文后半段修改了许多，并加入了插图）

Linus大婶在slashdot上回答一些编程爱好者的提问，其中一个人问他什么样的代码是他所喜好的，大婶表述了自己一些观点之后，举了一个指针的例子，解释了什么才是core low-level coding。

下面是Linus的教学原文及翻译&mdash;&mdash;
&ldquo;At the opposi..." /><meta itemprop="datePublished" content="2013-02-04T08:33:20+08:00" /><meta itemprop="dateModified" content="2013-02-04T15:12:58+08:00" /><meta itemprop="url" content="/coolshell/articles/8990.html" /><meta itemprop="author" content="Leo" /><meta itemprop="mainEntityOfPage" content="/coolshell/articles/8990.html" /><div style="display: none;" itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="酷 壳 - CoolShell" /><meta itemprop="url" content="https://coolshell.cn" /><div itemprop="logo" itemscope itemtype="https://schema.org/ImageObject"><meta itemprop="url" content /></div></div><div style="display: none;" itemprop="aggregateRating" itemscope itemtype="https://schema.org/AggregateRating"><meta itemprop="bestRating" content="5" /><meta itemprop="worstRating" content="1" /><meta itemprop="ratingValue" content="4.28" /><meta itemprop="ratingCount" content="54" /></div></div><div id="post-ratings-8990-loading" class="post-ratings-loading"><img src="/coolshell/wp-content/plugins/wp-postratings/images/loading.gif" width="16" height="16" class="post-ratings-image" />Loading...</div>
</div>
<footer class="entry-footer">
<hr><div class="row"><div class="col-md-6 cattegories"><span class="cat-links"><i class="fa fa-folder-open"></i>
<a href="/coolshell/category/proglanguage/cplusplus" rel="category tag">C/C++语言</a>, <a href="/coolshell/category/operatingsystem/unixlinux" rel="category tag">Unix/Linux</a></span></div><div class="col-md-6 tags"><span class="tags-links"><i class="fa fa-tags"></i> <a href="/coolshell/tag/c" rel="tag">C++</a>, <a href="/coolshell/tag/coding" rel="tag">Coding</a>, <a href="/coolshell/tag/kernel" rel="tag">Kernel</a>, <a href="/coolshell/tag/linus-torvalds" rel="tag">Linus Torvalds</a>, <a href="/coolshell/tag/linux" rel="tag">Linux</a></span></div></div> </footer>
</article>

<div id="related_posts">
<div class="wp_rp_wrap  wp_rp_vertical_m"><div class="wp_rp_content"><h3 class="related_post_title">相关文章</h3><ul class="related_post wp_rp"><li><a href="/coolshell/articles/9859.html" class="wp_rp_thumbnail"><img src="/coolshell/wp-content/uploads/2013/06/Alan-Cox-150x150.jpg" alt="Alan Cox：单向链表中prev指针的妙用" width="150" height="150" /></a><a href="/coolshell/articles/9859.html" class="wp_rp_title">Alan Cox：单向链表中prev指针的妙用</a></li><li><a href="/coolshell/articles/18360.html" class="wp_rp_thumbnail"><img src="/coolshell/wp-content/uploads/2018/05/300x262-150x150.jpg" alt="程序员练级攻略（2018)  与我的专栏" width="150" height="150" /></a><a href="/coolshell/articles/18360.html" class="wp_rp_title">程序员练级攻略（2018) 与我的专栏</a></li><li><a href="/coolshell/articles/18024.html" class="wp_rp_thumbnail"><img src="/coolshell/wp-content/uploads/2017/07/api-design-300x278-2-150x150.jpg" alt="API设计原则 &#8211; Qt官网的设计实践总结" width="150" height="150" /></a><a href="/coolshell/articles/18024.html" class="wp_rp_title">API设计原则 &#8211; Qt官网的设计实践总结</a></li><li><a href="/coolshell/articles/9917.html" class="wp_rp_thumbnail"><img src="/coolshell/wp-content/plugins/wordpress-23-related-posts-plugin/static/thumbs/10.jpg" alt="Alan Cox：大教堂、市集与市议会" width="150" height="150" /></a><a href="/coolshell/articles/9917.html" class="wp_rp_title">Alan Cox：大教堂、市集与市议会</a></li><li><a href="/coolshell/articles/8088.html" class="wp_rp_thumbnail"><img src="/coolshell/wp-content/plugins/wordpress-23-related-posts-plugin/static/thumbs/7.jpg" alt="对技术的态度" width="150" height="150" /></a><a href="/coolshell/articles/8088.html" class="wp_rp_title">对技术的态度</a></li><li><a href="/coolshell/articles/7886.html" class="wp_rp_thumbnail"><img src="/coolshell/wp-content/uploads/2012/07/muxnt-150x150.jpg" alt="代码执行的效率" width="150" height="150" /></a><a href="/coolshell/articles/7886.html" class="wp_rp_title">代码执行的效率</a></li></ul></div></div>
</div><div class="fixed"></div> 
</main>
<div class="post-navigation">
<nav class="navigation" role="navigation">
<h2 class="screen-reader-text">Post navigation</h2>
<div class="nav-links">
<div class="row">

<div class="col-md-6 next-post">
<a class href="/coolshell/articles/9070.html"><span class="next-prev-text"><i class="fa fa-angle-left"></i>
上一篇</span><br>AWK 简明教程</a>
</div>

<div class="col-md-6 prev-post">
<a class href="/coolshell/articles/8961.html"><span class="next-prev-text">下一篇 <i class="fa fa-angle-right"></i>
</span><br>从面向对象的设计模式看软件设计</a>
</div>
</div>
</div>
</nav>
</div>
<div class="post-comments">
<div id="comments" class="comments-area">
<h2 class="comments-title">
《<span>Linus：利用二级指针删除单向链表</span>》的相关评论 </h2>
<ol class="comment-list">
<li id="comment-286822" class="comment even thread-even depth-1">
<article id="div-comment-286822" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/c5811056f783287781ae4c6091682ab9?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/c5811056f783287781ae4c6091682ab9?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">baibaichen</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/8990.html/comment-page-2#comment-286822"><time datetime="2013-02-05T15:07:00+08:00">2013年02月05日 15:07</time></a> </div>
</footer>
<div class="comment-content">
<p>加个间接层，用二级指针屏蔽了prev为空的case，此时二级指针指向head，这技巧不错。不过老实说指针的指针，除了那帮一直搞这个的大婶们能运用自如外，对我等屌丝，这类代码可读性并不高。</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/8990.html/comment-page-2?replytocom=286822#respond" data-commentid="286822" data-postid="8990" data-belowelement="div-comment-286822" data-respondelement="respond" data-replyto="回复给baibaichen" aria-label="回复给baibaichen">回复</a></div> </article>
</li>
<li id="comment-286837" class="comment odd alt thread-odd thread-alt depth-1">
<article id="div-comment-286837" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/46a90385ac626c3e2ed65446e14f12ae?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/46a90385ac626c3e2ed65446e14f12ae?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">TOBY</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/8990.html/comment-page-2#comment-286837"><time datetime="2013-02-05T15:28:41+08:00">2013年02月05日 15:28</time></a> </div>
</footer>
<div class="comment-content">
<p>你的理解好像错了，那一句<br/>
curr = &amp;entry-&gt;next;<br/>
是不能写成<br/>
curr = (node**)entry的。</p>
<p>这样定义node，LZ的方法仍然可行，你可以编码试试。<br/>
typedef struct node<br/>
{<br/>
….<br/>
struct node * next;<br/>
}<a href="#comment-286005" rel="nofollow">@viho_he </a></p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/8990.html/comment-page-2?replytocom=286837#respond" data-commentid="286837" data-postid="8990" data-belowelement="div-comment-286837" data-respondelement="respond" data-replyto="回复给TOBY" aria-label="回复给TOBY">回复</a></div> </article>
</li>
<li id="comment-286857" class="comment even thread-even depth-1">
<article id="div-comment-286857" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/2a6a8e5765018a58b9f7f12e29697f4d?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/2a6a8e5765018a58b9f7f12e29697f4d?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">debug</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/8990.html/comment-page-2#comment-286857"><time datetime="2013-02-05T15:57:12+08:00">2013年02月05日 15:57</time></a> </div>
</footer>
<div class="comment-content">
<p>程序看完很快懂了，但是总觉得不放心，因为自己写不出来<br/>
然后看了评论 又想了一会才弄明白本质</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/8990.html/comment-page-2?replytocom=286857#respond" data-commentid="286857" data-postid="8990" data-belowelement="div-comment-286857" data-respondelement="respond" data-replyto="回复给debug" aria-label="回复给debug">回复</a></div> </article>
</li>
<li id="comment-286868" class="comment odd alt thread-odd thread-alt depth-1">
<article id="div-comment-286868" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/20dd05347249e3984f2d4546ea0ca127?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/20dd05347249e3984f2d4546ea0ca127?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn"><a href="http://hit9.org" class="url" rel="ugc external nofollow">hit9</a></b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/8990.html/comment-page-2#comment-286868"><time datetime="2013-02-05T16:16:51+08:00">2013年02月05日 16:16</time></a> </div>
</footer>
<div class="comment-content">
<p>錯別字<br/>
大婶表述了自己一些观点之后</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/8990.html/comment-page-2?replytocom=286868#respond" data-commentid="286868" data-postid="8990" data-belowelement="div-comment-286868" data-respondelement="respond" data-replyto="回复给hit9" aria-label="回复给hit9">回复</a></div> </article>
</li>
<li id="comment-286885" class="comment even thread-even depth-1">
<article id="div-comment-286885" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/62bbfe08f67f1dcf14b3ca52985f3f3a?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/62bbfe08f67f1dcf14b3ca52985f3f3a?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">shengy</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/8990.html/comment-page-2#comment-286885"><time datetime="2013-02-05T17:00:36+08:00">2013年02月05日 17:00</time></a> </div>
</footer>
<div class="comment-content">
<p>remember that, in the scope of the loop, curr always points directly to the pointer that pointed you to the current node, whether it was the head of the list or the next pointer of the previous node, so *curr lets you modify that pointer.<br/>
抄过来的：）放在这里帮助大家理解。<br/>
在循环的作用域里，curr永远指向那个引导你到当前结点的指针，无论这个指针是head指针还是prev结点的next指针，所以*curr提供了一种可以操作那个指针的方法。</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/8990.html/comment-page-2?replytocom=286885#respond" data-commentid="286885" data-postid="8990" data-belowelement="div-comment-286885" data-respondelement="respond" data-replyto="回复给shengy" aria-label="回复给shengy">回复</a></div> </article>
</li>
<li id="comment-286941" class="comment odd alt thread-odd thread-alt depth-1">
<article id="div-comment-286941" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/c4e26dfa2143faa6435e87b829d99a83?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/c4e26dfa2143faa6435e87b829d99a83?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">hcz</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/8990.html/comment-page-2#comment-286941"><time datetime="2013-02-05T18:50:45+08:00">2013年02月05日 18:50</time></a> </div>
</footer>
<div class="comment-content">
<p>我以前规避判断的方法一般是在表头前面再插入一个Node，从那儿开始</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/8990.html/comment-page-2?replytocom=286941#respond" data-commentid="286941" data-postid="8990" data-belowelement="div-comment-286941" data-respondelement="respond" data-replyto="回复给hcz" aria-label="回复给hcz">回复</a></div> </article>
</li>
<li id="comment-286955" class="comment even thread-even depth-1">
<article id="div-comment-286955" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/bf0da2f56a3338790819eb520d420c54?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/bf0da2f56a3338790819eb520d420c54?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn"><a href="http://www.felix021.com/blog/" class="url" rel="ugc external nofollow">felix021</a></b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/8990.html/comment-page-2#comment-286955"><time datetime="2013-02-05T19:09:22+08:00">2013年02月05日 19:09</time></a> </div>
</footer>
<div class="comment-content">
<p><a href="#comment-285934" rel="nofollow">@ZFang </a><br/>
你的代码好长。。。我只简单测试了下删除和保留数基本一致的情况，linus的代码比原先那个还要慢5%左右（用gettimeofday取的时间）。</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/8990.html/comment-page-2?replytocom=286955#respond" data-commentid="286955" data-postid="8990" data-belowelement="div-comment-286955" data-respondelement="respond" data-replyto="回复给felix021" aria-label="回复给felix021">回复</a></div> </article>
</li>
<li id="comment-287014" class="comment odd alt thread-odd thread-alt depth-1">
<article id="div-comment-287014" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/79a7a7e002ec553f819fb7484b3981c2?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/79a7a7e002ec553f819fb7484b3981c2?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">wxd356</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/8990.html/comment-page-2#comment-287014"><time datetime="2013-02-05T21:15:32+08:00">2013年02月05日 21:15</time></a> </div>
</footer>
<div class="comment-content">
<p>感觉好像是做了点手脚让第一个指针能像节点一样用而已，然后就按没有头来处理，我能说这是技巧吗？</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/8990.html/comment-page-2?replytocom=287014#respond" data-commentid="287014" data-postid="8990" data-belowelement="div-comment-287014" data-respondelement="respond" data-replyto="回复给wxd356" aria-label="回复给wxd356">回复</a></div> </article>
</li>
<li id="comment-287017" class="comment even thread-even depth-1">
<article id="div-comment-287017" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/79a7a7e002ec553f819fb7484b3981c2?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/79a7a7e002ec553f819fb7484b3981c2?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">wxd356</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/8990.html/comment-page-2#comment-287017"><time datetime="2013-02-05T21:17:00+08:00">2013年02月05日 21:17</time></a> </div>
</footer>
<div class="comment-content">
<p><a href="#comment-286955" rel="nofollow">@felix021 </a><br/>
感觉没理由啊&#8230;</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/8990.html/comment-page-2?replytocom=287017#respond" data-commentid="287017" data-postid="8990" data-belowelement="div-comment-287017" data-respondelement="respond" data-replyto="回复给wxd356" aria-label="回复给wxd356">回复</a></div> </article>
</li>
<li id="comment-287321" class="comment odd alt thread-odd thread-alt depth-1">
<article id="div-comment-287321" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/bf0da2f56a3338790819eb520d420c54?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/bf0da2f56a3338790819eb520d420c54?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn"><a href="http://www.felix021.com/blog/" class="url" rel="ugc external nofollow">felix021</a></b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/8990.html/comment-page-2#comment-287321"><time datetime="2013-02-06T09:05:12+08:00">2013年02月06日 09:05</time></a> </div>
</footer>
<div class="comment-content">
<p>大概是现在的CPU分支预测什么的做得很好了吧。linus的代码的确把那个if分支给拿掉了，但是二级指针却导致了更多的访存，而访存的速度。。。<a href="#comment-287017" rel="nofollow">@wxd356 </a></p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/8990.html/comment-page-2?replytocom=287321#respond" data-commentid="287321" data-postid="8990" data-belowelement="div-comment-287321" data-respondelement="respond" data-replyto="回复给felix021" aria-label="回复给felix021">回复</a></div> </article>
</li>
<li id="comment-287323" class="comment even thread-even depth-1">
<article id="div-comment-287323" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/bf0da2f56a3338790819eb520d420c54?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/bf0da2f56a3338790819eb520d420c54?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn"><a href="http://www.felix021.com/blog/" class="url" rel="ugc external nofollow">felix021</a></b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/8990.html/comment-page-2#comment-287323"><time datetime="2013-02-06T09:06:32+08:00">2013年02月06日 09:06</time></a> </div>
</footer>
<div class="comment-content">
<p>下面这个代码同样去掉了那个if，理解起来也比较容易。<br/>
void remove2(node **phead, func rm)<br/>
{<br/>
node *head = *phead, *prev, *curr;<br/>
for (prev = head, curr = head-&gt;next; curr != NULL; )<br/>
{<br/>
node *const next = curr-&gt;next;<br/>
if (rm(curr))<br/>
{<br/>
prev-&gt;next = next;<br/>
free(curr);<br/>
}<br/>
else<br/>
prev = curr;<br/>
curr = next;<br/>
}<br/>
if (head-&gt;val) {<br/>
*phead = head-&gt;next;<br/>
free(head);<br/>
}<br/>
}</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/8990.html/comment-page-2?replytocom=287323#respond" data-commentid="287323" data-postid="8990" data-belowelement="div-comment-287323" data-respondelement="respond" data-replyto="回复给felix021" aria-label="回复给felix021">回复</a></div> </article>
</li>
<li id="comment-287421" class="comment odd alt thread-odd thread-alt depth-1">
<article id="div-comment-287421" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/000c4801f36b4bea2acffde09c1a4cc2?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/000c4801f36b4bea2acffde09c1a4cc2?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">舌尖上的中国豆腐渣</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/8990.html/comment-page-2#comment-287421"><time datetime="2013-02-06T12:14:33+08:00">2013年02月06日 12:14</time></a> </div>
</footer>
<div class="comment-content">
<p>多年前我在某本书上看到过，当时激动了半天，没想到一个指针就可以搞定删除</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/8990.html/comment-page-2?replytocom=287421#respond" data-commentid="287421" data-postid="8990" data-belowelement="div-comment-287421" data-respondelement="respond" data-replyto="回复给舌尖上的中国豆腐渣" aria-label="回复给舌尖上的中国豆腐渣">回复</a></div> </article>
</li>
<li id="comment-287506" class="comment even thread-even depth-1">
<article id="div-comment-287506" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/7549dca1572bb6b70b3b97d7e466da52?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/7549dca1572bb6b70b3b97d7e466da52?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">Leon</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/8990.html/comment-page-2#comment-287506"><time datetime="2013-02-06T15:10:04+08:00">2013年02月06日 15:10</time></a> </div>
</footer>
<div class="comment-content">
<p>这个不就是增加一个dummy node(伪节点)来访问修改单链表么？<br/>
无数无数的数据结构教材都讲过，例如严老师那本。</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/8990.html/comment-page-2?replytocom=287506#respond" data-commentid="287506" data-postid="8990" data-belowelement="div-comment-287506" data-respondelement="respond" data-replyto="回复给Leon" aria-label="回复给Leon">回复</a></div> </article>
</li>
<li id="comment-287521" class="comment odd alt thread-odd thread-alt depth-1">
<article id="div-comment-287521" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/3b9c06e2cb3abc944f34987c1b763818?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/3b9c06e2cb3abc944f34987c1b763818?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn"><a href="http://www.zcold.me" class="url" rel="ugc external nofollow">Zeicold</a></b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/8990.html/comment-page-2#comment-287521"><time datetime="2013-02-06T15:50:28+08:00">2013年02月06日 15:50</time></a> </div>
</footer>
<div class="comment-content">
<p>最近感觉这个细节固然重要<br/>
但是面对越来越复杂的系统<br/>
编译器能隐藏的细节越多越好<br/>
而不是每次都按照特定要求在特定环境优化特定算法</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/8990.html/comment-page-2?replytocom=287521#respond" data-commentid="287521" data-postid="8990" data-belowelement="div-comment-287521" data-respondelement="respond" data-replyto="回复给Zeicold" aria-label="回复给Zeicold">回复</a></div> </article>
</li>
<li id="comment-287635" class="comment byuser comment-author-full_of_bull bypostauthor even thread-even depth-1">
<article id="div-comment-287635" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/a6e9e679d4d308a570b1e74705c026de?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/a6e9e679d4d308a570b1e74705c026de?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn"><a href="http://www.oldlinux.org/" class="url" rel="ugc external nofollow">full_of_bull</a></b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/8990.html/comment-page-2#comment-287635"><time datetime="2013-02-06T20:26:33+08:00">2013年02月06日 20:26</time></a> </div>
</footer>
<div class="comment-content">
<blockquote cite="#commentbody-286000"><p>
<strong><a href="#comment-286000" rel="nofollow">iambic</a> :</strong><br/>
一般这种链表问题，好像加一个dummy head比较好吧，比如<br/>
1234567891011121314151617181920212223242526272829<code>struct</code> <code>Node{</code><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>int</code> <code>val;</code><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>Node* next;</code><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>Node(</code><code>int</code> <code>v){ val = v; next = NULL; }</code><code>};</code>&nbsp;<code>typedef</code> <code>bool</code> <code>(* remove_fn)(</code><code>int</code> <code>val) ;</code><code>Node* remove_if(Node* head, remove_fn f)</code><code>{</code><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>Node *r=</code><code>new</code> <code>Node(0);</code><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>Node *p=r;</code><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>while</code><code>(head)</code><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>{&nbsp;&nbsp; </code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>if</code><code>(!f(head-&gt;val)){</code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>p-&gt;next = head;</code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>p=p-&gt;next;</code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>head = head-&gt;next;</code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>p-&gt;next=NULL;</code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>}</code><code>else</code><code>{</code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>Node* t=head; </code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>head=head-&gt;next;</code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>delete</code> <code>t;</code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>}&nbsp;&nbsp; </code><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>}&nbsp;&nbsp; </code><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>p=r;</code><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>r=r-&gt;next;</code><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>delete</code> <code>p;</code><code>//remove dummy head</code><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>return</code> <code>r;</code><code>}</code>
</p></blockquote>
<p>dumy节点也是一个方法，但没有二级指针干净，原因是多了一个malloc，调用100W次效果你懂的。</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/8990.html/comment-page-2?replytocom=287635#respond" data-commentid="287635" data-postid="8990" data-belowelement="div-comment-287635" data-respondelement="respond" data-replyto="回复给full_of_bull" aria-label="回复给full_of_bull">回复</a></div> </article>
</li>
<li id="comment-287651" class="comment odd alt thread-odd thread-alt depth-1">
<article id="div-comment-287651" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/211e1450f4539f87908a9f24996a149c?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/211e1450f4539f87908a9f24996a149c?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">acker</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/8990.html/comment-page-2#comment-287651"><time datetime="2013-02-06T20:53:10+08:00">2013年02月06日 20:53</time></a> </div>
</footer>
<div class="comment-content">
<p>Linux这回搞错了，根本不需要这样。给链表戴个头结点，两指针一前一后跑一次就行了。 最后也能返回头结点。Linus没有把方法说清，不评价了。中文方法里，虽然可行，但head返回不了，只能直接带出。</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/8990.html/comment-page-2?replytocom=287651#respond" data-commentid="287651" data-postid="8990" data-belowelement="div-comment-287651" data-respondelement="respond" data-replyto="回复给acker" aria-label="回复给acker">回复</a></div> </article>
</li>
<li id="comment-287703" class="comment even thread-even depth-1">
<article id="div-comment-287703" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/308f51b6766f6e658b5df8405a5844a4?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/308f51b6766f6e658b5df8405a5844a4?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">amwtke</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/8990.html/comment-page-2#comment-287703"><time datetime="2013-02-06T22:42:36+08:00">2013年02月06日 22:42</time></a> </div>
</footer>
<div class="comment-content">
<p>关键是弄清楚&amp;与*操作的实质。</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/8990.html/comment-page-2?replytocom=287703#respond" data-commentid="287703" data-postid="8990" data-belowelement="div-comment-287703" data-respondelement="respond" data-replyto="回复给amwtke" aria-label="回复给amwtke">回复</a></div> </article>
</li>
<li id="comment-287741" class="comment odd alt thread-odd thread-alt depth-1">
<article id="div-comment-287741" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/6bc1435311e6321a58aab03b804ac046?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/6bc1435311e6321a58aab03b804ac046?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">超然</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/8990.html/comment-page-2#comment-287741"><time datetime="2013-02-07T00:28:35+08:00">2013年02月07日 00:28</time></a> </div>
</footer>
<div class="comment-content">
<p><a href="#comment-286005" rel="nofollow">@viho_he </a><br/>
并不是这样子的，next指针放在结构体的任意地方都可以。<br/>
关键是第12行：curr = &amp;entry-&gt;next;<br/>
这里，已经让curr这个二级指针直接指向了next指针的地址。<br/>
循环回来到第8行：*curr = entry-&gt;next;<br/>
这时候对curr二级指针的内容进行操作时，已经影响（改变）到了前面结点的next指针所在内存的内容。也就是改变了next域的内容，使其值为正确的下一个结点。</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/8990.html/comment-page-2?replytocom=287741#respond" data-commentid="287741" data-postid="8990" data-belowelement="div-comment-287741" data-respondelement="respond" data-replyto="回复给超然" aria-label="回复给超然">回复</a></div> </article>
</li>
<li id="comment-287742" class="comment even thread-even depth-1">
<article id="div-comment-287742" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/6bc1435311e6321a58aab03b804ac046?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/6bc1435311e6321a58aab03b804ac046?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">超然</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/8990.html/comment-page-2#comment-287742"><time datetime="2013-02-07T00:29:28+08:00">2013年02月07日 00:29</time></a> </div>
</footer>
<div class="comment-content">
<blockquote cite="#commentbody-286005"><p>
<strong><a href="#comment-286005" rel="nofollow">viho_he</a> :</strong><br/>
Linus的这个用法，是利用了链表的一个特性：当这样来定义struct，<br/>
typedef struct node<br/>
{<br/>
struct node * next;<br/>
….<br/>
}<br/>
即指针next是在struct的最前面时，next指针的存放地址，就等于是这个node本身的存放地址，即<br/>
node == &amp;node-&gt;next<br/>
因此那一句<br/>
curr = &amp;entry-&gt;next;<br/>
也可以写成<br/>
curr = (node**)entry;<br/>
这个特性，也成了利用二级指针的关键。<br/>
如果链表是这样定义的，linus的做法就行不通了。然而在kernel代码里没人会这样定义链表：<br/>
typedef struct node<br/>
{<br/>
….<br/>
struct node * next;<br/>
}
</p></blockquote>
<p>并不是这样子的，next指针放在结构体的任意地方都可以。<br/>
关键是第12行：curr = &amp;entry-&gt;next;<br/>
这里，已经让curr这个二级指针直接指向了next指针的地址。<br/>
循环回来到第8行：*curr = entry-&gt;next;<br/>
这时候对curr二级指针的内容进行操作时，已经影响（改变）到了前面结点的next指针所在内存的内容。也就是改变了next域的内容，使其值为正确的下一个结点。</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/8990.html/comment-page-2?replytocom=287742#respond" data-commentid="287742" data-postid="8990" data-belowelement="div-comment-287742" data-respondelement="respond" data-replyto="回复给超然" aria-label="回复给超然">回复</a></div> </article>
</li>
<li id="comment-288147" class="comment odd alt thread-odd thread-alt depth-1 parent">
<article id="div-comment-288147" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/48fb61f7d2aebdc17eacf1193366bfc5?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/48fb61f7d2aebdc17eacf1193366bfc5?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">小新</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/8990.html/comment-page-2#comment-288147"><time datetime="2013-02-07T17:07:13+08:00">2013年02月07日 17:07</time></a> </div>
</footer>
<div class="comment-content">
<p>我感觉这两段代码似乎都存在问题，第一段使用if/else的代码，其函数声明方式为：<br/>
node * remove_if(node * head, remove_fn rm)<br/>
这里形参head显然是值传递进来的，调用者传入的实参是无论如何不会改变的，所以这个函数在头需要改变时不会起作用。<br/>
第二种实现中缺乏对空指针的判断，如果传入的是空链表，则*head==NULL，entry==NULL，第8行的<br/>
*curr = entry-&gt;next; 将直接崩溃。</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/8990.html/comment-page-2?replytocom=288147#respond" data-commentid="288147" data-postid="8990" data-belowelement="div-comment-288147" data-respondelement="respond" data-replyto="回复给小新" aria-label="回复给小新">回复</a></div> </article>
<ol class="children">
<li id="comment-2111735" class="comment even depth-2">
<article id="div-comment-2111735" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/f675a4a7fee4aca1830b0bab9423d164?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/f675a4a7fee4aca1830b0bab9423d164?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">ww</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/8990.html/comment-page-2#comment-2111735"><time datetime="2020-05-28T11:54:34+08:00">2020年05月28日 11:54</time></a> </div>
</footer>
<div class="comment-content">
<p>你的理解有误，linux的写法没问题。我猜你以为传入空链表的时候curr==NULL，但实际上传空链表时 *curr==NULL，这样for循环就不会执行，因此没有任何问题。<br/>
linus的写法主要有两个方面不好推广，一是理解起来比较难，正如他所说的，只有对指针非常熟悉的人才可以熟练驾驭这种写法，普通人能理解就已经不容易了；二是效率不一定比普通写法高，因为现代CPU的分支预测做得好，而linus的写法访问指针过多，在处理比较长的链表时会慢一些。<br/>
我认为更好的方法是给链表一个dummy_head，然后prev=&amp;dummy_head, curr=prev-&gt;next;这样就不用额外判断真正的第一个节点是不是空啦。</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/8990.html/comment-page-2?replytocom=2111735#respond" data-commentid="2111735" data-postid="8990" data-belowelement="div-comment-2111735" data-respondelement="respond" data-replyto="回复给ww" aria-label="回复给ww">回复</a></div> </article>
</li>
</ol>
</li>
<li id="comment-288395" class="comment odd alt thread-even depth-1">
<article id="div-comment-288395" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/4d7b3f89716a395d44721d8d49729a27?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/4d7b3f89716a395d44721d8d49729a27?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">fanhe</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/8990.html/comment-page-2#comment-288395"><time datetime="2013-02-08T04:17:07+08:00">2013年02月08日 04:17</time></a> </div>
</footer>
<div class="comment-content">
<p>粗略地看了一下，貌似这两种方式只是删除策略不一样导致的问题而已。<br/>
不用prev策略的话，根本无须使用二级指针也能实现，其实也就是完全不需要用prev语义的一种删除策略而已<br/>
void remove_if(node * head, remove_fn rm)<br/>
{<br/>
for (node* savedpos = head; savedpos; )<br/>
{<br/>
node * entry = savedpos;<br/>
if (rm(entry))<br/>
{<br/>
savedpos-&gt;next = entry-&gt;next;<br/>
free(entry);<br/>
}<br/>
else<br/>
savedpos = entry;<br/>
}<br/>
}</p>
<p>简单来说就是需要两个变量保存遍历的位置<br/>
这段代码我未有时间跑一下验证，但是从策略来说好像是正确的<br/>
看明天我有时间的话跑一下这代码</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/8990.html/comment-page-2?replytocom=288395#respond" data-commentid="288395" data-postid="8990" data-belowelement="div-comment-288395" data-respondelement="respond" data-replyto="回复给fanhe" aria-label="回复给fanhe">回复</a></div> </article>
</li>
<li id="comment-288404" class="comment even thread-odd thread-alt depth-1">
<article id="div-comment-288404" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/4d7b3f89716a395d44721d8d49729a27?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/4d7b3f89716a395d44721d8d49729a27?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">fanhe</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/8990.html/comment-page-2#comment-288404"><time datetime="2013-02-08T04:49:21+08:00">2013年02月08日 04:49</time></a> </div>
</footer>
<div class="comment-content">
<p>按照上面说的删除策略，代码应该是这样才对<br/>
void remove_if(node * head, remove_fn rm)<br/>
{<br/>
node *savedpos = head;<br/>
node *curr = savedpos;<br/>
while (curr)<br/>
{<br/>
if (rm(curr))<br/>
{<br/>
/* 删除成功 */<br/>
node *n = curr;<br/>
savedpos-&gt;next = curr-&gt;next;<br/>
curr = curr-&gt;next;<br/>
free(n);<br/>
}<br/>
else<br/>
{<br/>
savedpos = curr;<br/>
curr = curr-&gt;next;<br/>
}<br/>
}<br/>
}</p>
<p>真不知道上面二级指针的那段代码到底是不是对的……，没空去把代码跑起来</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/8990.html/comment-page-2?replytocom=288404#respond" data-commentid="288404" data-postid="8990" data-belowelement="div-comment-288404" data-respondelement="respond" data-replyto="回复给fanhe" aria-label="回复给fanhe">回复</a></div> </article>
</li>
<li id="comment-288586" class="comment odd alt thread-even depth-1">
<article id="div-comment-288586" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/d7b575239f21824e4873d58ae168ef0c?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/d7b575239f21824e4873d58ae168ef0c?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">scaret</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/8990.html/comment-page-2#comment-288586"><time datetime="2013-02-08T12:08:46+08:00">2013年02月08日 12:08</time></a> </div>
</footer>
<div class="comment-content">
<p>我觉得你的图没有问题,但是你把事实弄复杂了.重点并不在于使用了一个&#8221;指向指针的指针&#8221;,而是直接在prev时判断prev的next也就是current的删除状况,由此来节约一个指针</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/8990.html/comment-page-2?replytocom=288586#respond" data-commentid="288586" data-postid="8990" data-belowelement="div-comment-288586" data-respondelement="respond" data-replyto="回复给scaret" aria-label="回复给scaret">回复</a></div> </article>
</li>
<li id="comment-288619" class="comment even thread-odd thread-alt depth-1">
<article id="div-comment-288619" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/52323bbc9160402e7f4d1b0ffd7929a5?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/52323bbc9160402e7f4d1b0ffd7929a5?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">viho_he</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/8990.html/comment-page-2#comment-288619"><time datetime="2013-02-08T13:21:10+08:00">2013年02月08日 13:21</time></a> </div>
</footer>
<div class="comment-content">
<blockquote cite="#commentbody-287742"><p>
<strong><a href="#comment-287742" rel="nofollow">超然</a> :</strong></p>
<blockquote cite="#commentbody-286005"><p>
<strong><a href="#comment-286005" rel="nofollow">viho_he</a> :</strong><br/>
Linus的这个用法，是利用了链表的一个特性：当这样来定义struct，<br/>
typedef struct node<br/>
{<br/>
struct node * next;<br/>
….<br/>
}<br/>
即指针next是在struct的最前面时，next指针的存放地址，就等于是这个node本身的存放地址，即<br/>
node == &amp;node-&gt;next<br/>
因此那一句<br/>
curr = &amp;entry-&gt;next;<br/>
也可以写成<br/>
curr = (node**)entry;<br/>
这个特性，也成了利用二级指针的关键。<br/>
如果链表是这样定义的，linus的做法就行不通了。然而在kernel代码里没人会这样定义链表：<br/>
typedef struct node<br/>
{<br/>
….<br/>
struct node * next;<br/>
}
</p></blockquote>
<p>并不是这样子的，next指针放在结构体的任意地方都可以。<br/>
关键是第12行：curr = &amp;entry-&gt;next;<br/>
这里，已经让curr这个二级指针直接指向了next指针的地址。<br/>
循环回来到第8行：*curr = entry-&gt;next;<br/>
这时候对curr二级指针的内容进行操作时，已经影响（改变）到了前面结点的next指针所在内存的内容。也就是改变了next域的内容，使其值为正确的下一个结点。
</p></blockquote>
<p>你纠正的对。代码写成<br/>
*curr = &amp;entry-&gt;next时，不管next放在node里面的哪个地方，编译器都会正确找出来。</p>
<p>只有代码写成这种比较hack的方法，next才必须是放在node头部(即&amp;next == &amp;node)，但不具有读性，也有移植性的问题：<br/>
*curr = (node **)entry</p>
<p>在这种写法中，<br/>
*curr = (node **)entry 之所以与 *curr = &amp;entry-&gt;next等效，是因为<br/>
entry-&gt;next == *entry，因此&amp;entry-&gt;next == entry。但前题是next指针的存放地址必须是node本身的地址。<br/>
<a href="#comment-286837" rel="nofollow">@TOBY </a></p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/8990.html/comment-page-2?replytocom=288619#respond" data-commentid="288619" data-postid="8990" data-belowelement="div-comment-288619" data-respondelement="respond" data-replyto="回复给viho_he" aria-label="回复给viho_he">回复</a></div> </article>
</li>
<li id="comment-288626" class="comment odd alt thread-even depth-1">
<article id="div-comment-288626" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/4d7b3f89716a395d44721d8d49729a27?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/4d7b3f89716a395d44721d8d49729a27?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">fanhe</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/8990.html/comment-page-2#comment-288626"><time datetime="2013-02-08T13:42:12+08:00">2013年02月08日 13:42</time></a> </div>
</footer>
<div class="comment-content">
<p>终于弄清楚了这个问题的本质，其实上面的描述有很多误导的地方，而且图也没把问题说清楚。<br/>
图只是说明了一种删除策略而已，没有对二级指针的作用表达清楚<br/>
这时一种不用二级指针的替代代码，策略是一模一样的，本质就是一个虚拟头的next<br/>
void remove_if(node * head, remove_fn rm)<br/>
{<br/>
node dummy;<br/>
dummy.next = head;<br/>
node *savedpos = &amp;dummy;</p>
<p> while (savedpos-&gt;next)<br/>
{<br/>
node *entry = savedpos-&gt;next;<br/>
if (rm(entry))<br/>
{<br/>
savedpos-&gt;next = entry-&gt;next;<br/>
free(entry);<br/>
}<br/>
else<br/>
{<br/>
savedpos = savedpos-&gt;next;<br/>
}<br/>
}<br/>
}</p>
<p>本质上，linus方案利用了一个特性，链表头可用一个二级指针存储，作为虚拟头节点中的next字段，从而节省了自己生成虚拟头的功夫，但是这样会多了解引用操作。<br/>
其实linus方案也就是是存储prev-&gt;next字段实现删除而已，但这个方案有个缺点，如果需要返回新的头的话，需要额外的工作。也就是如果要返回新的头节点的话，linus方案的代码不比prev方案的代码少多少。<br/>
说起来，linus方案其实是挺没意思的，本来一个很简单的事情，搞得这么复杂。<br/>
本来每种策略就是牺牲了某方便来实现其他方面的，不存在不牺牲任何资源就实现某目标的方法。</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/8990.html/comment-page-2?replytocom=288626#respond" data-commentid="288626" data-postid="8990" data-belowelement="div-comment-288626" data-respondelement="respond" data-replyto="回复给fanhe" aria-label="回复给fanhe">回复</a></div> </article>
</li>
<li id="comment-288672" class="comment even thread-odd thread-alt depth-1">
<article id="div-comment-288672" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/9353ba172b61dce6554a84462c8b463a?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/9353ba172b61dce6554a84462c8b463a?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">card323</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/8990.html/comment-page-2#comment-288672"><time datetime="2013-02-08T15:58:25+08:00">2013年02月08日 15:58</time></a> </div>
</footer>
<div class="comment-content">
<p><a href="#comment-288147" rel="nofollow">@小新 </a><br/>
你两个都说错了<br/>
1，头指针指向的值可以改变就行了，头指针本身不需要改变<br/>
2，如果*head==null 根本就进不去for循环</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/8990.html/comment-page-2?replytocom=288672#respond" data-commentid="288672" data-postid="8990" data-belowelement="div-comment-288672" data-respondelement="respond" data-replyto="回复给card323" aria-label="回复给card323">回复</a></div> </article>
</li>
<li id="comment-288674" class="comment odd alt thread-even depth-1">
<article id="div-comment-288674" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/9353ba172b61dce6554a84462c8b463a?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/9353ba172b61dce6554a84462c8b463a?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">card323</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/8990.html/comment-page-2#comment-288674"><time datetime="2013-02-08T16:00:29+08:00">2013年02月08日 16:00</time></a> </div>
</footer>
<div class="comment-content">
<p><a href="#comment-288626" rel="nofollow">@fanhe </a><br/>
看代码就够了<br/>
何苦还要看图<br/>
一个人永远不需要两只表</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/8990.html/comment-page-2?replytocom=288674#respond" data-commentid="288674" data-postid="8990" data-belowelement="div-comment-288674" data-respondelement="respond" data-replyto="回复给card323" aria-label="回复给card323">回复</a></div> </article>
</li>
<li id="comment-288754" class="comment even thread-odd thread-alt depth-1">
<article id="div-comment-288754" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/cf4d45f4c334ab6f314ead763ef5b6b4?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/cf4d45f4c334ab6f314ead763ef5b6b4?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn"><a href="http://www.cnblogs.com/panda_lin" class="url" rel="ugc external nofollow">不平衡树</a></b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/8990.html/comment-page-2#comment-288754"><time datetime="2013-02-08T18:33:38+08:00">2013年02月08日 18:33</time></a> </div>
</footer>
<div class="comment-content">
<p>精彩。如果还有不懂的同学我在这里总结一下，prev指针的next的值就是next的地址，用一个二级指针**curr的话，*curr就是当前节点, curr同时还是prev-&gt;next的地址。</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/8990.html/comment-page-2?replytocom=288754#respond" data-commentid="288754" data-postid="8990" data-belowelement="div-comment-288754" data-respondelement="respond" data-replyto="回复给不平衡树" aria-label="回复给不平衡树">回复</a></div> </article>
</li>
<li id="comment-289337" class="comment odd alt thread-even depth-1">
<article id="div-comment-289337" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/117e63663b886802518de016122d4487?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/117e63663b886802518de016122d4487?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn"><a href="http://blog.csdn.net/linzhengqun" class="url" rel="ugc external nofollow">colin</a></b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/8990.html/comment-page-2#comment-289337"><time datetime="2013-02-09T17:02:21+08:00">2013年02月09日 17:02</time></a> </div>
</footer>
<div class="comment-content">
<p>从内存与地址的角度来看，就一目了然。<br/>
一个变量代表一个存储，这个存储本身有一个地址；而指针也是一个变量，也代表了一个存储，这个存储中的值是另一个存储的地址。</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/8990.html/comment-page-2?replytocom=289337#respond" data-commentid="289337" data-postid="8990" data-belowelement="div-comment-289337" data-respondelement="respond" data-replyto="回复给colin" aria-label="回复给colin">回复</a></div> </article>
</li>
<li id="comment-290501" class="comment even thread-odd thread-alt depth-1">
<article id="div-comment-290501" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/fca43d5b86503981fc22e6c691b848be?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/fca43d5b86503981fc22e6c691b848be?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">rainkin</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/8990.html/comment-page-2#comment-290501"><time datetime="2013-02-11T23:38:00+08:00">2013年02月11日 23:38</time></a> </div>
</footer>
<div class="comment-content">
<p>看了半天才看懂，太菜了。我觉得这个和增加一个头节点的原理是类似的，只不过这个方法操纵的对象变成了指针。不知道对不对&#8230;</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/8990.html/comment-page-2?replytocom=290501#respond" data-commentid="290501" data-postid="8990" data-belowelement="div-comment-290501" data-respondelement="respond" data-replyto="回复给rainkin" aria-label="回复给rainkin">回复</a></div> </article>
</li>
<li id="comment-290984" class="comment odd alt thread-even depth-1">
<article id="div-comment-290984" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/48fb61f7d2aebdc17eacf1193366bfc5?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/48fb61f7d2aebdc17eacf1193366bfc5?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">小新</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/8990.html/comment-page-2#comment-290984"><time datetime="2013-02-12T21:11:49+08:00">2013年02月12日 21:11</time></a> </div>
</footer>
<div class="comment-content">
<p><a href="#comment-288672" rel="nofollow">@card323 </a><br/>
不好意思，第二个确实没仔细看for的条件，空不回进入；但是第一个函数我认为还是有问题的，链表为空时是要改变head本身的值为NULL的，这是head指针本身的值，不是head指向的值。</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/8990.html/comment-page-2?replytocom=290984#respond" data-commentid="290984" data-postid="8990" data-belowelement="div-comment-290984" data-respondelement="respond" data-replyto="回复给小新" aria-label="回复给小新">回复</a></div> </article>
</li>
<li id="comment-292550" class="comment even thread-odd thread-alt depth-1">
<article id="div-comment-292550" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/d549c33c0b6260e210f5945fbd0c1cff?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/d549c33c0b6260e210f5945fbd0c1cff?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn"><a href="http://www.huawei.com" class="url" rel="ugc external nofollow">erichain</a></b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/8990.html/comment-page-2#comment-292550"><time datetime="2013-02-16T14:42:24+08:00">2013年02月16日 14:42</time></a> </div>
</footer>
<div class="comment-content">
<blockquote cite="#commentbody-290984"><p>
<strong><a href="#comment-290984" rel="nofollow">小新 </a> :</strong><a href="#comment-288672" rel="nofollow">@card323 </a>不好意思，第二个确实没仔细看for的条件，空不回进入；但是第一个函数我认为还是有问题的，链表为空时是要改变head本身的值为NULL的，这是head指针本身的值，不是head指向的值。</p></blockquote>
<p>用法不一样。<br/>
第一个函数在函数外部由调用者去用返回值替换head本身的值；<br/>
第二个函数在函数内部直接修改了head本身的值。</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/8990.html/comment-page-2?replytocom=292550#respond" data-commentid="292550" data-postid="8990" data-belowelement="div-comment-292550" data-respondelement="respond" data-replyto="回复给erichain" aria-label="回复给erichain">回复</a></div> </article>
</li>
<li id="comment-293161" class="comment odd alt thread-even depth-1">
<article id="div-comment-293161" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/cab2294b727c366508b021238e65f67f?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/cab2294b727c366508b021238e65f67f?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">test</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/8990.html/comment-page-2#comment-293161"><time datetime="2013-02-17T21:38:31+08:00">2013年02月17日 21:38</time></a> </div>
</footer>
<div class="comment-content">
<p>*curr = entry-&gt;next;怎么看，也删除不了entry啊。</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/8990.html/comment-page-2?replytocom=293161#respond" data-commentid="293161" data-postid="8990" data-belowelement="div-comment-293161" data-respondelement="respond" data-replyto="回复给test" aria-label="回复给test">回复</a></div> </article>
</li>
<li id="comment-293958" class="comment even thread-odd thread-alt depth-1">
<article id="div-comment-293958" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/21c3957cc77158290328c099e3dd1732?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/21c3957cc77158290328c099e3dd1732?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">sqbing</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/8990.html/comment-page-2#comment-293958"><time datetime="2013-02-19T10:33:42+08:00">2013年02月19日 10:33</time></a> </div>
</footer>
<div class="comment-content">
<p>传值和传引用的区别嘛，没什么亮点，还以为是自己忽略了什么技巧，想多了</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/8990.html/comment-page-2?replytocom=293958#respond" data-commentid="293958" data-postid="8990" data-belowelement="div-comment-293958" data-respondelement="respond" data-replyto="回复给sqbing" aria-label="回复给sqbing">回复</a></div> </article>
</li>
<li id="comment-299592" class="comment odd alt thread-even depth-1">
<article id="div-comment-299592" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/68a690e769b5b0312056a034442dd584?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/68a690e769b5b0312056a034442dd584?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">that-yu</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/8990.html/comment-page-2#comment-299592"><time datetime="2013-02-28T13:19:10+08:00">2013年02月28日 13:19</time></a> </div>
</footer>
<div class="comment-content">
<p>LZ，无锁文件名查询，应该是内核中文件系统中路径名查询中的代码吧&#8230;</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/8990.html/comment-page-2?replytocom=299592#respond" data-commentid="299592" data-postid="8990" data-belowelement="div-comment-299592" data-respondelement="respond" data-replyto="回复给that-yu" aria-label="回复给that-yu">回复</a></div> </article>
</li>
<li id="comment-303376" class="comment byuser comment-author-full_of_bull bypostauthor even thread-odd thread-alt depth-1">
<article id="div-comment-303376" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/a6e9e679d4d308a570b1e74705c026de?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/a6e9e679d4d308a570b1e74705c026de?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn"><a href="http://www.oldlinux.org/" class="url" rel="ugc external nofollow">full_of_bull</a></b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/8990.html/comment-page-2#comment-303376"><time datetime="2013-03-05T00:11:11+08:00">2013年03月05日 00:11</time></a> </div>
</footer>
<div class="comment-content">
<p>谢谢指正！<a href="#comment-299592" rel="nofollow">@that-yu </a></p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/8990.html/comment-page-2?replytocom=303376#respond" data-commentid="303376" data-postid="8990" data-belowelement="div-comment-303376" data-respondelement="respond" data-replyto="回复给full_of_bull" aria-label="回复给full_of_bull">回复</a></div> </article>
</li>
<li id="comment-306621" class="comment odd alt thread-even depth-1">
<article id="div-comment-306621" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/71b4b017be1fe3e17f50e3c41ccf099d?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/71b4b017be1fe3e17f50e3c41ccf099d?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">shuiren</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/8990.html/comment-page-2#comment-306621"><time datetime="2013-03-08T15:51:21+08:00">2013年03月08日 15:51</time></a> </div>
</footer>
<div class="comment-content">
<p>我想说，这玩意儿也算是个花活吧？ 大神不是以花活太多为理由抵制c++吗</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/8990.html/comment-page-2?replytocom=306621#respond" data-commentid="306621" data-postid="8990" data-belowelement="div-comment-306621" data-respondelement="respond" data-replyto="回复给shuiren" aria-label="回复给shuiren">回复</a></div> </article>
</li>
<li id="comment-308379" class="comment even thread-odd thread-alt depth-1">
<article id="div-comment-308379" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/2237aa8ff190ff0922054785cf8e91bb?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/2237aa8ff190ff0922054785cf8e91bb?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">9sheng</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/8990.html/comment-page-2#comment-308379"><time datetime="2013-03-11T11:39:53+08:00">2013年03月11日 11:39</time></a> </div>
</footer>
<div class="comment-content">
<p>这还是一个思考方式的差异吧：<br/>
第一种方法，考察某节点时候，判断该节点是否可删除<br/>
第二种方法，考察A节点时候，判断该节点的下一节点是否可删除</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/8990.html/comment-page-2?replytocom=308379#respond" data-commentid="308379" data-postid="8990" data-belowelement="div-comment-308379" data-respondelement="respond" data-replyto="回复给9sheng" aria-label="回复给9sheng">回复</a></div> </article>
</li>
<li id="comment-309259" class="comment odd alt thread-even depth-1">
<article id="div-comment-309259" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/117e63663b886802518de016122d4487?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/117e63663b886802518de016122d4487?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">colin</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/8990.html/comment-page-2#comment-309259"><time datetime="2013-03-12T19:49:18+08:00">2013年03月12日 19:49</time></a> </div>
</footer>
<div class="comment-content">
<p>呵呵，测了一下，发现二级指针竟然没有加一个if来得快，Linus这回也不完全正确。<br/>
因为二级指针导致间接寻址，所以并没有快</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/8990.html/comment-page-2?replytocom=309259#respond" data-commentid="309259" data-postid="8990" data-belowelement="div-comment-309259" data-respondelement="respond" data-replyto="回复给colin" aria-label="回复给colin">回复</a></div> </article>
</li>
<li id="comment-310188" class="comment even thread-odd thread-alt depth-1">
<article id="div-comment-310188" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/9809d96ec1d0e3ade31bd8c8f610f676?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/9809d96ec1d0e3ade31bd8c8f610f676?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">taikou</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/8990.html/comment-page-2#comment-310188"><time datetime="2013-03-14T11:08:44+08:00">2013年03月14日 11:08</time></a> </div>
</footer>
<div class="comment-content">
<p>pointers on c里讲过类似的方法，不过那里是用在单链表插入</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/8990.html/comment-page-2?replytocom=310188#respond" data-commentid="310188" data-postid="8990" data-belowelement="div-comment-310188" data-respondelement="respond" data-replyto="回复给taikou" aria-label="回复给taikou">回复</a></div> </article>
</li>
<li id="comment-316606" class="pingback odd alt thread-even depth-1">
<div class="comment-body">
Pingback： <a href="http://huaninfo.sinaapp.com/?p=24" class="url" rel="ugc external nofollow">二叉树的递归实现 | uncle pi</a> </div>
</li>
<li id="comment-316826" class="comment even thread-odd thread-alt depth-1">
<article id="div-comment-316826" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/1bc26190a989346cf3c825e356c38111?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/1bc26190a989346cf3c825e356c38111?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">starfish</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/8990.html/comment-page-2#comment-316826"><time datetime="2013-03-25T19:57:39+08:00">2013年03月25日 19:57</time></a> </div>
</footer>
<div class="comment-content">
<p>这种简单的数据结构技巧，中学生就会了，有什么值得激动的？</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/8990.html/comment-page-2?replytocom=316826#respond" data-commentid="316826" data-postid="8990" data-belowelement="div-comment-316826" data-respondelement="respond" data-replyto="回复给starfish" aria-label="回复给starfish">回复</a></div> </article>
</li>
<li id="comment-319220" class="comment odd alt thread-even depth-1">
<article id="div-comment-319220" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/2e82f5f8a481fc7252fc474de28f212b?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/2e82f5f8a481fc7252fc474de28f212b?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">arniu</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/8990.html/comment-page-2#comment-319220"><time datetime="2013-03-30T12:15:32+08:00">2013年03月30日 12:15</time></a> </div>
</footer>
<div class="comment-content">
<p>我咋感觉配图好像不对呢……</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/8990.html/comment-page-2?replytocom=319220#respond" data-commentid="319220" data-postid="8990" data-belowelement="div-comment-319220" data-respondelement="respond" data-replyto="回复给arniu" aria-label="回复给arniu">回复</a></div> </article>
</li>
<li id="comment-320218" class="comment even thread-odd thread-alt depth-1">
<article id="div-comment-320218" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/ba8937ff76f8df4d42cd4477e418eb8e?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/ba8937ff76f8df4d42cd4477e418eb8e?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">flysun</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/8990.html/comment-page-2#comment-320218"><time datetime="2013-04-01T23:31:40+08:00">2013年04月01日 23:31</time></a> </div>
</footer>
<div class="comment-content">
<p>恍然大悟——指针即变量的地址，改变变量的值时候不妨想想通过指针来实现，包括指针变量。</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/8990.html/comment-page-2?replytocom=320218#respond" data-commentid="320218" data-postid="8990" data-belowelement="div-comment-320218" data-respondelement="respond" data-replyto="回复给flysun" aria-label="回复给flysun">回复</a></div> </article>
</li>
<li id="comment-320490" class="comment odd alt thread-even depth-1">
<article id="div-comment-320490" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/4f643319822e87e2965f84585dd41282?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/4f643319822e87e2965f84585dd41282?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">liwei</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/8990.html/comment-page-2#comment-320490"><time datetime="2013-04-02T15:23:56+08:00">2013年04月02日 15:23</time></a> </div>
</footer>
<div class="comment-content">
<p>&#8220;这并不像无锁文件名查询（注：可能是git源码里的设计）那样庞大、复杂&#8221;</p>
<p>这里是指内核文件系统里面的文件名查询</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/8990.html/comment-page-2?replytocom=320490#respond" data-commentid="320490" data-postid="8990" data-belowelement="div-comment-320490" data-respondelement="respond" data-replyto="回复给liwei" aria-label="回复给liwei">回复</a></div> </article>
</li>
<li id="comment-322997" class="comment even thread-odd thread-alt depth-1">
<article id="div-comment-322997" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/f6e8f50be1751f1bb1648b0fb473850d?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/f6e8f50be1751f1bb1648b0fb473850d?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">zhouzhenghui</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/8990.html/comment-page-2#comment-322997"><time datetime="2013-04-08T19:25:43+08:00">2013年04月08日 19:25</time></a> </div>
</footer>
<div class="comment-content">
<p>这个方法是FreeBSD里基于宏的list实现所用的方法。而linux里的list.h目前是增加dummy头的方法，其通用实现已经被归档到ccan.org里。两种方法各有擅场，从长远角度看，个人倾向后者，代码本身更加容易扩充。</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/8990.html/comment-page-2?replytocom=322997#respond" data-commentid="322997" data-postid="8990" data-belowelement="div-comment-322997" data-respondelement="respond" data-replyto="回复给zhouzhenghui" aria-label="回复给zhouzhenghui">回复</a></div> </article>
</li>
<li id="comment-323899" class="comment odd alt thread-even depth-1">
<article id="div-comment-323899" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/f6e8f50be1751f1bb1648b0fb473850d?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/f6e8f50be1751f1bb1648b0fb473850d?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">zhouzhenghui</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/8990.html/comment-page-2#comment-323899"><time datetime="2013-04-10T20:55:22+08:00">2013年04月10日 20:55</time></a> </div>
</footer>
<div class="comment-content">
<p>更正回复中的一个错误，ccan项目域名不是ccan.org，应该是http://ccodearchive.net/，其维护者就是linux里list.h实现的作者。</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/8990.html/comment-page-2?replytocom=323899#respond" data-commentid="323899" data-postid="8990" data-belowelement="div-comment-323899" data-respondelement="respond" data-replyto="回复给zhouzhenghui" aria-label="回复给zhouzhenghui">回复</a></div> </article>
</li>
<li id="comment-325449" class="comment byuser comment-author-full_of_bull bypostauthor even thread-odd thread-alt depth-1">
<article id="div-comment-325449" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/a6e9e679d4d308a570b1e74705c026de?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/a6e9e679d4d308a570b1e74705c026de?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn"><a href="https://oops_geekchina@googlegroups.com" class="url" rel="ugc external nofollow">Leo</a></b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/8990.html/comment-page-2#comment-325449"><time datetime="2013-04-13T09:17:34+08:00">2013年04月13日 09:17</time></a> </div>
</footer>
<div class="comment-content">
<p>不错的站点，谢谢推荐！<a href="#comment-322997" rel="nofollow">@zhouzhenghui </a></p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/8990.html/comment-page-2?replytocom=325449#respond" data-commentid="325449" data-postid="8990" data-belowelement="div-comment-325449" data-respondelement="respond" data-replyto="回复给Leo" aria-label="回复给Leo">回复</a></div> </article>
</li>
<li id="comment-325556" class="comment odd alt thread-even depth-1">
<article id="div-comment-325556" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/d9ca4486086acabd698847aac71f101c?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/d9ca4486086acabd698847aac71f101c?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">yelu</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/8990.html/comment-page-2#comment-325556"><time datetime="2013-04-13T11:33:29+08:00">2013年04月13日 11:33</time></a> </div>
</footer>
<div class="comment-content">
<blockquote cite="#commentbody-288586"><p>
<strong><a href="#comment-288586" rel="nofollow">scaret</a> :</strong><br/>
我觉得你的图没有问题,但是你把事实弄复杂了.重点并不在于使用了一个”指向指针的指针”,而是直接在prev时判断prev的next也就是current的删除状况,由此来节约一个指针
</p></blockquote>
<blockquote cite="#commentbody-288586"><p>
<strong><a href="#comment-288586" rel="nofollow">scaret</a> :</strong><br/>
我觉得你的图没有问题,但是你把事实弄复杂了.重点并不在于使用了一个”指向指针的指针”,而是直接在prev时判断prev的next也就是current的删除状况,由此来节约一个指针
</p></blockquote>
<p>同意</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/8990.html/comment-page-2?replytocom=325556#respond" data-commentid="325556" data-postid="8990" data-belowelement="div-comment-325556" data-respondelement="respond" data-replyto="回复给yelu" aria-label="回复给yelu">回复</a></div> </article>
</li>
<li id="comment-325887" class="comment even thread-odd thread-alt depth-1">
<article id="div-comment-325887" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/394d9842ac8c117346cb61e073104ac8?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/394d9842ac8c117346cb61e073104ac8?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">l</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/8990.html/comment-page-2#comment-325887"><time datetime="2013-04-13T20:09:37+08:00">2013年04月13日 20:09</time></a> </div>
</footer>
<div class="comment-content">
<p>这只是用entry简化之后的表达，实际上的意思是curr=&amp;(**curr).next;<a href="#comment-287741" rel="nofollow">@超然 </a></p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/8990.html/comment-page-2?replytocom=325887#respond" data-commentid="325887" data-postid="8990" data-belowelement="div-comment-325887" data-respondelement="respond" data-replyto="回复给l" aria-label="回复给l">回复</a></div> </article>
</li>
</ol>
<nav class="navigation comment-navigation" role="navigation">
<h2 class="screen-reader-text">Comment navigation</h2>
<div class="nav-links">
<div id="commentnavi">
<span class="pages"><i class="fa fa-comments"></i> 评论分页</span>
<div id="commentpager">
<a class="prev page-numbers" href="/coolshell/articles/8990.html/comment-page-1#comments">&laquo; 上一页</a>
<a class="page-numbers" href="/coolshell/articles/8990.html/comment-page-1#comments">1</a>
<span aria-current="page" class="page-numbers current">2</span>
<a class="page-numbers" href="/coolshell/articles/8990.html/comment-page-3#comments">3</a>
<a class="page-numbers" href="/coolshell/articles/8990.html/comment-page-4#comments">4</a>
<a class="next page-numbers" href="/coolshell/articles/8990.html/comment-page-3#comments">下一页 &raquo;</a> <span id="cp_post_id">8990</span>
</div>
<div class="fixed"></div>
</div>
</div>
</nav>
<div id="respond" class="comment-respond">
<h3 id="reply-title" class="comment-reply-title">发表回复 <small><a rel="nofollow" id="cancel-comment-reply-link" href="/coolshell/articles/8990.html/comment-page-2#respond" style="display:none;">取消回复</a></small></h3><form action="https://coolshell.cn/wp-comments-post.php" method="post" id="commentform" class="comment-form" novalidate><p class="comment-notes"><span id="email-notes">您的电子邮箱地址不会被公开。</span> <span class="required-field-message">必填项已用<span class="required">*</span>标注</span></p><p class="comment-form-comment"><label for="comment">评论 <span class="required">*</span></label> <textarea id="comment" name="comment" cols="45" rows="8" maxlength="65525" required></textarea></p><p class="comment-form-author"><label for="author">显示名称 <span class="required">*</span></label> <input id="author" name="author" type="text" value size="30" maxlength="245" autocomplete="name" required /></p>
<p class="comment-form-email"><label for="email">电子邮箱地址 <span class="required">*</span></label> <input id="email" name="email" type="email" value size="30" maxlength="100" aria-describedby="email-notes" autocomplete="email" required /></p>
<p class="comment-form-url"><label for="url">网站地址</label> <input id="url" name="url" type="url" value size="30" maxlength="200" autocomplete="url" /></p>
<p class="form-submit"><input name="submit" type="submit" id="submit" class="submit" value="发表评论" /> <input type="hidden" name="comment_post_ID" value="8990" id="comment_post_ID" />
<input type="hidden" name="comment_parent" id="comment_parent" value="0" />
</p><p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="419b521fd2" /></p><p style="display: none !important;"><label>&#916;<textarea name="ak_hp_textarea" cols="45" rows="8" maxlength="100"></textarea></label><input type="hidden" id="ak_js_1" name="ak_js" value="53" /><script type="62a8d6b6eca02664e6366ca2-text/javascript">document.getElementById( "ak_js_1" ).setAttribute( "value", ( new Date() ).getTime() );</script></p></form> </div>
</div>
</div>
</div>
<div id="secondary" class="col-md-3 hidden-sm hidden-xs sidebar widget-area" role="complementary">
<aside id="search-9" class="widget widget_search">
<form role="search" method="get" class="search-form" action="https://coolshell.cn/">
<label>
<span class="screen-reader-text">Search for:</span>
<input type="search" class="search-field" placeholder="Search &hellip;" value name="s" title="Search for:" />
</label>
<button type="submit" class="search-submit"><span class="screen-reader-text">Search</span></button>
</form>
</aside><aside id="custom_html-3" class="widget_text widget widget_custom_html"><h4 class="widget-title">本站公告</h4><p align="center"><a href="https://memorial.megaease.cn/">纪念陈皓</a></p><div class="textwidget custom-html-widget"><p align="center"><a class="twitter" href="https://twitter.com/haoel" target="_blank" rel="noopener"> Twitter @haoel </a></p>

<p align="center">极客时间专栏<br><a href="http://gk.link/a/10sBp" target="_blank" rel="noopener"><img src="/coolshell/wp-content/uploads/2021/06/8311623409583_.pic_hd-1024x1024.jpg" height="200" weight="200" alt="极客时间专栏" title="极客时间专栏"></a></p>

</div></aside>
<aside id="recent-posts-4" class="widget widget_recent_entries">
<h4 class="widget-title"><a href="/coolshell/articles/">最新文章</a></h4>
<ul>
<li>
<a href="/coolshell/articles/22422.html">是微服务架构不香还是云不香？</a>
</li>
<li>
<a href="/coolshell/articles/22398.html">我看ChatGPT: 为啥谷歌掉了千亿美金</a>
</li>
<li>
<a href="/coolshell/articles/22367.html">聊聊 nostr 和 审查</a>
</li>
<li>
<a href="/coolshell/articles/22341.html">感染新冠的经历</a>
</li>
<li>
<a href="/coolshell/articles/22320.html">eBPF 介绍</a>
</li>
<li>
<a href="/coolshell/articles/22298.html">聊聊团队协同和协同工具</a>
</li>
<li>
<a href="/coolshell/articles/22263.html">从一次经历谈 TIME_WAIT 的那些事</a>
</li>
<li>
<a href="/coolshell/articles/22242.html">ETCD的内存问题</a>
</li>
<li>
<a href="/coolshell/articles/22173.html">“一把梭：REST API 全用 POST”</a>
</li>
<li>
<a href="/coolshell/articles/22157.html">谈谈公司对员工的监控</a>
</li>
<li>
<a href="/coolshell/articles/21708.html">网络数字身份认证术</a>
</li>
<li>
<a href="/coolshell/articles/21672.html">我做系统架构的一些原则</a>
</li>
<li>
<a href="/coolshell/articles/21649.html">源代码特洛伊木马攻击</a>
</li>
<li>
<a href="/coolshell/articles/21615.html">Go编程模式 ： 泛型编程</a>
</li>
<li>
<a href="/coolshell/articles/21589.html">如何做一个有质量的技术分享</a>
</li>
<li>
<a href="/coolshell/articles/21263.html">Go 编程模式：k8s Visitor 模式</a>
</li>
<li>
<a href="/coolshell/articles/21228.html">Go编程模式：Pipeline</a>
</li>
<li>
<a href="/coolshell/articles/21214.html">Go编程模式：委托和反转控制</a>
</li>
<li>
<a href="/coolshell/articles/21179.html">Go 编程模式：Go Generation</a>
</li>
<li>
<a href="/coolshell/articles/21164.html">Go编程模式：Map-Reduce</a>
</li>
<li>
<a href="/coolshell/articles/21146.html">Go 编程模式：Functional Options</a>
</li>
<li>
<a href="/coolshell/articles/21140.html">Go 编程模式：错误处理</a>
</li>
<li>
<a href="/coolshell/articles/21128.html">Go编程模式：切片，接口，时间和性能</a>
</li>
<li>
<a href="/coolshell/articles/21113.html">百度为什么掉队了</a>
</li>
<li>
<a href="/coolshell/articles/20977.html">程序员如何把控自己的职业</a>
</li>
<li>
<a href="/coolshell/articles/21003.html">计时攻击 Timing Attacks</a>
</li>
<li>
<a href="/coolshell/articles/20845.html">Rust语言的编程范式</a>
</li>
<li>
<a href="/coolshell/articles/20793.html">与程序员相关的CPU缓存知识</a>
</li>
<li>
<a href="/coolshell/articles/20765.html">MegaEase的远程工作文化</a>
</li>
<li>
<a href="/coolshell/articles/20533.html">使用简单的逻辑方法进行独立思考</a>
</li>
</ul>
</aside><aside id="views-6" class="widget widget_views"><h4 class="widget-title"><a href="/coolshell/articles/">全站热门</a></h4><ul>
<li><a href="/coolshell/articles/4990.html" title="程序员技术练级攻略 - 10,243,232 人阅读">程序员技术练级攻略</a></li><li><a href="/coolshell/articles/3961.html" title="&ldquo;火柴棍式&rdquo;程序员面试题 - 2,357,181 人阅读">&ldquo;火柴棍式&rdquo;程序员面试题</a></li><li><a href="/coolshell/articles/5426.html" title="简明 Vim 练级攻略 - 1,327,380 人阅读">简明 Vim 练级攻略</a></li><li><a href="/coolshell/articles/9308.html" title="&ldquo;作环保的程序员，从不用百度开始&rdquo; - 595,955 人阅读">&ldquo;作环保的程序员，从不用百度开始&rdquo;</a></li><li><a href="/coolshell/articles/11564.html" title="TCP 的那些事儿（上） - 489,958 人阅读">TCP 的那些事儿（上）</a></li><li><a href="/coolshell/articles/9070.html" title="AWK 简明教程 - 453,935 人阅读">AWK 简明教程</a></li><li><a href="/coolshell/articles/7186.html" title="做个环保主义的程序员 - 447,894 人阅读">做个环保主义的程序员</a></li><li><a href="/coolshell/articles/10688.html" title="编程能力与编程年龄 - 417,821 人阅读">编程能力与编程年龄</a></li><li><a href="/coolshell/articles/10590.html" title="二维码的生成细节和原理 - 394,241 人阅读">二维码的生成细节和原理</a></li><li><a href="/coolshell/articles/9104.html" title="sed 简明教程 - 380,746 人阅读">sed 简明教程</a></li><li><a href="/coolshell/articles/4102.html" title="如何学好C语言 - 369,154 人阅读">如何学好C语言</a></li><li><a href="/coolshell/articles/19464.html" title="如何超过大多数人 - 317,977 人阅读">如何超过大多数人</a></li><li><a href="/coolshell/articles/17583.html" title="技术人员的发展之路 - 310,145 人阅读">技术人员的发展之路</a></li><li><a href="/coolshell/articles/9606.html" title="疫苗：Java HashMap的死循环 - 305,885 人阅读">疫苗：Java HashMap的死循环</a></li><li><a href="/coolshell/articles/6470.html" title="由12306.cn谈谈网站性能技术 - 299,650 人阅读">由12306.cn谈谈网站性能技术</a></li><li><a href="/coolshell/articles/8883.html" title="应该知道的Linux技巧 - 297,479 人阅读">应该知道的Linux技巧</a></li><li><a href="/coolshell/articles/17416.html" title="缓存更新的套路 - 294,163 人阅读">缓存更新的套路</a></li><li><a href="/coolshell/articles/10910.html" title="分布式系统的事务处理 - 285,145 人阅读">分布式系统的事务处理</a></li><li><a href="/coolshell/articles/11609.html" title="TCP 的那些事儿（下） - 284,962 人阅读">TCP 的那些事儿（下）</a></li><li><a href="/coolshell/articles/2250.html" title="&ldquo;21天教你学会C++&rdquo; - 279,625 人阅读">&ldquo;21天教你学会C++&rdquo;</a></li><li><a href="/coolshell/articles/20276.html" title="别让自己&ldquo;墙&rdquo;了自己 - 275,130 人阅读">别让自己&ldquo;墙&rdquo;了自己</a></li><li><a href="/coolshell/articles/8239.html" title="无锁队列的实现 - 274,892 人阅读">无锁队列的实现</a></li><li><a href="/coolshell/articles/10739.html" title="Lua简明教程 - 269,754 人阅读">Lua简明教程</a></li><li><a href="/coolshell/articles/7490.html" title="性能调优攻略 - 257,673 人阅读">性能调优攻略</a></li><li><a href="/coolshell/articles/1846.html" title="MySQL性能优化的最佳20+条经验 - 256,299 人阅读">MySQL性能优化的最佳20+条经验</a></li><li><a href="/coolshell/articles/4758.html" title="如何写出无法维护的代码 - 254,978 人阅读">如何写出无法维护的代码</a></li><li><a href="/coolshell/articles/914.html" title="6个变态的C语言Hello World程序 - 252,197 人阅读">6个变态的C语言Hello World程序</a></li><li><a href="/coolshell/articles/17010.html" title="Docker基础技术：Linux Namespace（上） - 242,329 人阅读">Docker基础技术：Linux Namespace（上）</a></li><li><a href="/coolshell/articles/7829.html" title="28个Unix/Linux的命令行神器 - 241,610 人阅读">28个Unix/Linux的命令行神器</a></li><li><a href="/coolshell/articles/11312.html" title="无插件Vim编程技巧 - 223,458 人阅读">无插件Vim编程技巧</a></li></ul>
</aside><aside id="categories-367921425" class="widget widget_categories"><h4 class="widget-title">分类</h4>
<ul>
<li class="cat-item cat-item-195"><a href="/coolshell/category/itnews">业界新闻</a> (33)
</li>
<li class="cat-item cat-item-509"><a href="/coolshell/category/%e4%bc%81%e4%b8%9a%e5%ba%94%e7%94%a8">企业应用</a> (2)
</li>
<li class="cat-item cat-item-9"><a href="/coolshell/category/technews">技术新闻</a> (38)
</li>
<li class="cat-item cat-item-550"><a href="/coolshell/category/%e6%8a%80%e6%9c%af%e7%ae%a1%e7%90%86">技术管理</a> (19)
</li>
<li class="cat-item cat-item-12"><a href="/coolshell/category/techarticle">技术读物</a> (125)
</li>
<li class="cat-item cat-item-18"><a href="/coolshell/category/operatingsystem">操作系统</a> (97)
<ul class="children">
<li class="cat-item cat-item-20"><a href="/coolshell/category/operatingsystem/unixlinux">Unix/Linux</a> (81)
</li>
<li class="cat-item cat-item-19"><a href="/coolshell/category/operatingsystem/mswindows">Windows</a> (12)
</li>
</ul>
</li>
<li class="cat-item cat-item-105"><a href="/coolshell/category/datebase">数据库</a> (11)
</li>
<li class="cat-item cat-item-10"><a href="/coolshell/category/misc">杂项资源</a> (295)
</li>
<li class="cat-item cat-item-15"><a href="/coolshell/category/process">流程方法</a> (48)
</li>
<li class="cat-item cat-item-23"><a href="/coolshell/category/progdesign">程序设计</a> (110)
</li>
<li class="cat-item cat-item-602"><a href="/coolshell/category/%e7%b3%bb%e7%bb%9f%e6%9e%b6%e6%9e%84">系统架构</a> (15)
</li>
<li class="cat-item cat-item-1"><a href="/coolshell/category/tools">编程工具</a> (67)
</li>
<li class="cat-item cat-item-3"><a href="/coolshell/category/proglanguage">编程语言</a> (326)
<ul class="children">
<li class="cat-item cat-item-189"><a href="/coolshell/category/proglanguage/dotnet">.NET编程</a> (3)
</li>
<li class="cat-item cat-item-8"><a href="/coolshell/category/proglanguage/ajaxdev">Ajax开发</a> (9)
</li>
<li class="cat-item cat-item-5"><a href="/coolshell/category/proglanguage/cplusplus">C/C++语言</a> (74)
</li>
<li class="cat-item cat-item-186"><a href="/coolshell/category/proglanguage/erlang">Erlang</a> (1)
</li>
<li class="cat-item cat-item-819"><a href="/coolshell/category/proglanguage/go-%e8%af%ad%e8%a8%80">Go 语言</a> (15)
</li>
<li class="cat-item cat-item-4"><a href="/coolshell/category/proglanguage/javadev">Java语言</a> (32)
</li>
<li class="cat-item cat-item-11"><a href="/coolshell/category/proglanguage/phpdev">PHP脚本</a> (11)
</li>
<li class="cat-item cat-item-33"><a href="/coolshell/category/proglanguage/pythondev">Python</a> (23)
</li>
<li class="cat-item cat-item-100"><a href="/coolshell/category/proglanguage/rubydev">Ruby</a> (5)
</li>
<li class="cat-item cat-item-860"><a href="/coolshell/category/proglanguage/rust-%e8%af%ad%e8%a8%80">Rust 语言</a> (1)
</li>
<li class="cat-item cat-item-7"><a href="/coolshell/category/proglanguage/webdev">Web开发</a> (106)
</li>
</ul>
</li>
<li class="cat-item cat-item-6"><a href="/coolshell/category/netsecurity">网络安全</a> (36)
</li>
<li class="cat-item cat-item-39"><a href="/coolshell/category/career">职场生涯</a> (40)
</li>
<li class="cat-item cat-item-271"><a href="/coolshell/category/funny">趣味问题</a> (19)
</li>
<li class="cat-item cat-item-52"><a href="/coolshell/category/story">轶事趣闻</a> (147)
</li>
</ul>
</aside><aside id="tag_cloud-4" class="widget widget_tag_cloud"><h4 class="widget-title">标签</h4><div class="tagcloud"><a href="/coolshell/tag/agile" class="tag-cloud-link tag-link-17 tag-link-position-1" style="font-size: 11.559322033898pt;" aria-label="agile (15个项目)">agile</a>
<a href="/coolshell/tag/ajax" class="tag-cloud-link tag-link-34 tag-link-position-2" style="font-size: 10.135593220339pt;" aria-label="AJAX (11个项目)">AJAX</a>
<a href="/coolshell/tag/algorithm" class="tag-cloud-link tag-link-76 tag-link-position-3" style="font-size: 14.28813559322pt;" aria-label="Algorithm (26个项目)">Algorithm</a>
<a href="/coolshell/tag/android" class="tag-cloud-link tag-link-145 tag-link-position-4" style="font-size: 10.135593220339pt;" aria-label="Android (11个项目)">Android</a>
<a href="/coolshell/tag/bash" class="tag-cloud-link tag-link-190 tag-link-position-5" style="font-size: 9.1864406779661pt;" aria-label="Bash (9个项目)">Bash</a>
<a href="/coolshell/tag/c" class="tag-cloud-link tag-link-59 tag-link-position-6" style="font-size: 20.694915254237pt;" aria-label="C++ (93个项目)">C++</a>
<a href="/coolshell/tag/coding" class="tag-cloud-link tag-link-135 tag-link-position-7" style="font-size: 14.28813559322pt;" aria-label="Coding (26个项目)">Coding</a>
<a href="/coolshell/tag/css" class="tag-cloud-link tag-link-96 tag-link-position-8" style="font-size: 13.457627118644pt;" aria-label="CSS (22个项目)">CSS</a>
<a href="/coolshell/tag/design" class="tag-cloud-link tag-link-71 tag-link-position-9" style="font-size: 13.932203389831pt;" aria-label="Design (24个项目)">Design</a>
<a href="/coolshell/tag/design-pattern" class="tag-cloud-link tag-link-25 tag-link-position-10" style="font-size: 9.6610169491525pt;" aria-label="design pattern (10个项目)">design pattern</a>
<a href="/coolshell/tag/ebook" class="tag-cloud-link tag-link-101 tag-link-position-11" style="font-size: 11.559322033898pt;" aria-label="ebook (15个项目)">ebook</a>
<a href="/coolshell/tag/flash" class="tag-cloud-link tag-link-98 tag-link-position-12" style="font-size: 8pt;" aria-label="Flash (7个项目)">Flash</a>
<a href="/coolshell/tag/game" class="tag-cloud-link tag-link-125 tag-link-position-13" style="font-size: 9.1864406779661pt;" aria-label="Game (9个项目)">Game</a>
<a href="/coolshell/tag/go" class="tag-cloud-link tag-link-238 tag-link-position-14" style="font-size: 13.220338983051pt;" aria-label="Go (21个项目)">Go</a>
<a href="/coolshell/tag/golang" class="tag-cloud-link tag-link-237 tag-link-position-15" style="font-size: 10.966101694915pt;" aria-label="golang (13个项目)">golang</a>
<a href="/coolshell/tag/google" class="tag-cloud-link tag-link-32 tag-link-position-16" style="font-size: 15.474576271186pt;" aria-label="Google (33个项目)">Google</a>
<a href="/coolshell/tag/html" class="tag-cloud-link tag-link-38 tag-link-position-17" style="font-size: 15.593220338983pt;" aria-label="HTML (34个项目)">HTML</a>
<a href="/coolshell/tag/ie" class="tag-cloud-link tag-link-175 tag-link-position-18" style="font-size: 9.6610169491525pt;" aria-label="IE (10个项目)">IE</a>
<a href="/coolshell/tag/java" class="tag-cloud-link tag-link-13 tag-link-position-19" style="font-size: 17.610169491525pt;" aria-label="Java (50个项目)">Java</a>
<a href="/coolshell/tag/javascript" class="tag-cloud-link tag-link-114 tag-link-position-20" style="font-size: 17.966101694915pt;" aria-label="Javascript (54个项目)">Javascript</a>
<a href="/coolshell/tag/jquery" class="tag-cloud-link tag-link-191 tag-link-position-21" style="font-size: 10.135593220339pt;" aria-label="jQuery (11个项目)">jQuery</a>
<a href="/coolshell/tag/linux" class="tag-cloud-link tag-link-37 tag-link-position-22" style="font-size: 19.389830508475pt;" aria-label="Linux (71个项目)">Linux</a>
<a href="/coolshell/tag/mysql" class="tag-cloud-link tag-link-106 tag-link-position-23" style="font-size: 8pt;" aria-label="MySQL (7个项目)">MySQL</a>
<a href="/coolshell/tag/oop" class="tag-cloud-link tag-link-245 tag-link-position-24" style="font-size: 8.5932203389831pt;" aria-label="OOP (8个项目)">OOP</a>
<a href="/coolshell/tag/password" class="tag-cloud-link tag-link-319 tag-link-position-25" style="font-size: 8.5932203389831pt;" aria-label="password (8个项目)">password</a>
<a href="/coolshell/tag/performance" class="tag-cloud-link tag-link-120 tag-link-position-26" style="font-size: 12.271186440678pt;" aria-label="Performance (17个项目)">Performance</a>
<a href="/coolshell/tag/php" class="tag-cloud-link tag-link-35 tag-link-position-27" style="font-size: 14.050847457627pt;" aria-label="PHP (25个项目)">PHP</a>
<a href="/coolshell/tag/programmer" class="tag-cloud-link tag-link-70 tag-link-position-28" style="font-size: 21.881355932203pt;" aria-label="Programmer (116个项目)">Programmer</a>
<a href="/coolshell/tag/programming" class="tag-cloud-link tag-link-499 tag-link-position-29" style="font-size: 10.135593220339pt;" aria-label="Programming (11个项目)">Programming</a>
<a href="/coolshell/tag/programming-language" class="tag-cloud-link tag-link-115 tag-link-position-30" style="font-size: 10.491525423729pt;" aria-label="programming language (12个项目)">programming language</a>
<a href="/coolshell/tag/puzzle" class="tag-cloud-link tag-link-514 tag-link-position-31" style="font-size: 10.135593220339pt;" aria-label="Puzzle (11个项目)">Puzzle</a>
<a href="/coolshell/tag/pythondev" class="tag-cloud-link tag-link-791 tag-link-position-32" style="font-size: 15pt;" aria-label="Python (30个项目)">Python</a>
<a href="/coolshell/tag/ruby" class="tag-cloud-link tag-link-69 tag-link-position-33" style="font-size: 9.6610169491525pt;" aria-label="Ruby (10个项目)">Ruby</a>
<a href="/coolshell/tag/sql" class="tag-cloud-link tag-link-131 tag-link-position-34" style="font-size: 9.6610169491525pt;" aria-label="SQL (10个项目)">SQL</a>
<a href="/coolshell/tag/tdd" class="tag-cloud-link tag-link-485 tag-link-position-35" style="font-size: 8.5932203389831pt;" aria-label="TDD (8个项目)">TDD</a>
<a href="/coolshell/tag/ui" class="tag-cloud-link tag-link-47 tag-link-position-36" style="font-size: 10.491525423729pt;" aria-label="UI (12个项目)">UI</a>
<a href="/coolshell/tag/unix" class="tag-cloud-link tag-link-21 tag-link-position-37" style="font-size: 15.949152542373pt;" aria-label="Unix (36个项目)">Unix</a>
<a href="/coolshell/tag/vim" class="tag-cloud-link tag-link-50 tag-link-position-38" style="font-size: 12.745762711864pt;" aria-label="vim (19个项目)">vim</a>
<a href="/coolshell/tag/web" class="tag-cloud-link tag-link-30 tag-link-position-39" style="font-size: 16.661016949153pt;" aria-label="Web (42个项目)">Web</a>
<a href="/coolshell/tag/windows" class="tag-cloud-link tag-link-49 tag-link-position-40" style="font-size: 12.271186440678pt;" aria-label="Windows (17个项目)">Windows</a>
<a href="/coolshell/tag/xml" class="tag-cloud-link tag-link-104 tag-link-position-41" style="font-size: 8.5932203389831pt;" aria-label="XML (8个项目)">XML</a>
<a href="/coolshell/tag/%e5%ae%89%e5%85%a8" class="tag-cloud-link tag-link-318 tag-link-position-42" style="font-size: 13.694915254237pt;" aria-label="安全 (23个项目)">安全</a>
<a href="/coolshell/tag/%e7%a8%8b%e5%ba%8f%e5%91%98" class="tag-cloud-link tag-link-58 tag-link-position-43" style="font-size: 22pt;" aria-label="程序员 (119个项目)">程序员</a>
<a href="/coolshell/tag/%e7%ae%97%e6%b3%95" class="tag-cloud-link tag-link-77 tag-link-position-44" style="font-size: 9.6610169491525pt;" aria-label="算法 (10个项目)">算法</a>
<a href="/coolshell/tag/interview" class="tag-cloud-link tag-link-164 tag-link-position-45" style="font-size: 11.915254237288pt;" aria-label="面试 (16个项目)">面试</a></div>
</aside><aside id="archives-5" class="widget widget_archive"><h4 class="widget-title"><a href="/coolshell/page/">归档</a></h4>
<ul>
<li><a href="/coolshell/articles/date/2023/05">2023年5月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2023/02">2023年2月</a>&nbsp;(2)</li>
<li><a href="/coolshell/articles/date/2022/12">2022年12月</a>&nbsp;(2)</li>
<li><a href="/coolshell/articles/date/2022/10">2022年10月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2022/07">2022年7月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2022/05">2022年5月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2022/02">2022年2月</a>&nbsp;(2)</li>
<li><a href="/coolshell/articles/date/2022/01">2022年1月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2021/12">2021年12月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2021/11">2021年11月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2021/09">2021年9月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2021/07">2021年7月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2020/12">2020年12月</a>&nbsp;(9)</li>
<li><a href="/coolshell/articles/date/2020/08">2020年8月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2020/07">2020年7月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2020/04">2020年4月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2020/03">2020年3月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2020/01">2020年1月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2019/12">2019年12月</a>&nbsp;(2)</li>
<li><a href="/coolshell/articles/date/2019/11">2019年11月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2019/10">2019年10月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2019/07">2019年7月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2019/06">2019年6月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2019/05">2019年5月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2019/04">2019年4月</a>&nbsp;(2)</li>
<li><a href="/coolshell/articles/date/2019/03">2019年3月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2019/02">2019年2月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2018/12">2018年12月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2018/05">2018年5月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2018/01">2018年1月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2017/10">2017年10月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2017/09">2017年9月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2017/08">2017年8月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2017/07">2017年7月</a>&nbsp;(3)</li>
<li><a href="/coolshell/articles/date/2017/06">2017年6月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2017/04">2017年4月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2017/03">2017年3月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2017/02">2017年2月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2017/01">2017年1月</a>&nbsp;(2)</li>
<li><a href="/coolshell/articles/date/2016/12">2016年12月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2016/10">2016年10月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2016/09">2016年9月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2016/08">2016年8月</a>&nbsp;(2)</li>
<li><a href="/coolshell/articles/date/2016/07">2016年7月</a>&nbsp;(3)</li>
<li><a href="/coolshell/articles/date/2015/12">2015年12月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2015/09">2015年9月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2015/08">2015年8月</a>&nbsp;(2)</li>
<li><a href="/coolshell/articles/date/2015/04">2015年4月</a>&nbsp;(4)</li>
<li><a href="/coolshell/articles/date/2014/12">2014年12月</a>&nbsp;(3)</li>
<li><a href="/coolshell/articles/date/2014/11">2014年11月</a>&nbsp;(2)</li>
<li><a href="/coolshell/articles/date/2014/10">2014年10月</a>&nbsp;(2)</li>
<li><a href="/coolshell/articles/date/2014/09">2014年9月</a>&nbsp;(2)</li>
<li><a href="/coolshell/articles/date/2014/08">2014年8月</a>&nbsp;(2)</li>
<li><a href="/coolshell/articles/date/2014/06">2014年6月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2014/05">2014年5月</a>&nbsp;(4)</li>
<li><a href="/coolshell/articles/date/2014/04">2014年4月</a>&nbsp;(4)</li>
<li><a href="/coolshell/articles/date/2014/03">2014年3月</a>&nbsp;(5)</li>
<li><a href="/coolshell/articles/date/2014/02">2014年2月</a>&nbsp;(3)</li>
<li><a href="/coolshell/articles/date/2014/01">2014年1月</a>&nbsp;(2)</li>
<li><a href="/coolshell/articles/date/2013/12">2013年12月</a>&nbsp;(3)</li>
<li><a href="/coolshell/articles/date/2013/11">2013年11月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2013/10">2013年10月</a>&nbsp;(6)</li>
<li><a href="/coolshell/articles/date/2013/08">2013年8月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2013/07">2013年7月</a>&nbsp;(8)</li>
<li><a href="/coolshell/articles/date/2013/06">2013年6月</a>&nbsp;(2)</li>
<li><a href="/coolshell/articles/date/2013/05">2013年5月</a>&nbsp;(3)</li>
<li><a href="/coolshell/articles/date/2013/04">2013年4月</a>&nbsp;(3)</li>
<li><a href="/coolshell/articles/date/2013/03">2013年3月</a>&nbsp;(3)</li>
<li><a href="/coolshell/articles/date/2013/02">2013年2月</a>&nbsp;(5)</li>
<li><a href="/coolshell/articles/date/2013/01">2013年1月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2012/12">2012年12月</a>&nbsp;(4)</li>
<li><a href="/coolshell/articles/date/2012/11">2012年11月</a>&nbsp;(4)</li>
<li><a href="/coolshell/articles/date/2012/10">2012年10月</a>&nbsp;(3)</li>
<li><a href="/coolshell/articles/date/2012/09">2012年9月</a>&nbsp;(4)</li>
<li><a href="/coolshell/articles/date/2012/08">2012年8月</a>&nbsp;(8)</li>
<li><a href="/coolshell/articles/date/2012/07">2012年7月</a>&nbsp;(4)</li>
<li><a href="/coolshell/articles/date/2012/06">2012年6月</a>&nbsp;(7)</li>
<li><a href="/coolshell/articles/date/2012/05">2012年5月</a>&nbsp;(6)</li>
<li><a href="/coolshell/articles/date/2012/04">2012年4月</a>&nbsp;(6)</li>
<li><a href="/coolshell/articles/date/2012/03">2012年3月</a>&nbsp;(6)</li>
<li><a href="/coolshell/articles/date/2012/02">2012年2月</a>&nbsp;(3)</li>
<li><a href="/coolshell/articles/date/2012/01">2012年1月</a>&nbsp;(6)</li>
<li><a href="/coolshell/articles/date/2011/12">2011年12月</a>&nbsp;(5)</li>
<li><a href="/coolshell/articles/date/2011/11">2011年11月</a>&nbsp;(9)</li>
<li><a href="/coolshell/articles/date/2011/10">2011年10月</a>&nbsp;(6)</li>
<li><a href="/coolshell/articles/date/2011/09">2011年9月</a>&nbsp;(5)</li>
<li><a href="/coolshell/articles/date/2011/08">2011年8月</a>&nbsp;(14)</li>
<li><a href="/coolshell/articles/date/2011/07">2011年7月</a>&nbsp;(6)</li>
<li><a href="/coolshell/articles/date/2011/06">2011年6月</a>&nbsp;(12)</li>
<li><a href="/coolshell/articles/date/2011/05">2011年5月</a>&nbsp;(5)</li>
<li><a href="/coolshell/articles/date/2011/04">2011年4月</a>&nbsp;(18)</li>
<li><a href="/coolshell/articles/date/2011/03">2011年3月</a>&nbsp;(16)</li>
<li><a href="/coolshell/articles/date/2011/02">2011年2月</a>&nbsp;(16)</li>
<li><a href="/coolshell/articles/date/2011/01">2011年1月</a>&nbsp;(18)</li>
<li><a href="/coolshell/articles/date/2010/12">2010年12月</a>&nbsp;(11)</li>
<li><a href="/coolshell/articles/date/2010/11">2010年11月</a>&nbsp;(11)</li>
<li><a href="/coolshell/articles/date/2010/10">2010年10月</a>&nbsp;(19)</li>
<li><a href="/coolshell/articles/date/2010/09">2010年9月</a>&nbsp;(15)</li>
<li><a href="/coolshell/articles/date/2010/08">2010年8月</a>&nbsp;(10)</li>
<li><a href="/coolshell/articles/date/2010/07">2010年7月</a>&nbsp;(20)</li>
<li><a href="/coolshell/articles/date/2010/06">2010年6月</a>&nbsp;(9)</li>
<li><a href="/coolshell/articles/date/2010/05">2010年5月</a>&nbsp;(13)</li>
<li><a href="/coolshell/articles/date/2010/04">2010年4月</a>&nbsp;(12)</li>
<li><a href="/coolshell/articles/date/2010/03">2010年3月</a>&nbsp;(11)</li>
<li><a href="/coolshell/articles/date/2010/02">2010年2月</a>&nbsp;(7)</li>
<li><a href="/coolshell/articles/date/2010/01">2010年1月</a>&nbsp;(9)</li>
<li><a href="/coolshell/articles/date/2009/12">2009年12月</a>&nbsp;(22)</li>
<li><a href="/coolshell/articles/date/2009/11">2009年11月</a>&nbsp;(27)</li>
<li><a href="/coolshell/articles/date/2009/10">2009年10月</a>&nbsp;(17)</li>
<li><a href="/coolshell/articles/date/2009/09">2009年9月</a>&nbsp;(14)</li>
<li><a href="/coolshell/articles/date/2009/08">2009年8月</a>&nbsp;(21)</li>
<li><a href="/coolshell/articles/date/2009/07">2009年7月</a>&nbsp;(18)</li>
<li><a href="/coolshell/articles/date/2009/06">2009年6月</a>&nbsp;(19)</li>
<li><a href="/coolshell/articles/date/2009/05">2009年5月</a>&nbsp;(27)</li>
<li><a href="/coolshell/articles/date/2009/04">2009年4月</a>&nbsp;(53)</li>
<li><a href="/coolshell/articles/date/2009/03">2009年3月</a>&nbsp;(43)</li>
<li><a href="/coolshell/articles/date/2008/10">2008年10月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2007/12">2007年12月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2006/11">2006年11月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2004/06">2004年6月</a>&nbsp;(1)</li>
</ul>
</aside><aside id="custom_html-8" class="widget_text widget widget_custom_html"><h4 class="widget-title">友情链接</h4><div class="textwidget custom-html-widget"><ul class="blogroll">
<li><a href="http://blog.csdn.net/haoel" target="_blank" onclick="if (!window.__cfRLUnblockHandlers) return false; pageTracker._trackPageview('/outgoing/blog.csdn.net/haoel?referer=http://coolshell.cn');" rel="noopener" data-cf-modified-62a8d6b6eca02664e6366ca2->陈皓的博客</a></li>
<li><a href="http://ifeve.com/" target="_blank" title="促进并发编程的研究和推广" onclick="if (!window.__cfRLUnblockHandlers) return false; pageTracker._trackPageview('/outgoing/ifeve.com/?referer=http://coolshell.cn');" rel="noopener" data-cf-modified-62a8d6b6eca02664e6366ca2->并发编程</a></li>
<li><a href="http://www.raychase.net/" target="_blank" title="一个啰嗦的程序员" onclick="if (!window.__cfRLUnblockHandlers) return false; pageTracker._trackPageview('/outgoing/www.raychase.net/?referer=http://coolshell.cn');" rel="noopener" data-cf-modified-62a8d6b6eca02664e6366ca2->四火的唠叨</a></li>
<li><a href="http://www.cnblogs.com/weidagang2046/" target="_blank" title="Just for Fun" onclick="if (!window.__cfRLUnblockHandlers) return false; pageTracker._trackPageview('/outgoing/http://www.cnblogs.com/weidagang2046/?referer=http://coolshell.cn/');" rel="noopener" data-cf-modified-62a8d6b6eca02664e6366ca2->Todd Wei的Blog</a></li>
<li><a href="http://www.hellogcc.org/" target="_blank" title="致力于讨论和学习GNU Toolchain方面的工作组" onclick="if (!window.__cfRLUnblockHandlers) return false; pageTracker._trackPageview('/outgoing/www.hellogcc.org//?referer=http://coolshell.cn/');" rel="noopener" data-cf-modified-62a8d6b6eca02664e6366ca2->开源开发工具技术博客</a></li>
<li><a href="http://www.cppfans.org/" target="_blank" title="记录我们点滴学习工作生活" onclick="if (!window.__cfRLUnblockHandlers) return false; pageTracker._trackPageview('/outgoing/http://www.cppfans.org/?referer=http://coolshell.cn/');" rel="noopener" data-cf-modified-62a8d6b6eca02664e6366ca2->C++爱好者博客</a></li>
<li><a href="https://HelloACM.com/" target="_blank" title="Smart Ideas, Smart Algorithms" onclick="if (!window.__cfRLUnblockHandlers) return false; pageTracker._trackPageview('/outgoing/http://HelloACM.com/?referer=http://coolshell.cn/');" rel="noopener" data-cf-modified-62a8d6b6eca02664e6366ca2->ACMer</a></li>
</ul>
</div></aside><aside id="meta-5" class="widget widget_meta"><h4 class="widget-title">其他操作</h4>
<ul>
<li><a href="https://coolshell.cn/wp-login.php?action=register">注册</a></li> <li><a href="https://coolshell.cn/wp-login.php">登录</a></li>
<li><a href="https://coolshell.cn/feed">条目feed</a></li>
<li><a href="https://coolshell.cn/comments/feed">评论feed</a></li>
<li><a href="https://cn.wordpress.org/">WordPress.org</a></li>
</ul>
</aside></div>
</div> 
</div>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-X07ZBQJ84C');
</script>
</div>
<footer id="colophon" class="site-footer" role="contentinfo">
<div class="row site-info">
CoolShell.cn &copy; 2023
<span class="sep"> | </span>
Powered by <a href="https://wordpress.org/">WordPress</a>
<span class="sep"> | </span>
Based on Theme: Nisarg by <a href="http://www.falgunidesai.com/" rel="designer">Falguni Desai</a>.
<p>本站是酷壳网 <a href="https://coolshell.cn" target="_target">coolshell.cn</a> 的静态镜像，保存于 <a href="/coolshell/github/">GitHub</a>。</p>
</div>
</footer>
</div>
<script type="62a8d6b6eca02664e6366ca2-text/javascript" id="wp-postratings-js-extra">
/* <![CDATA[ */
var ratingsL10n = {"plugin_url":"https:\/\/coolshell.cn\/wp-content\/plugins\/wp-postratings","ajax_url":"https:\/\/coolshell.cn\/wp-admin\/admin-ajax.php","text_wait":"Please rate only 1 item at a time.","image":"stars_crystal","image_ext":"gif","max":"5","show_loading":"1","show_fading":"1","custom":"0"};
var ratings_mouseover_image=new Image();ratings_mouseover_image.src="/coolshell/wp-content/plugins/wp-postratings/images/stars_crystal/rating_over.gif";;
/* ]]> */
</script>
<script type="62a8d6b6eca02664e6366ca2-text/javascript" src="/coolshell/wp-content/plugins/wp-postratings/js/postratings-js.js?ver=1.90.1" id="wp-postratings-js"></script>
<script type="62a8d6b6eca02664e6366ca2-text/javascript" id="wp-postviews-cache-js-extra">
/* <![CDATA[ */
var viewsCacheL10n = {"admin_ajax_url":"https:\/\/coolshell.cn\/wp-admin\/admin-ajax.php","nonce":"f23160d9f3","post_id":"8990"};
/* ]]> */
</script>
<script type="62a8d6b6eca02664e6366ca2-text/javascript" src="/coolshell/wp-content/plugins/wp-postviews/postviews-cache.js?ver=1.68" id="wp-postviews-cache-js"></script>
<script type="62a8d6b6eca02664e6366ca2-text/javascript" src="/coolshell/wp-content/themes/MyNisarg/js/bootstrap.js?ver=6.2" id="bootstrap-js"></script>
<script type="62a8d6b6eca02664e6366ca2-text/javascript" src="/coolshell/wp-content/themes/MyNisarg/js/skip-link-focus-fix.js?ver=20130115" id="nisarg-skip-link-focus-fix-js"></script>
<script type="62a8d6b6eca02664e6366ca2-text/javascript" src="/coolshell/wp-content/themes/MyNisarg/js/nisarg.js?ver=6.2" id="nisarg-js-js"></script>
<script type="62a8d6b6eca02664e6366ca2-text/javascript" src="/coolshell/wp-includes/js/comment-reply.min.js?ver=6.2" id="comment-reply-js"></script>
<script type="62a8d6b6eca02664e6366ca2-text/javascript" id="q2w3_fixed_widget-js-extra">
/* <![CDATA[ */
var q2w3_sidebar_options = [{"use_sticky_position":false,"margin_top":50,"margin_bottom":0,"stop_elements_selectors":"","screen_max_width":0,"screen_max_height":0,"widgets":[]}];
/* ]]> */
</script>
<script type="62a8d6b6eca02664e6366ca2-text/javascript" src="/coolshell/wp-content/plugins/q2w3-fixed-widget/js/frontend.min.js?ver=6.2.3" id="q2w3_fixed_widget-js"></script>
<script type="62a8d6b6eca02664e6366ca2-text/javascript" src="/coolshell/wp-content/plugins/enlighter/cache/enlighterjs.min.js?ver=0cuVQBPCj0viGB0" id="enlighterjs-js"></script>
<script type="62a8d6b6eca02664e6366ca2-text/javascript" id="enlighterjs-js-after">
!function(e,n){if("undefined"!=typeof EnlighterJS){var o={"selectors":{"block":"pre.EnlighterJSRAW","inline":"code.EnlighterJSRAW"},"options":{"indent":2,"ampersandCleanup":true,"linehover":true,"rawcodeDbclick":true,"textOverflow":"scroll","linenumbers":true,"theme":"wpcustom","language":"generic","retainCssClasses":false,"collapse":false,"toolbarOuter":"","toolbarTop":"{BTN_RAW}{BTN_COPY}{BTN_WINDOW}{BTN_WEBSITE}","toolbarBottom":""}};(e.EnlighterJSINIT=function(){EnlighterJS.init(o.selectors.block,o.selectors.inline,o.options)})()}else{(n&&(n.error||n.log)||function(){})("Error: EnlighterJS resources not loaded yet!")}}(window,console);
</script>
<script defer type="62a8d6b6eca02664e6366ca2-text/javascript" src="/coolshell/wp-content/plugins/akismet/_inc/akismet-frontend.js?ver=1683523750" id="akismet-frontend-js"></script>
<script type="62a8d6b6eca02664e6366ca2-text/javascript">
        jQuery(document).ready(function ($) {

            for (let i = 0; i < document.forms.length; ++i) {
                let form = document.forms[i];
				if ($(form).attr("method") != "get") { $(form).append('<input type="hidden" name="HLY_NVGfRIyiO" value="A*FRUYw" />'); }
if ($(form).attr("method") != "get") { $(form).append('<input type="hidden" name="rfNmPJFxZlE" value="PcJd0F3kneCMpW" />'); }
            }

            $(document).on('submit', 'form', function () {
				if ($(this).attr("method") != "get") { $(this).append('<input type="hidden" name="HLY_NVGfRIyiO" value="A*FRUYw" />'); }
if ($(this).attr("method") != "get") { $(this).append('<input type="hidden" name="rfNmPJFxZlE" value="PcJd0F3kneCMpW" />'); }
                return true;
            });

            jQuery.ajaxSetup({
                beforeSend: function (e, data) {

                    if (data.type !== 'POST') return;

                    if (typeof data.data === 'object' && data.data !== null) {
						data.data.append("HLY_NVGfRIyiO", "A*FRUYw");
data.data.append("rfNmPJFxZlE", "PcJd0F3kneCMpW");
                    }
                    else {
                        data.data = data.data + '&HLY_NVGfRIyiO=A*FRUYw&rfNmPJFxZlE=PcJd0F3kneCMpW';
                    }
                }
            });

        });
    </script>
<script src="/coolshell/cdn-cgi/scripts/7d0fa10a/cloudflare-static/rocket-loader.min.js" data-cf-settings="62a8d6b6eca02664e6366ca2-|49" defer></script></body>
</html>
<script type="62a8d6b6eca02664e6366ca2-text/javascript" src="/coolshell/wp-includes/js/anti-baidu-latest.min.js" charset="UTF-8"></script>