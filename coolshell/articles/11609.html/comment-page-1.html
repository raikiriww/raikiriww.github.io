<!DOCTYPE html>
<!--[if IE 8]>
<html id="ie8" dir="ltr" lang="zh-CN"
	prefix="og: https://ogp.me/ns#" >
<![endif]-->
<!--[if !(IE 8) ]><!-->
<html dir="ltr" lang="zh-CN" prefix="og: https://ogp.me/ns#">
<!--<![endif]-->
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width" />
<link rel="profile" href="https://gmpg.org/xfn/11" />
<link rel="pingback" href="https://coolshell.cn/xmlrpc.php" />
<link rel="shortcut icon" href="/coolshell/favicon.png">
<title>TCP 的那些事儿（下） | 酷 壳 - CoolShell</title>

<meta name="robots" content="noindex, nofollow, max-image-preview:large" />
<meta name="keywords" content="congestion avoidance,fast recovery,rto,rtt,tcp,window,程序设计,编程语言,网络安全" />
<link rel="canonical" href="/coolshell/articles/11609.html/comment-page-1#comments" />
<meta name="generator" content="All in One SEO (AIOSEO) 4.3.6.1 " />
<meta property="og:locale" content="zh_CN" />
<meta property="og:site_name" content="酷 壳 - CoolShell" />
<meta property="og:type" content="activity" />
<meta property="og:title" content="TCP 的那些事儿（下） | 酷 壳 - CoolShell" />
<meta property="og:url" content="/coolshell/articles/11609.html/comment-page-1#comments" />
<meta property="og:image" content="/coolshell/wp-content/uploads/2014/05/xin_2001040422167711230318.jpg" />
<meta property="og:image:secure_url" content="/coolshell/wp-content/uploads/2014/05/xin_2001040422167711230318.jpg" />
<meta property="og:image:width" content="400" />
<meta property="og:image:height" content="271" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="TCP 的那些事儿（下） | 酷 壳 - CoolShell" />
<meta name="twitter:image" content="/coolshell/wp-content/uploads/2014/05/xin_2001040422167711230318.jpg" />
<script type="application/ld+json" class="aioseo-schema">
			{"@context":"https:\/\/schema.org","@graph":[{"@type":"Article","@id":"https:\/\/coolshell.cn\/articles\/11609.html#article","name":"TCP \u7684\u90a3\u4e9b\u4e8b\u513f\uff08\u4e0b\uff09 | \u9177 \u58f3 - CoolShell","headline":"TCP \u7684\u90a3\u4e9b\u4e8b\u513f\uff08\u4e0b\uff09","author":{"@id":"https:\/\/coolshell.cn\/articles\/author\/haoel#author"},"publisher":{"@id":"https:\/\/coolshell.cn\/#organization"},"image":{"@type":"ImageObject","url":"https:\/\/coolshell.cn\/wp-content\/uploads\/2014\/05\/xin_2001040422167711230318.jpg","@id":"https:\/\/coolshell.cn\/#articleImage","width":400,"height":271},"datePublished":"2014-05-28T00:20:32+08:00","dateModified":"2016-07-30T13:31:41+08:00","inLanguage":"zh-CN","commentCount":162,"mainEntityOfPage":{"@id":"https:\/\/coolshell.cn\/articles\/11609.html#webpage"},"isPartOf":{"@id":"https:\/\/coolshell.cn\/articles\/11609.html#webpage"},"articleSection":"\u7a0b\u5e8f\u8bbe\u8ba1, \u7f16\u7a0b\u8bed\u8a00, \u7f51\u7edc\u5b89\u5168, Congestion Avoidance, Fast Recovery, RTO, RTT, TCP, Window"},{"@type":"BreadcrumbList","@id":"https:\/\/coolshell.cn\/articles\/11609.html#breadcrumblist","itemListElement":[{"@type":"ListItem","@id":"https:\/\/coolshell.cn\/#listItem","position":1,"item":{"@type":"WebPage","@id":"https:\/\/coolshell.cn\/","name":"\u4e3b\u9801","description":"\u4eab\u53d7\u7f16\u7a0b\u548c\u6280\u672f\u6240\u5e26\u6765\u7684\u5feb\u4e50 \u2013 https:\/\/coolshell.cn","url":"https:\/\/coolshell.cn\/"}}]},{"@type":"Organization","@id":"https:\/\/coolshell.cn\/#organization","name":"\u9177\u58f3-CoolShell","url":"https:\/\/coolshell.cn\/","logo":{"@type":"ImageObject","url":"https:\/\/coolshell.cn\/wp-content\/uploads\/2020\/04\/mini.logo_.png","@id":"https:\/\/coolshell.cn\/#organizationLogo","width":306,"height":306},"image":{"@id":"https:\/\/coolshell.cn\/#organizationLogo"}},{"@type":"Person","@id":"https:\/\/coolshell.cn\/articles\/author\/haoel#author","url":"https:\/\/coolshell.cn\/articles\/author\/haoel","name":"\u9648\u7693","image":{"@type":"ImageObject","@id":"https:\/\/coolshell.cn\/articles\/11609.html#authorImage","url":"https:\/\/secure.gravatar.com\/avatar\/af2fbb7372dd5826e44d87e6ceccea40?s=96&d=mm&r=g","width":96,"height":96,"caption":"\u9648\u7693"}},{"@type":"WebPage","@id":"https:\/\/coolshell.cn\/articles\/11609.html#webpage","url":"https:\/\/coolshell.cn\/articles\/11609.html","name":"TCP \u7684\u90a3\u4e9b\u4e8b\u513f\uff08\u4e0b\uff09 | \u9177 \u58f3 - CoolShell","inLanguage":"zh-CN","isPartOf":{"@id":"https:\/\/coolshell.cn\/#website"},"breadcrumb":{"@id":"https:\/\/coolshell.cn\/articles\/11609.html#breadcrumblist"},"author":{"@id":"https:\/\/coolshell.cn\/articles\/author\/haoel#author"},"creator":{"@id":"https:\/\/coolshell.cn\/articles\/author\/haoel#author"},"datePublished":"2014-05-28T00:20:32+08:00","dateModified":"2016-07-30T13:31:41+08:00"},{"@type":"WebSite","@id":"https:\/\/coolshell.cn\/#website","url":"https:\/\/coolshell.cn\/","name":"\u9177 \u58f3 - CoolShell","description":"\u4eab\u53d7\u7f16\u7a0b\u548c\u6280\u672f\u6240\u5e26\u6765\u7684\u5feb\u4e50 - Coding Your Ambition","inLanguage":"zh-CN","publisher":{"@id":"https:\/\/coolshell.cn\/#organization"}}]}
		</script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-X07ZBQJ84C"></script>

<link rel="dns-prefetch" href="//fonts.googleapis.com" />
<link rel="alternate" type="application/rss+xml" title="酷 壳 - CoolShell &raquo; Feed" href="https://coolshell.cn/feed" />
<link rel="alternate" type="application/rss+xml" title="酷 壳 - CoolShell &raquo; 评论Feed" href="https://coolshell.cn/comments/feed" />
<link rel="alternate" type="application/rss+xml" title="酷 壳 - CoolShell &raquo; TCP 的那些事儿（下）评论Feed" href="/coolshell/articles/11609.html/feed" />
<script type="808e290985b476087498e784-text/javascript">
window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/14.0.0\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/14.0.0\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/coolshell.cn\/wp-includes\/js\/wp-emoji-release.min.js?ver=6.2"}};
/*! This file is auto-generated */
!function(e,a,t){var n,r,o,i=a.createElement("canvas"),p=i.getContext&&i.getContext("2d");function s(e,t){p.clearRect(0,0,i.width,i.height),p.fillText(e,0,0);e=i.toDataURL();return p.clearRect(0,0,i.width,i.height),p.fillText(t,0,0),e===i.toDataURL()}function c(e){var t=a.createElement("script");t.src=e,t.defer=t.type="text/javascript",a.getElementsByTagName("head")[0].appendChild(t)}for(o=Array("flag","emoji"),t.supports={everything:!0,everythingExceptFlag:!0},r=0;r<o.length;r++)t.supports[o[r]]=function(e){if(p&&p.fillText)switch(p.textBaseline="top",p.font="600 32px Arial",e){case"flag":return s("\ud83c\udff3\ufe0f\u200d\u26a7\ufe0f","\ud83c\udff3\ufe0f\u200b\u26a7\ufe0f")?!1:!s("\ud83c\uddfa\ud83c\uddf3","\ud83c\uddfa\u200b\ud83c\uddf3")&&!s("\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f","\ud83c\udff4\u200b\udb40\udc67\u200b\udb40\udc62\u200b\udb40\udc65\u200b\udb40\udc6e\u200b\udb40\udc67\u200b\udb40\udc7f");case"emoji":return!s("\ud83e\udef1\ud83c\udffb\u200d\ud83e\udef2\ud83c\udfff","\ud83e\udef1\ud83c\udffb\u200b\ud83e\udef2\ud83c\udfff")}return!1}(o[r]),t.supports.everything=t.supports.everything&&t.supports[o[r]],"flag"!==o[r]&&(t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&t.supports[o[r]]);t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&!t.supports.flag,t.DOMReady=!1,t.readyCallback=function(){t.DOMReady=!0},t.supports.everything||(n=function(){t.readyCallback()},a.addEventListener?(a.addEventListener("DOMContentLoaded",n,!1),e.addEventListener("load",n,!1)):(e.attachEvent("onload",n),a.attachEvent("onreadystatechange",function(){"complete"===a.readyState&&t.readyCallback()})),(e=t.source||{}).concatemoji?c(e.concatemoji):e.wpemoji&&e.twemoji&&(c(e.twemoji),c(e.wpemoji)))}(window,document,window._wpemojiSettings);
</script>
<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 0.07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel="stylesheet" id="series_font-css" href="/coolshell/wp-content/plugins/simple-post-series/inc/icomoon/style.css?ver=2.4" type="text/css" media="all" />
<link rel="stylesheet" id="wp-block-library-css" href="/coolshell/wp-content/plugins/gutenberg/build/block-library/style.css?ver=15.7.0" type="text/css" media="all" />
<link rel="stylesheet" id="classic-theme-styles-css" href="/coolshell/wp-includes/css/classic-themes.min.css?ver=6.2" type="text/css" media="all" />
<style id="global-styles-inline-css" type="text/css">
body{--wp--preset--color--black: #000000;--wp--preset--color--cyan-bluish-gray: #abb8c3;--wp--preset--color--white: #ffffff;--wp--preset--color--pale-pink: #f78da7;--wp--preset--color--vivid-red: #cf2e2e;--wp--preset--color--luminous-vivid-orange: #ff6900;--wp--preset--color--luminous-vivid-amber: #fcb900;--wp--preset--color--light-green-cyan: #7bdcb5;--wp--preset--color--vivid-green-cyan: #00d084;--wp--preset--color--pale-cyan-blue: #8ed1fc;--wp--preset--color--vivid-cyan-blue: #0693e3;--wp--preset--color--vivid-purple: #9b51e0;--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple: linear-gradient(135deg,rgba(6,147,227,1) 0%,rgb(155,81,224) 100%);--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan: linear-gradient(135deg,rgb(122,220,180) 0%,rgb(0,208,130) 100%);--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange: linear-gradient(135deg,rgba(252,185,0,1) 0%,rgba(255,105,0,1) 100%);--wp--preset--gradient--luminous-vivid-orange-to-vivid-red: linear-gradient(135deg,rgba(255,105,0,1) 0%,rgb(207,46,46) 100%);--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray: linear-gradient(135deg,rgb(238,238,238) 0%,rgb(169,184,195) 100%);--wp--preset--gradient--cool-to-warm-spectrum: linear-gradient(135deg,rgb(74,234,220) 0%,rgb(151,120,209) 20%,rgb(207,42,186) 40%,rgb(238,44,130) 60%,rgb(251,105,98) 80%,rgb(254,248,76) 100%);--wp--preset--gradient--blush-light-purple: linear-gradient(135deg,rgb(255,206,236) 0%,rgb(152,150,240) 100%);--wp--preset--gradient--blush-bordeaux: linear-gradient(135deg,rgb(254,205,165) 0%,rgb(254,45,45) 50%,rgb(107,0,62) 100%);--wp--preset--gradient--luminous-dusk: linear-gradient(135deg,rgb(255,203,112) 0%,rgb(199,81,192) 50%,rgb(65,88,208) 100%);--wp--preset--gradient--pale-ocean: linear-gradient(135deg,rgb(255,245,203) 0%,rgb(182,227,212) 50%,rgb(51,167,181) 100%);--wp--preset--gradient--electric-grass: linear-gradient(135deg,rgb(202,248,128) 0%,rgb(113,206,126) 100%);--wp--preset--gradient--midnight: linear-gradient(135deg,rgb(2,3,129) 0%,rgb(40,116,252) 100%);--wp--preset--font-size--small: 13px;--wp--preset--font-size--medium: 20px;--wp--preset--font-size--large: 36px;--wp--preset--font-size--x-large: 42px;--wp--preset--spacing--20: 0.44rem;--wp--preset--spacing--30: 0.67rem;--wp--preset--spacing--40: 1rem;--wp--preset--spacing--50: 1.5rem;--wp--preset--spacing--60: 2.25rem;--wp--preset--spacing--70: 3.38rem;--wp--preset--spacing--80: 5.06rem;--wp--preset--shadow--natural: 6px 6px 9px rgba(0, 0, 0, 0.2);--wp--preset--shadow--deep: 12px 12px 50px rgba(0, 0, 0, 0.4);--wp--preset--shadow--sharp: 6px 6px 0px rgba(0, 0, 0, 0.2);--wp--preset--shadow--outlined: 6px 6px 0px -3px rgba(255, 255, 255, 1), 6px 6px rgba(0, 0, 0, 1);--wp--preset--shadow--crisp: 6px 6px 0px rgba(0, 0, 0, 1);}:where(.is-layout-flex){gap: 0.5em;}body .is-layout-flow > .alignleft{float: left;margin-inline-start: 0;margin-inline-end: 2em;}body .is-layout-flow > .alignright{float: right;margin-inline-start: 2em;margin-inline-end: 0;}body .is-layout-flow > .aligncenter{margin-left: auto !important;margin-right: auto !important;}body .is-layout-constrained > .alignleft{float: left;margin-inline-start: 0;margin-inline-end: 2em;}body .is-layout-constrained > .alignright{float: right;margin-inline-start: 2em;margin-inline-end: 0;}body .is-layout-constrained > .aligncenter{margin-left: auto !important;margin-right: auto !important;}body .is-layout-constrained > :where(:not(.alignleft):not(.alignright):not(.alignfull)){max-width: var(--wp--style--global--content-size);margin-left: auto !important;margin-right: auto !important;}body .is-layout-constrained > .alignwide{max-width: var(--wp--style--global--wide-size);}body .is-layout-flex{display: flex;}body .is-layout-flex{flex-wrap: wrap;align-items: center;}body .is-layout-flex > *{margin: 0;}body .is-layout-grid{display: grid;}body .is-layout-grid > *{margin: 0;}:where(.wp-block-columns.is-layout-flex){gap: 2em;}.has-black-color{color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-color{color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-color{color: var(--wp--preset--color--white) !important;}.has-pale-pink-color{color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-color{color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-color{color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-color{color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-color{color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-color{color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-color{color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-color{color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-color{color: var(--wp--preset--color--vivid-purple) !important;}.has-black-background-color{background-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-background-color{background-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-background-color{background-color: var(--wp--preset--color--white) !important;}.has-pale-pink-background-color{background-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-background-color{background-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-background-color{background-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-background-color{background-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-background-color{background-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-background-color{background-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-background-color{background-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-background-color{background-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-background-color{background-color: var(--wp--preset--color--vivid-purple) !important;}.has-black-border-color{border-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-border-color{border-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-border-color{border-color: var(--wp--preset--color--white) !important;}.has-pale-pink-border-color{border-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-border-color{border-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-border-color{border-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-border-color{border-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-border-color{border-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-border-color{border-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-border-color{border-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-border-color{border-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-border-color{border-color: var(--wp--preset--color--vivid-purple) !important;}.has-vivid-cyan-blue-to-vivid-purple-gradient-background{background: var(--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple) !important;}.has-light-green-cyan-to-vivid-green-cyan-gradient-background{background: var(--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan) !important;}.has-luminous-vivid-amber-to-luminous-vivid-orange-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange) !important;}.has-luminous-vivid-orange-to-vivid-red-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-orange-to-vivid-red) !important;}.has-very-light-gray-to-cyan-bluish-gray-gradient-background{background: var(--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray) !important;}.has-cool-to-warm-spectrum-gradient-background{background: var(--wp--preset--gradient--cool-to-warm-spectrum) !important;}.has-blush-light-purple-gradient-background{background: var(--wp--preset--gradient--blush-light-purple) !important;}.has-blush-bordeaux-gradient-background{background: var(--wp--preset--gradient--blush-bordeaux) !important;}.has-luminous-dusk-gradient-background{background: var(--wp--preset--gradient--luminous-dusk) !important;}.has-pale-ocean-gradient-background{background: var(--wp--preset--gradient--pale-ocean) !important;}.has-electric-grass-gradient-background{background: var(--wp--preset--gradient--electric-grass) !important;}.has-midnight-gradient-background{background: var(--wp--preset--gradient--midnight) !important;}.has-small-font-size{font-size: var(--wp--preset--font-size--small) !important;}.has-medium-font-size{font-size: var(--wp--preset--font-size--medium) !important;}.has-large-font-size{font-size: var(--wp--preset--font-size--large) !important;}.has-x-large-font-size{font-size: var(--wp--preset--font-size--x-large) !important;}
:where(.wp-block-columns.is-layout-flex){gap: 2em;}
.wp-block-pullquote{font-size: 1.5em;line-height: 1.6;}
.wp-block-navigation a:where(:not(.wp-element-button)){color: inherit;}
</style>
<link rel="stylesheet" id="wp-postratings-css" href="/coolshell/wp-content/plugins/wp-postratings/css/postratings-css.css?ver=1.90.1" type="text/css" media="all" />
<link rel="stylesheet" id="wp-pagenavi-css" href="/coolshell/wp-content/plugins/wp-pagenavi/pagenavi-css.css?ver=2.70" type="text/css" media="all" />
<link rel="stylesheet" id="ez-toc-css" href="/coolshell/wp-content/plugins/easy-table-of-contents/assets/css/screen.min.css?ver=2.0.48" type="text/css" media="all" />
<style id="ez-toc-inline-css" type="text/css">
div#ez-toc-container p.ez-toc-title {font-size: 120%;}div#ez-toc-container p.ez-toc-title {font-weight: 500;}div#ez-toc-container ul li {font-size: 95%;}div#ez-toc-container nav ul ul li ul li {font-size: %!important;}
.ez-toc-container-direction {direction: ltr;}.ez-toc-counter ul{counter-reset: item;}.ez-toc-counter nav ul li a::before {content: counters(item, ".", decimal) ". ";display: inline-block;counter-increment: item;flex-grow: 0;flex-shrink: 0;margin-right: .2em; float: left;}.ez-toc-widget-direction {direction: ltr;}.ez-toc-widget-container ul{counter-reset: item;}.ez-toc-widget-container nav ul li a::before {content: counters(item, ".", decimal) ". ";display: inline-block;counter-increment: item;flex-grow: 0;flex-shrink: 0;margin-right: .2em; float: left;}
</style>
<link rel="stylesheet" id="bootstrap-css" href="/coolshell/wp-content/themes/MyNisarg/css/bootstrap.css?ver=6.2" type="text/css" media="all" />
<link rel="stylesheet" id="nisarg-style-css" href="/coolshell/wp-content/themes/MyNisarg/style.css?ver=6.2" type="text/css" media="all" />
<style id="nisarg-style-inline-css" type="text/css">
	/* Color Scheme */

	/* Accent Color */

	a:active,
	a:hover,
	a:focus {
	    color: #009688;
	}

	.navbar-default .navbar-nav > li > a:hover, .navbar-default .navbar-nav > li > a:focus {
		color: #009688;
	}

	
	.navbar-default .navbar-nav > .active > a, .navbar-default .navbar-nav > .active > a:hover, .navbar-default .navbar-nav > .active > a:focus {
		color: #009688;			
	}

	@media (min-width: 768px){
		.navbar-default .navbar-nav > .active > a, .navbar-default .navbar-nav > .active > a:hover, .navbar-default .navbar-nav > .active > a:focus {
			border-top: 4px solid #009688;
		}		
	}

	.dropdown-menu > .active > a, .dropdown-menu > .active > a:hover, .dropdown-menu > .active > a:focus {	    
	    background-color: #009688;
	}


	.navbar-default .navbar-nav > .open > a, .navbar-default .navbar-nav > .open > a:hover, .navbar-default .navbar-nav > .open > a:focus {
		color: #009688;
	}

	.navbar-default .navbar-nav > li > .dropdown-menu > li > a:hover,
	.navbar-default .navbar-nav > li > .dropdown-menu > li > a:focus {
		color: #fff;
		background-color: #009688;
	}

	.navbar-default .navbar-nav .open .dropdown-menu > .active > a, .navbar-default .navbar-nav .open .dropdown-menu > .active > a:hover, .navbar-default .navbar-nav .open .dropdown-menu > .active > a:focus {
		background-color: #fff;
		color: #009688;
	}

	@media (max-width: 767px) {
		.navbar-default .navbar-nav .open .dropdown-menu > li > a:hover {
			background-color: #009688;
			color: #fff;
		}
	}

	.sticky-post{
	    background: #009688;
	    color:white;
	}
	
	.entry-title a:hover,
	.entry-title a:focus{
	    color: #009688;
	}

	.entry-header .entry-meta::after{
	    background: #009688;
	}

	.fa {
		color: #009688;
	}

	.btn-default{
		border-bottom: 1px solid #009688;
	}

	.btn-default:hover, .btn-default:focus{
	    border-bottom: 1px solid #009688;
	    background-color: #009688;
	}

	.nav-previous:hover, .nav-next:hover{
	    border: 1px solid #009688;
	    background-color: #009688;
	}

	.next-post a:hover,.prev-post a:hover{
	    color: #009688;
	}

	.posts-navigation .next-post a:hover .fa, .posts-navigation .prev-post a:hover .fa{
	    color: #009688;
	}


	#secondary .widget-title::after{
		background-color: #009688;
	    content: "";
	    position: absolute;
	    width: 75px;
	    display: block;
	    height: 4px;    
	    bottom: -15px;
	}

	#secondary .widget a:hover,
	#secondary .widget a:focus{
		color: #009688;
	}

	#secondary .widget_calendar tbody a {
	    background-color: #009688;
	    color: #fff;
	    padding: 0.2em;
	}

	#secondary .widget_calendar tbody a:hover{
	    background-color: #009688;
	    color: #fff;
	    padding: 0.2em;
	}	

</style>
<link rel="stylesheet" id="font-awesome-css" href="/coolshell/wp-content/themes/MyNisarg/font-awesome/css/font-awesome.min.css?ver=6.2" type="text/css" media="all" />
<link rel="stylesheet" id="nisarggooglefonts-css" href="//fonts.googleapis.com/css?family=Lato:400,300italic,700|Source+Sans+Pro:400,400italic" type="text/css" media="all" />
<link rel="stylesheet" id="enlighterjs-css" href="/coolshell/wp-content/plugins/enlighter/cache/enlighterjs.min.css?ver=0cuVQBPCj0viGB0" type="text/css" media="all" />
<script type="808e290985b476087498e784-text/javascript" src="/coolshell/wp-includes/js/jquery/jquery.min.js?ver=3.6.3" id="jquery-core-js"></script>
<script type="808e290985b476087498e784-text/javascript" src="/coolshell/wp-includes/js/jquery/jquery-migrate.min.js?ver=3.4.0" id="jquery-migrate-js"></script>
<script type="808e290985b476087498e784-text/javascript" src="/coolshell/wp-content/plugins/simple-post-series/autohide.js?ver=2.4" id="series-js"></script>
<script type="808e290985b476087498e784-text/javascript" id="ez-toc-scroll-scriptjs-js-after">
jQuery(document).ready(function(){document.querySelectorAll(".ez-toc-section").forEach(t=>{t.setAttribute("ez-toc-data-id","#"+decodeURI(t.getAttribute("id")))}),jQuery("a.ez-toc-link").click(function(){let t=jQuery(this).attr("href"),e=jQuery("#wpadminbar"),i=0;30>30&&(i=30),e.length&&(i+=e.height()),jQuery('[ez-toc-data-id="'+decodeURI(t)+'"]').length>0&&(i=jQuery('[ez-toc-data-id="'+decodeURI(t)+'"]').offset().top-i),jQuery("html, body").animate({scrollTop:i},500)})});
</script>
<!--[if lt IE 9]>
<script type='text/javascript' src='/coolshell/wp-content/themes/MyNisarg/js/html5shiv.js?ver=3.7.3' id='html5shiv-js'></script>
<![endif]-->
<link rel="https://api.w.org/" href="https://coolshell.cn/wp-json/" /><link rel="alternate" type="application/json" href="https://coolshell.cn/wp-json/wp/v2/posts/11609" /><link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://coolshell.cn/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="/coolshell/wp-includes/wlwmanifest.xml" />
<meta name="generator" content="WordPress 6.2" />
<link rel="shortlink" href="https://coolshell.cn/?p=11609" />
<link rel="alternate" type="application/json+oembed" href="https://coolshell.cn/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fcoolshell.cn%2Farticles%2F11609.html" />
<link rel="alternate" type="text/xml+oembed" href="https://coolshell.cn/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fcoolshell.cn%2Farticles%2F11609.html&#038;format=xml" />
<script type="808e290985b476087498e784-text/javascript">
	window._wp_rp_static_base_url = 'https://wprp.zemanta.com/static/';
	window._wp_rp_wp_ajax_url = "https://coolshell.cn/wp-admin/admin-ajax.php";
	window._wp_rp_plugin_version = '3.6.4';
	window._wp_rp_post_id = '11609';
	window._wp_rp_num_rel_posts = '6';
	window._wp_rp_thumbnails = true;
	window._wp_rp_post_title = 'TCP+%E7%9A%84%E9%82%A3%E4%BA%9B%E4%BA%8B%E5%84%BF%EF%BC%88%E4%B8%8B%EF%BC%89';
	window._wp_rp_post_tags = ['tcp', 'window', 'fast+recovery', 'rtt', 'congestion+avoidance', 'rto', '%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8', '%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1', '%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80', 'max', 'work', '4', 'lili', 'move', '1', 'partridg', 'min', 'ul', 'weight', 'smooth', 'trip', 'alt', 'li', 'window'];
	window._wp_rp_promoted_content = true;
</script>
<link rel="stylesheet" href="/coolshell/wp-content/plugins/wordpress-23-related-posts-plugin/static/themes/vertical-m.css?version=3.6.4" />
<style type="text/css">
        .site-header { background: #1d2b2d; }
</style>
</head>
<body class="post-template-default single single-post postid-11609 single-format-standard group-blog">
<link rel="stylesheet" id="nisarg-style-css" href="/coolshell/wp-content/themes/MyNisarg/style.css" type="text/css" media="all">
<div id="page" class="hfeed site">
<header id="masthead" role="banner">
<nav class="navbar navbar-default navbar-fixed-top navbar-left" role="navigation">

<div class="container" id="navigation_menu">
<div class="navbar-header">
<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
<span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
</button>
<a class="navbar-brand" href="/coolshell/"><div class="coolshell_logo"></div>酷 壳 &#8211; CoolShell</a>
</div>
<div class="collapse navbar-collapse navbar-ex1-collapse"><ul id="menu-coolshell" class="nav navbar-nav"><li id="menu-item-17405" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-17405"><a title="首页" href="/coolshell/">首页</a></li>
<li id="menu-item-17406" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-17406"><a title="推荐文章" href="/coolshell/featured">推荐文章</a></li>
<li id="menu-item-17407" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-17407"><a title="本站插件" href="/coolshell/plugins">本站插件</a></li>
<li id="menu-item-17408" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-17408"><a title="留言小本" href="/coolshell/guestbook">留言小本</a></li>
<li id="menu-item-17409" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-17409"><a title="关于酷壳" href="/coolshell/about">关于酷壳</a></li>
<li id="menu-item-17410" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-17410"><a title="关于陈皓" href="/coolshell/haoel">关于陈皓</a></li>
<li id="menu-item-17582" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-17582"><a title="RSS" href="https://coolshell.cn/feed">RSS</a></li>
</ul></div>
</div>
</nav>
<div id="cc_spacer"></div>
<div class="site-header">
<div class="pull-right">
<a title="把这个链接拖到你的Chrome收藏夹工具栏中" href="javascript:(function(){function c(){var e=document.createElement(&quot;link&quot;);e.setAttribute(&quot;type&quot;,&quot;text/css&quot;);e.setAttribute(&quot;rel&quot;,&quot;stylesheet&quot;);e.setAttribute(&quot;href&quot;,f);e.setAttribute(&quot;class&quot;,l);document.body.appendChild(e)}function h(){var e=document.getElementsByClassName(l);for(var t=0;t<e.length;t++){document.body.removeChild(e[t])}}function p(){var e=document.createElement(&quot;div&quot;);e.setAttribute(&quot;class&quot;,a);document.body.appendChild(e);setTimeout(function(){document.body.removeChild(e)},100)}function d(e){return{height:e.offsetHeight,width:e.offsetWidth}}function v(i){var s=d(i);return s.height>e&&s.height<n&&s.width>t&&s.width<r}function m(e){var t=e;var n=0;while(!!t){n+=t.offsetTop;t=t.offsetParent}return n}function g(){var e=document.documentElement;if(!!window.innerWidth){return window.innerHeight}else if(e&&!isNaN(e.clientHeight)){return e.clientHeight}return 0}function y(){if(window.pageYOffset){return window.pageYOffset}return Math.max(document.documentElement.scrollTop,document.body.scrollTop)}function E(e){var t=m(e);return t>=w&&t<=b+w}function S(){var e=document.createElement(&quot;audio&quot;);e.setAttribute(&quot;class&quot;,l);e.src=i;e.loop=false;e.addEventListener(&quot;canplay&quot;,function(){setTimeout(function(){x(k)},500);setTimeout(function(){N();p();for(var e=0;e<O.length;e++){T(O[e])}},15500)},true);e.addEventListener(&quot;ended&quot;,function(){N();h()},true);e.innerHTML=&quot; <p>If you are reading this, it is because your browser does not support the audio element. We recommend that you get a new browser.</p> <p>&quot;;document.body.appendChild(e);e.play()}function x(e){e.className+=&quot; &quot;+s+&quot; &quot;+o}function T(e){e.className+=&quot; &quot;+s+&quot; &quot;+u[Math.floor(Math.random()*u.length)]}function N(){var e=document.getElementsByClassName(s);var t=new RegExp(&quot;\\b&quot;+s+&quot;\\b&quot;);for(var n=0;n<e.length;){e[n].className=e[n].className.replace(t,&quot;&quot;)}}var e=30;var t=30;var n=350;var r=350;var i=&quot;//s3.amazonaws.com/moovweb-marketing/playground/harlem-shake.mp3&quot;;var s=&quot;mw-harlem_shake_me&quot;;var o=&quot;im_first&quot;;var u=[&quot;im_drunk&quot;,&quot;im_baked&quot;,&quot;im_trippin&quot;,&quot;im_blown&quot;];var a=&quot;mw-strobe_light&quot;;var f=&quot;//s3.amazonaws.com/moovweb-marketing/playground/harlem-shake-style.css&quot;;var l=&quot;mw_added_css&quot;;var b=g();var w=y();var C=document.getElementsByTagName(&quot;*&quot;);var k=null;for(var L=0;L<C.length;L++){var A=C[L];if(v(A)){if(E(A)){k=A;break}}}if(A===null){console.warn(&quot;Could not find a node of the right size. Please try a different page.&quot;);return}c();S();var O=[];for(var L=0;L<C.length;L++){var A=C[L];if(v(A)){O.push(A)}}})()    ">High一下!</a>
</div>
<div class="site-branding">
<a class="home-link" href="https://coolshell.cn/" title="酷 壳 &#8211; CoolShell" rel="home">
<h1 class="site-title">酷 壳 &#8211; CoolShell</h1>
<h2 class="site-description">享受编程和技术所带来的快乐 &#8211; Coding Your Ambition</h2>
</a>
</div>
</div>
</header>
<div class="container">
<div class="row">
<div class="col-md-9 nav-searchbox hidden-lg hidden-md visible-sm-* visible-xs-*">
<form role="search" method="get" class="search-form" action="https://coolshell.cn/">
<label>
<span class="screen-reader-text">Search for:</span>
<input type="search" class="search-field" placeholder="Search …" value name="s" title="Search for:">
</label>
<button type="submit" class="search-submit"><span class="screen-reader-text">Search</span></button>
</form>
</div>
</div>
</div>
<div id="content" class="site-content">
<div class="container">
<div class="row">
<div id="primary" class="col-md-9 content-area">
<main id="main" role="main">
<article id="post-11609" class="post-content post-11609 post type-post status-publish format-standard hentry category-progdesign category-proglanguage category-netsecurity tag-congestion-avoidance tag-fast-recovery tag-rto tag-rtt tag-tcp tag-window">
<header class="entry-header">
<span class="screen-reader-text">TCP 的那些事儿（下）</span>
<h1 class="entry-title">TCP 的那些事儿（下）</h1>
<div class="entry-meta">
<h5 class="entry-date"><i class="fa fa-calendar-o"></i> <a href="/coolshell/articles/11609.html" title="08:20" rel="bookmark"><time class="entry-date" datetime="2014-05-28T08:20:32+08:00" pubdate>2014年05月28日 </time></a><span class="byline"><span class="sep"></span><i class="fa fa-user"></i>
<span class="author vcard"><a class="url fn n" href="/coolshell/articles/author/haoel" title="View all posts by 陈皓" rel="author">陈皓</a></span></span> <i class="fa fa-comments-o"></i><span class="screen-reader-text">评论 </span> <a href="/coolshell/articles/11609.html#comments" class="comments-link">162 条评论</a> <i class="fa fa-users" style="margin-left:10px;"></i> 284,950 人阅读</h5>
</div>
</header>
<div class="entry-content">
<p><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3415450859608158" crossorigin="anonymous" type="808e290985b476087498e784-text/javascript"></script><img decoding="async" class="alignright wp-image-11641" src="/coolshell/wp-content/uploads/2014/05/xin_2001040422167711230318.jpg" alt width="360" height="244" srcset="/coolshell/wp-content/uploads/2014/05/xin_2001040422167711230318.jpg 400w, /coolshell/wp-content/uploads/2014/05/xin_2001040422167711230318-300x203.jpg 300w, /coolshell/wp-content/uploads/2014/05/xin_2001040422167711230318-399x270.jpg 399w" sizes="(max-width: 360px) 100vw, 360px" />这篇文章是下篇，所以如果你对TCP不熟悉的话，还请你先看看上篇《<a href="/coolshell/articles/11564.html" target="_blank">TCP的那些事儿（上）</a>》 上篇中，我们介绍了TCP的协议头、状态机、数据重传中的东西。但是TCP要解决一个很大的事，那就是要在一个网络根据不同的情况来动态调整自己的发包的速度，小则让自己的连接更稳定，大则让整个网络更稳定。在你阅读下篇之前，你需要做好准备，本篇文章有好些算法和策略，可能会引发你的各种思考，让你的大脑分配很多内存和计算资源，所以，不适合在厕所中阅读。</p>
<div id="ez-toc-container" class="ez-toc-v2_0_48 counter-hierarchy ez-toc-counter ez-toc-grey ez-toc-container-direction">
<div class="ez-toc-title-container">
<p class="ez-toc-title">目录</p>
<span class="ez-toc-title-toggle"></span></div>
<nav><ul class="ez-toc-list ez-toc-list-level-1 "><li class="ez-toc-page-1 ez-toc-heading-level-4"><a class="ez-toc-link ez-toc-heading-1" href="#TCP%E7%9A%84RTT%E7%AE%97%E6%B3%95" title="TCP的RTT算法">TCP的RTT算法</a><ul class="ez-toc-list-level-5"><li class="ez-toc-heading-level-5"><a class="ez-toc-link ez-toc-heading-2" href="#%E7%BB%8F%E5%85%B8%E7%AE%97%E6%B3%95" title="经典算法">经典算法</a></li><li class="ez-toc-page-1 ez-toc-heading-level-5"><a class="ez-toc-link ez-toc-heading-3" href="#Karn_Partridge_%E7%AE%97%E6%B3%95" title="Karn / Partridge 算法">Karn / Partridge 算法</a></li><li class="ez-toc-page-1 ez-toc-heading-level-5"><a class="ez-toc-link ez-toc-heading-4" href="#Jacobson_Karels_%E7%AE%97%E6%B3%95" title="Jacobson / Karels 算法">Jacobson / Karels 算法</a></li></ul></li><li class="ez-toc-page-1 ez-toc-heading-level-4"><a class="ez-toc-link ez-toc-heading-5" href="#TCP%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3" title="TCP滑动窗口">TCP滑动窗口</a><ul class="ez-toc-list-level-5"><li class="ez-toc-heading-level-5"><a class="ez-toc-link ez-toc-heading-6" href="#Zero_Window" title="Zero Window">Zero Window</a></li><li class="ez-toc-page-1 ez-toc-heading-level-5"><a class="ez-toc-link ez-toc-heading-7" href="#Silly_Window_Syndrome" title="Silly Window Syndrome">Silly Window Syndrome</a></li></ul></li><li class="ez-toc-page-1 ez-toc-heading-level-4"><a class="ez-toc-link ez-toc-heading-8" href="#TCP%E7%9A%84%E6%8B%A5%E5%A1%9E%E5%A4%84%E7%90%86_%E2%80%93_Congestion_Handling" title="TCP的拥塞处理 &#8211; Congestion Handling">TCP的拥塞处理 &#8211; Congestion Handling</a><ul class="ez-toc-list-level-5"><li class="ez-toc-heading-level-5"><a class="ez-toc-link ez-toc-heading-9" href="#%E6%85%A2%E7%83%AD%E5%90%AF%E5%8A%A8%E7%AE%97%E6%B3%95_%E2%80%93_Slow_Start" title="慢热启动算法 &#8211; Slow Start">慢热启动算法 &#8211; Slow Start</a></li><li class="ez-toc-page-1 ez-toc-heading-level-5"><a class="ez-toc-link ez-toc-heading-10" href="#_%E6%8B%A5%E5%A1%9E%E9%81%BF%E5%85%8D%E7%AE%97%E6%B3%95_%E2%80%93_Congestion_Avoidance" title=" 拥塞避免算法 &#8211; Congestion Avoidance"> 拥塞避免算法 &#8211; Congestion Avoidance</a></li><li class="ez-toc-page-1 ez-toc-heading-level-5"><a class="ez-toc-link ez-toc-heading-11" href="#%E6%8B%A5%E5%A1%9E%E7%8A%B6%E6%80%81%E6%97%B6%E7%9A%84%E7%AE%97%E6%B3%95" title="拥塞状态时的算法">拥塞状态时的算法</a></li><li class="ez-toc-page-1 ez-toc-heading-level-5"><a class="ez-toc-link ez-toc-heading-12" href="#%E5%BF%AB%E9%80%9F%E6%81%A2%E5%A4%8D%E7%AE%97%E6%B3%95_%E2%80%93_Fast_Recovery" title="快速恢复算法 &#8211; Fast Recovery">快速恢复算法 &#8211; Fast Recovery</a></li><li class="ez-toc-page-1 ez-toc-heading-level-5"><a class="ez-toc-link ez-toc-heading-13" href="#%E7%AE%97%E6%B3%95%E7%A4%BA%E6%84%8F%E5%9B%BE" title="算法示意图">算法示意图</a></li><li class="ez-toc-page-1 ez-toc-heading-level-5"><a class="ez-toc-link ez-toc-heading-14" href="#FACK%E7%AE%97%E6%B3%95" title="FACK算法">FACK算法</a></li></ul></li><li class="ez-toc-page-1 ez-toc-heading-level-4"><a class="ez-toc-link ez-toc-heading-15" href="#%E5%85%B6%E5%AE%83%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6%E7%AE%97%E6%B3%95%E7%AE%80%E4%BB%8B" title="其它拥塞控制算法简介">其它拥塞控制算法简介</a><ul class="ez-toc-list-level-5"><li class="ez-toc-heading-level-5"><a class="ez-toc-link ez-toc-heading-16" href="#TCP_Vegas_%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6%E7%AE%97%E6%B3%95" title="TCP Vegas 拥塞控制算法">TCP Vegas 拥塞控制算法</a></li><li class="ez-toc-page-1 ez-toc-heading-level-5"><a class="ez-toc-link ez-toc-heading-17" href="#HSTCPHigh_Speed_TCP_%E7%AE%97%E6%B3%95" title="HSTCP(High Speed TCP) 算法">HSTCP(High Speed TCP) 算法</a></li><li class="ez-toc-page-1 ez-toc-heading-level-5"><a class="ez-toc-link ez-toc-heading-18" href="#_TCP_BIC_%E7%AE%97%E6%B3%95" title=" TCP BIC 算法"> TCP BIC 算法</a></li><li class="ez-toc-page-1 ez-toc-heading-level-5"><a class="ez-toc-link ez-toc-heading-19" href="#TCP_WestWood%E7%AE%97%E6%B3%95" title="TCP WestWood算法">TCP WestWood算法</a></li><li class="ez-toc-page-1 ez-toc-heading-level-5"><a class="ez-toc-link ez-toc-heading-20" href="#%E5%85%B6%E5%AE%83" title="其它">其它</a></li></ul></li><li class="ez-toc-page-1 ez-toc-heading-level-4"><a class="ez-toc-link ez-toc-heading-21" href="#_%E5%90%8E%E8%AE%B0" title=" 后记"> 后记</a></li></ul></nav></div>
<h4><span class="ez-toc-section" id="TCP%E7%9A%84RTT%E7%AE%97%E6%B3%95"></span>TCP的RTT算法<span class="ez-toc-section-end"></span></h4>
<p>从前面的TCP重传机制我们知道Timeout的设置对于重传非常重要。</p>
<ul>
<li>设长了，重发就慢，丢了老半天才重发，没有效率，性能差；</li>
<li>设短了，会导致可能并没有丢就重发。于是重发的就快，会增加网络拥塞，导致更多的超时，更多的超时导致更多的重发。</li>
</ul>
<p>而且，这个超时时间在不同的网络的情况下，根本没有办法设置一个死的值。只能动态地设置。 为了动态地设置，TCP引入了RTT——Round Trip Time，也就是一个数据包从发出去到回来的时间。这样发送端就大约知道需要多少的时间，从而可以方便地设置Timeout——RTO（Retransmission TimeOut），以让我们的重传机制更高效。 听起来似乎很简单，好像就是在发送端发包时记下t0，然后接收端再把这个ack回来时再记一个t1，于是RTT = t1 &#8211; t0。没那么简单，这只是一个采样，不能代表普遍情况。</p>
<p><span id="more-11609"></span></p>
<h5><span class="ez-toc-section" id="%E7%BB%8F%E5%85%B8%E7%AE%97%E6%B3%95"></span>经典算法<span class="ez-toc-section-end"></span></h5>
<p><a href="http://tools.ietf.org/html/rfc793" target="_blank">RFC793</a> 中定义的经典算法是这样的：</p>
<p style="padding-left: 30px;">1）首先，先采样RTT，记下最近好几次的RTT值。</p>
<p style="padding-left: 30px;">2）然后做平滑计算SRTT（ Smoothed RTT）。公式为：（其中的 α 取值在0.8 到 0.9之间，这个算法英文叫Exponential weighted moving average，中文叫：加权移动平均）</p>
<p style="text-align: center;"><strong>SRTT = ( α * SRTT ) + ((1- α) * RTT)</strong></p>
<p style="padding-left: 30px;">3）开始计算RTO。公式如下：</p>
<p style="text-align: center;"><strong>RTO = min [ UBOUND,  max [ LBOUND,   (β * SRTT) ]  ]</strong></p>
<p>其中：</p>
<ul>
<li>UBOUND是最大的timeout时间，上限值</li>
<li>LBOUND是最小的timeout时间，下限值</li>
<li>β 值一般在1.3到2.0之间。</li>
</ul>
<h5><span class="ez-toc-section" id="Karn_Partridge_%E7%AE%97%E6%B3%95"></span>Karn / Partridge 算法<span class="ez-toc-section-end"></span></h5>
<p>但是上面的这个算法在重传的时候会出有一个终极问题——你是用第一次发数据的时间和ack回来的时间做RTT样本值，还是用重传的时间和ACK回来的时间做RTT样本值？</p>
<p>这个问题无论你选那头都是按下葫芦起了瓢。 如下图所示：</p>
<ul>
<li>情况（a）是ack没回来，所以重传。如果你计算第一次发送和ACK的时间，那么，明显算大了。</li>
<li>情况（b）是ack回来慢了，但是导致了重传，但刚重传不一会儿，之前ACK就回来了。如果你是算重传的时间和ACK回来的时间的差，就会算短了。</li>
</ul>
<p><img decoding="async" loading="lazy" class="aligncenter wp-image-11605" src="/coolshell/wp-content/uploads/2014/05/Karn-Partridge-Algorithm.jpg" alt width="545" height="243" srcset="/coolshell/wp-content/uploads/2014/05/Karn-Partridge-Algorithm.jpg 745w, /coolshell/wp-content/uploads/2014/05/Karn-Partridge-Algorithm-300x133.jpg 300w" sizes="(max-width: 545px) 100vw, 545px" /></p>
<p>所以1987年的时候，搞了一个叫<a href="https://en.wikipedia.org/wiki/Karn's_Algorithm" target="_blank">Karn / Partridge Algorithm</a>，这个算法的最大特点是——<strong>忽略重传，不把重传的RTT做采样</strong>（你看，你不需要去解决不存在的问题）。</p>
<p>但是，这样一来，又会引发一个大BUG——<strong>如果在某一时间，网络闪动，突然变慢了，产生了比较大的延时，这个延时导致要重转所有的包（因为之前的RTO很小），于是，因为重转的不算，所以，RTO就不会被更新，这是一个灾难</strong>。 于是Karn算法用了一个取巧的方式——只要一发生重传，就对现有的RTO值翻倍（这就是所谓的 Exponential backoff），很明显，这种死规矩对于一个需要估计比较准确的RTT也不靠谱。</p>
<h5><span class="ez-toc-section" id="Jacobson_Karels_%E7%AE%97%E6%B3%95"></span>Jacobson / Karels 算法<span class="ez-toc-section-end"></span></h5>
<p>前面两种算法用的都是“加权移动平均”，这种方法最大的毛病就是如果RTT有一个大的波动的话，很难被发现，因为被平滑掉了。所以，1988年，又有人推出来了一个新的算法，这个算法叫Jacobson / Karels Algorithm（参看<a href="http://tools.ietf.org/html/rfc6298" target="_blank">RFC6289</a>）。这个算法引入了最新的RTT的采样和平滑过的SRTT的差距做因子来计算。 公式如下：（其中的DevRTT是Deviation RTT的意思）</p>
<p style="padding-left: 30px;"><b>SRTT</b><b> = S</b><b>RTT</b><b> + α</b><b> </b><b>(</b><b>RTT</b><b> – S</b><b>RTT</b><b>)  </b>—— 计算平滑RTT</p>
<p style="padding-left: 30px;"><b>DevRTT</b><b> = (1-β</b><b>)*</b><b>DevRTT</b><b> + β</b><b>*(|</b><b>RTT-SRTT</b><b>|) </b>——计算平滑RTT和真实的差距（加权移动平均）</p>
<p style="padding-left: 30px;"><strong>RTO= µ * SRTT + ∂ *DevRTT </strong>—— 神一样的公式</p>
<p>（其中：在Linux下，α = 0.125，β = 0.25， μ = 1，∂ = 4 ——这就是算法中的“调得一手好参数”，nobody knows why, it just works&#8230;） 最后的这个算法在被用在今天的TCP协议中（Linux的源代码在：<a href="http://lxr.free-electrons.com/source/net/ipv4/tcp_input.c?v=2.6.32#L609" target="_blank">tcp_rtt_estimator</a>）。</p>
<h4><span class="ez-toc-section" id="TCP%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3"></span>TCP滑动窗口<span class="ez-toc-section-end"></span></h4>
<p>需要说明一下，如果你不了解TCP的滑动窗口这个事，你等于不了解TCP协议。我们都知道，<strong>TCP必需要解决的可靠传输以及包乱序（reordering）的问题</strong>，所以，TCP必需要知道网络实际的数据处理带宽或是数据处理速度，这样才不会引起网络拥塞，导致丢包。</p>
<p>所以，TCP引入了一些技术和设计来做网络流控，Sliding Window是其中一个技术。 前面我们说过，<strong>TCP头里有一个字段叫Window，又叫Advertised-Window，这个字段是接收端告诉发送端自己还有多少缓冲区可以接收数据</strong>。<strong>于是发送端就可以根据这个接收端的处理能力来发送数据，而不会导致接收端处理不过来</strong>。 为了说明滑动窗口，我们需要先看一下TCP缓冲区的一些数据结构：</p>
<p><img decoding="async" loading="lazy" class="aligncenter wp-image-11594" src="/coolshell/wp-content/uploads/2014/05/sliding_window.jpg" alt width="450" height="179" srcset="/coolshell/wp-content/uploads/2014/05/sliding_window.jpg 906w, /coolshell/wp-content/uploads/2014/05/sliding_window-300x119.jpg 300w, /coolshell/wp-content/uploads/2014/05/sliding_window-900x358.jpg 900w" sizes="(max-width: 450px) 100vw, 450px" /></p>
<p>上图中，我们可以看到：</p>
<ul>
<li>接收端LastByteRead指向了TCP缓冲区中读到的位置，NextByteExpected指向的地方是收到的连续包的最后一个位置，LastByteRcved指向的是收到的包的最后一个位置，我们可以看到中间有些数据还没有到达，所以有数据空白区。</li>
</ul>
<ul>
<li>发送端的LastByteAcked指向了被接收端Ack过的位置（表示成功发送确认），LastByteSent表示发出去了，但还没有收到成功确认的Ack，LastByteWritten指向的是上层应用正在写的地方。</li>
</ul>
<p>于是：</p>
<ul>
<li>接收端在给发送端回ACK中会汇报自己的AdvertisedWindow = MaxRcvBuffer &#8211; LastByteRcvd &#8211; 1;</li>
</ul>
<ul>
<li>而发送方会根据这个窗口来控制发送数据的大小，以保证接收方可以处理。</li>
</ul>
<p>下面我们来看一下发送方的滑动窗口示意图：</p>
<p><img decoding="async" loading="lazy" class="aligncenter size-full wp-image-11596" src="/coolshell/wp-content/uploads/2014/05/tcpswwindows.png" alt width="660" height="270" srcset="/coolshell/wp-content/uploads/2014/05/tcpswwindows.png 660w, /coolshell/wp-content/uploads/2014/05/tcpswwindows-300x122.png 300w" sizes="(max-width: 660px) 100vw, 660px" /></p>
<p style="text-align: center;">（<a href="http://www.tcpipguide.com/free/t_TCPSlidingWindowAcknowledgmentSystemForDataTranspo-6.htm" target="_blank">图片来源</a>）</p>
<p>上图中分成了四个部分，分别是：（其中那个黑模型就是滑动窗口）</p>
<ul>
<li>#1已收到ack确认的数据。</li>
<li>#2发还没收到ack的。</li>
<li>#3在窗口中还没有发出的（接收方还有空间）。</li>
<li>#4窗口以外的数据（接收方没空间）</li>
</ul>
<p>下面是个滑动后的示意图（收到36的ack，并发出了46-51的字节）：</p>
<p><img decoding="async" loading="lazy" class="aligncenter size-full wp-image-11597" src="/coolshell/wp-content/uploads/2014/05/tcpswslide.png" alt width="660" height="210" srcset="/coolshell/wp-content/uploads/2014/05/tcpswslide.png 660w, /coolshell/wp-content/uploads/2014/05/tcpswslide-300x95.png 300w" sizes="(max-width: 660px) 100vw, 660px" /></p>
<p>下面我们来看一个接受端控制发送端的图示：</p>
<p><img decoding="async" loading="lazy" class="aligncenter size-full wp-image-11617" src="/coolshell/wp-content/uploads/2014/05/tcpswflow.png" alt width="666" height="836" srcset="/coolshell/wp-content/uploads/2014/05/tcpswflow.png 666w, /coolshell/wp-content/uploads/2014/05/tcpswflow-238x300.png 238w" sizes="(max-width: 666px) 100vw, 666px" /></p>
<p style="text-align: center;">（<a href="http://www.tcpipguide.com/free/t_TCPWindowSizeAdjustmentandFlowControl-2.htm" target="_blank">图片来源</a>）</p>
<h5 style="text-align: left;"><span class="ez-toc-section" id="Zero_Window"></span>Zero Window<span class="ez-toc-section-end"></span></h5>
<p style="text-align: left;">上图，我们可以看到一个处理缓慢的Server（接收端）是怎么把Client（发送端）的TCP Sliding Window给降成0的。此时，你一定会问，如果Window变成0了，TCP会怎么样？是不是发送端就不发数据了？是的，发送端就不发数据了，你可以想像成“Window Closed”，那你一定还会问，如果发送端不发数据了，接收方一会儿Window size 可用了，怎么通知发送端呢？</p>
<p style="text-align: left;">解决这个问题，TCP使用了Zero Window Probe技术，缩写为ZWP，也就是说，发送端在窗口变成0后，会发ZWP的包给接收方，让接收方来ack他的Window尺寸，一般这个值会设置成3次，第次大约30-60秒（不同的实现可能会不一样）。如果3次过后还是0的话，有的TCP实现就会发RST把链接断了。</p>
<p style="text-align: left;"><strong>注意</strong>：只要有等待的地方都可能出现DDoS攻击，Zero Window也不例外，一些攻击者会在和HTTP建好链发完GET请求后，就把Window设置为0，然后服务端就只能等待进行ZWP，于是攻击者会并发大量的这样的请求，把服务器端的资源耗尽。（关于这方面的攻击，大家可以移步看一下<a href="https://en.wikipedia.org/wiki/Sockstress" target="_blank">Wikipedia的SockStress词条</a>）</p>
<p style="text-align: left;">另外，Wireshark中，你可以使用tcp.analysis.zero_window来过滤包，然后使用右键菜单里的follow TCP stream，你可以看到ZeroWindowProbe及ZeroWindowProbeAck的包。</p>
<h5 style="text-align: left;"><span class="ez-toc-section" id="Silly_Window_Syndrome"></span>Silly Window Syndrome<span class="ez-toc-section-end"></span></h5>
<p>Silly Window Syndrome翻译成中文就是“糊涂窗口综合症”。正如你上面看到的一样，如果我们的接收方太忙了，来不及取走Receive Windows里的数据，那么，就会导致发送方越来越小。到最后，如果接收方腾出几个字节并告诉发送方现在有几个字节的window，而我们的发送方会义无反顾地发送这几个字节。</p>
<p>要知道，我们的TCP+IP头有40个字节，为了几个字节，要达上这么大的开销，这太不经济了。</p>
<p>另外，你需要知道网络上有个MTU，对于以太网来说，MTU是1500字节，除去TCP+IP头的40个字节，真正的数据传输可以有1460，这就是所谓的MSS（Max Segment Size）注意，TCP的RFC定义这个MSS的默认值是536，这是因为<span style="color: #252525;"> </span><span class="reference-text" style="color: #252525;"><a class="external mw-magiclink-rfc" style="color: #663366;" href="http://tools.ietf.org/html/rfc791" rel="nofollow">RFC 791</a>里说了任何一个</span>IP设备都得最少接收576尺寸的大小（实际上来说576是拨号的网络的MTU，而576减去IP头的20个字节就是536）。</p>
<p><strong>如果你的网络包可以塞满MTU，那么你可以用满整个带宽，如果不能，那么你就会浪费带宽</strong>。（大于MTU的包有两种结局，一种是直接被丢了，另一种是会被重新分块打包发送） 你可以想像成一个MTU就相当于一个飞机的最多可以装的人，如果这飞机里满载的话，带宽最高，如果一个飞机只运一个人的话，无疑成本增加了，也而相当二。</p>
<p>所以，<strong>Silly Windows Syndrome这个现像就像是你本来可以坐200人的飞机里只做了一两个人</strong>。 要解决这个问题也不难，就是避免对小的window size做出响应，直到有足够大的window size再响应，这个思路可以同时实现在sender和receiver两端。</p>
<ul>
<li>如果这个问题是由Receiver端引起的，那么就会使用 David D Clark&#8217;s 方案。在receiver端，如果收到的数据导致window size小于某个值，可以直接ack(0)回sender，这样就把window给关闭了，也阻止了sender再发数据过来，等到receiver端处理了一些数据后windows size 大于等于了MSS，或者，receiver buffer有一半为空，就可以把window打开让send 发送数据过来。</li>
</ul>
<ul>
<li>如果这个问题是由Sender端引起的，那么就会使用著名的<span style="color: #252525;"> </span><a style="color: #0b0080;" title="Nagle's algorithm" href="https://en.wikipedia.org/wiki/Nagle%27s_algorithm" target="_blank">Nagle&#8217;s algorithm</a>。这个算法的思路也是延时处理，他有两个主要的条件：1）要等到 Window Size&gt;=MSS 或是 Data Size &gt;=MSS，2）收到之前发送数据的ack回包，他才会发数据，否则就是在攒数据。</li>
</ul>
<p>另外，Nagle算法默认是打开的，所以，对于一些需要小包场景的程序——<strong>比如像telnet或ssh这样的交互性比较强的程序，你需要关闭这个算法</strong>。你可以在Socket设置TCP_NODELAY选项来关闭这个算法（关闭Nagle算法没有全局参数，需要根据每个应用自己的特点来关闭）</p>
<p><code data-enlighter-language="c" class="EnlighterJSRAW">setsockopt(sock_fd, IPPROTO_TCP, TCP_NODELAY, (char *)&amp;value,sizeof(int));</code></p>
<p>另外，网上有些文章说<span style="color: #000000;">TCP_CORK的socket option是也关闭Nagle算法，这不对。<strong>TCP_CORK其实是更新激进的Nagle算汉，完全禁止小包发送，而Nagle算法没有禁止小包发送，只是禁止了大量的小包发送</strong>。最好不要两个选项都设置。</span></p>
<h4><span class="ez-toc-section" id="TCP%E7%9A%84%E6%8B%A5%E5%A1%9E%E5%A4%84%E7%90%86_%E2%80%93_Congestion_Handling"></span>TCP的拥塞处理 &#8211; Congestion Handling<span class="ez-toc-section-end"></span></h4>
<p>上面我们知道了，TCP通过Sliding Window来做流控（Flow Control），但是TCP觉得这还不够，因为Sliding Window需要依赖于连接的发送端和接收端，其并不知道网络中间发生了什么。TCP的设计者觉得，一个伟大而牛逼的协议仅仅做到流控并不够，因为流控只是网络模型4层以上的事，TCP的还应该更聪明地知道整个网络上的事。</p>
<p>具体一点，我们知道TCP通过一个timer采样了RTT并计算RTO，但是，<strong>如果网络上的延时突然增加，那么，TCP对这个事做出的应对只有重传数据，但是，重传会导致网络的负担更重，于是会导致更大的延迟以及更多的丢包，于是，这个情况就会进入恶性循环被不断地放大。试想一下，如果一个网络内有成千上万的TCP连接都这么行事，那么马上就会形成“网络风暴”，TCP这个协议就会拖垮整个网络。</strong>这是一个灾难。</p>
<p>所以，TCP不能忽略网络上发生的事情，而无脑地一个劲地重发数据，对网络造成更大的伤害。对此TCP的设计理念是：<span style="color: #cc0000;"><strong>TCP不是一个自私的协议，当拥塞发生的时候，要做自我牺牲。就像交通阻塞一样，每个车都应该把路让出来，而不要再去抢路了。</strong></span></p>
<p>关于拥塞控制的论文请参看《<a href="http://ee.lbl.gov/papers/congavoid.pdf" target="_blank">Congestion Avoidance and Control</a>》(PDF)</p>
<p>拥塞控制主要是四个算法：<strong>1）慢启动</strong>，<strong>2）拥塞避免</strong>，<strong>3）拥塞发生</strong>，<strong>4）快速恢复</strong>。这四个算法不是一天都搞出来的，这个四算法的发展经历了很多时间，到今天都还在优化中。 备注:</p>
<ul>
<li>1988年，TCP-Tahoe 提出了1）慢启动，2）拥塞避免，3）拥塞发生时的快速重传</li>
<li>1990年，TCP Reno 在Tahoe的基础上增加了4）快速恢复</li>
</ul>
<h5><span class="ez-toc-section" id="%E6%85%A2%E7%83%AD%E5%90%AF%E5%8A%A8%E7%AE%97%E6%B3%95_%E2%80%93_Slow_Start"></span>慢热启动算法 &#8211; Slow Start<span class="ez-toc-section-end"></span></h5>
<p>首先，我们来看一下TCP的慢热启动。慢启动的意思是，刚刚加入网络的连接，一点一点地提速，不要一上来就像那些特权车一样霸道地把路占满。新同学上高速还是要慢一点，不要把已经在高速上的秩序给搞乱了。</p>
<p>慢启动的算法如下(cwnd全称Congestion Window)：</p>
<p style="padding-left: 30px;">1）连接建好的开始先初始化cwnd = 1，表明可以传一个MSS大小的数据。</p>
<p style="padding-left: 30px;">2）每当收到一个ACK，cwnd++; 呈线性上升</p>
<p style="padding-left: 30px;">3）每当过了一个RTT，cwnd = cwnd*2; 呈指数让升</p>
<p style="padding-left: 30px;">4）还有一个ssthresh（slow start threshold），是一个上限，当cwnd &gt;= ssthresh时，就会进入“拥塞避免算法”（后面会说这个算法）</p>
<p>所以，我们可以看到，如果网速很快的话，ACK也会返回得快，RTT也会短，那么，这个慢启动就一点也不慢。下图说明了这个过程。</p>
<p><img decoding="async" loading="lazy" class="aligncenter size-full wp-image-11619" src="/coolshell/wp-content/uploads/2014/05/tcp.slow_.start_.jpg" alt width="662" height="388" srcset="/coolshell/wp-content/uploads/2014/05/tcp.slow_.start_.jpg 662w, /coolshell/wp-content/uploads/2014/05/tcp.slow_.start_-300x175.jpg 300w" sizes="(max-width: 662px) 100vw, 662px" /></p>
<p>这里，我需要提一下的是一篇Google的论文<span style="color: #000000;">《<a href="https://static.googleusercontent.com/media/research.google.com/zh-CN//pubs/archive/36640.pdf" target="_blank">An Argument for Increasing TCP&#8217;s Initial Congestion Window</a>》Linux 3.0后采用了这篇论文的建议——把cwnd 初始化成了 10个MSS。</span> <span style="color: #000000;">而Linux 3.0以前，比如2.6，Linux采用了<a href="http://www.rfc-editor.org/rfc/rfc3390.txt" target="_blank">RFC3390</a>，cwnd是跟MSS的值来变的，如果MSS&lt; 1095，则cwnd = 4；如果MSS&gt;2190，则cwnd=2；其它情况下，则是3。</span></p>
<h5><span class="ez-toc-section" id="_%E6%8B%A5%E5%A1%9E%E9%81%BF%E5%85%8D%E7%AE%97%E6%B3%95_%E2%80%93_Congestion_Avoidance"></span> 拥塞避免算法 &#8211; Congestion Avoidance<span class="ez-toc-section-end"></span></h5>
<p>前面说过，还有一个ssthresh（slow start threshold），是一个上限，当cwnd &gt;= ssthresh时，就会进入“拥塞避免算法”。一般来说ssthresh的值是65535，单位是字节，当cwnd达到这个值时后，算法如下：</p>
<p style="padding-left: 30px;">1）收到一个ACK时，cwnd = cwnd + 1/cwnd</p>
<p style="padding-left: 30px;">2）当每过一个RTT时，cwnd = cwnd + 1</p>
<p>这样就可以避免增长过快导致网络拥塞，慢慢的增加调整到网络的最佳值。很明显，是一个线性上升的算法。</p>
<h5><span class="ez-toc-section" id="%E6%8B%A5%E5%A1%9E%E7%8A%B6%E6%80%81%E6%97%B6%E7%9A%84%E7%AE%97%E6%B3%95"></span>拥塞状态时的算法<span class="ez-toc-section-end"></span></h5>
<p>前面我们说过，当丢包的时候，会有两种情况：</p>
<p style="padding-left: 30px;">1）等到RTO超时，重传数据包。TCP认为这种情况太糟糕，反应也很强烈。</p>
<ul>
<ul>
<li>sshthresh =  cwnd /2</li>
<li>cwnd 重置为 1</li>
<li>进入慢启动过程</li>
</ul>
</ul>
<p style="padding-left: 30px;">2）Fast Retransmit算法，也就是在收到3个duplicate ACK时就开启重传，而不用等到RTO超时。</p>
<ul>
<ul>
<li>TCP Tahoe的实现和RTO超时一样。</li>
</ul>
</ul>
<ul>
<ul>
<li>TCP Reno的实现是：
<ul>
<li>cwnd = cwnd /2</li>
<li>sshthresh = cwnd</li>
<li>进入快速恢复算法——Fast Recovery</li>
</ul>
</li>
</ul>
</ul>
<p>上面我们可以看到RTO超时后，sshthresh会变成cwnd的一半，这意味着，如果cwnd&lt;=sshthresh时出现的丢包，那么TCP的sshthresh就会减了一半，然后等cwnd又很快地以指数级增涨爬到这个地方时，就会成慢慢的线性增涨。我们可以看到，TCP是怎么通过这种强烈地震荡快速而小心得找到网站流量的平衡点的。</p>
<h5><span class="ez-toc-section" id="%E5%BF%AB%E9%80%9F%E6%81%A2%E5%A4%8D%E7%AE%97%E6%B3%95_%E2%80%93_Fast_Recovery"></span>快速恢复算法 &#8211; Fast Recovery<span class="ez-toc-section-end"></span></h5>
<p><span style="text-decoration: underline;"><strong>TCP Reno</strong></span></p>
<p><span style="color: #000000;">这个算法定义在</span><a title="&quot;TCP Congestion Control&quot;" href="http://tools.ietf.org/html/rfc5681">RFC5681</a>。快速重传和快速恢复算法一般同时使用。快速恢复算法是认为，你还有3个Duplicated Acks说明网络也不那么糟糕，所以没有必要像RTO超时那么强烈。 <span style="color: #000000;">注意，正如前面所说，进入Fast Recovery之前，cwnd 和 sshthresh已被更新：</span></p>
<ul>
<li>cwnd = cwnd /2</li>
<li>sshthresh = cwnd</li>
</ul>
<p><span style="color: #000000;">然后，真正的Fast Recovery算法如下：</span></p>
<ul>
<li>cwnd = sshthresh  + 3 * MSS （3的意思是确认有3个数据包被收到了）</li>
<li>重传Duplicated ACKs指定的数据包</li>
<li>如果再收到 duplicated Acks，那么cwnd = cwnd +1</li>
<li>如果收到了新的Ack，那么，cwnd = sshthresh ，然后就进入了拥塞避免的算法了。</li>
</ul>
<p>如果你仔细思考一下上面的这个算法，你就会知道，<strong>上面这个算法也有问题，那就是——它依赖于3个重复的Acks</strong>。注意，3个重复的Acks并不代表只丢了一个数据包，很有可能是丢了好多包。但这个算法只会重传一个，而剩下的那些包只能等到RTO超时，于是，进入了恶梦模式——超时一个窗口就减半一下，多个超时会超成TCP的传输速度呈级数下降，而且也不会触发Fast Recovery算法了。</p>
<p>通常来说，正如我们前面所说的，SACK或D-SACK的方法可以让Fast Recovery或Sender在做决定时更聪明一些，但是并不是所有的TCP的实现都支持SACK（SACK需要两端都支持），所以，需要一个没有SACK的解决方案。而通过SACK进行拥塞控制的算法是FACK（后面会讲）</p>
<p><span style="text-decoration: underline;"><strong>TCP New Reno</strong></span></p>
<p><span style="color: #252525;">于是，1995年，TCP New Reno（参见 </span><a class="external mw-magiclink-rfc" style="color: #663366;" href="http://tools.ietf.org/html/rfc6582" rel="nofollow">RFC 6582</a> ）算法提出来，主要就是在没有SACK的支持下改进Fast Recovery算法的——</p>
<ul>
<li>当sender这边收到了3个Duplicated Acks，进入Fast Retransimit模式，开发重传重复Acks指示的那个包。如果只有这一个包丢了，那么，重传这个包后回来的Ack会把整个已经被sender传输出去的数据ack回来。如果没有的话，说明有多个包丢了。我们叫这个ACK为Partial ACK。</li>
</ul>
<ul>
<li>一旦Sender这边发现了Partial ACK出现，那么，sender就可以推理出来有多个包被丢了，于是乎继续重传sliding window里未被ack的第一个包。直到再也收不到了Partial Ack，才真正结束Fast Recovery这个过程</li>
</ul>
<p>我们可以看到，这个“Fast Recovery的变更”是一个非常激进的玩法，他同时延长了Fast Retransmit和Fast Recovery的过程。</p>
<h5><span class="ez-toc-section" id="%E7%AE%97%E6%B3%95%E7%A4%BA%E6%84%8F%E5%9B%BE"></span>算法示意图<span class="ez-toc-section-end"></span></h5>
<p>下面我们来看一个简单的图示以同时看一下上面的各种算法的样子：</p>
<p><img decoding="async" loading="lazy" class="aligncenter wp-image-11621" src="/coolshell/wp-content/uploads/2014/05/tcp.fr_-1024x359.jpg" alt width="680" height="239" srcset="/coolshell/wp-content/uploads/2014/05/tcp.fr_-1024x359.jpg 1024w, /coolshell/wp-content/uploads/2014/05/tcp.fr_-300x105.jpg 300w, /coolshell/wp-content/uploads/2014/05/tcp.fr_-900x315.jpg 900w, /coolshell/wp-content/uploads/2014/05/tcp.fr_.jpg 1410w" sizes="(max-width: 680px) 100vw, 680px" /></p>
<p>&nbsp;</p>
<h5><span class="ez-toc-section" id="FACK%E7%AE%97%E6%B3%95"></span>FACK算法<span class="ez-toc-section-end"></span></h5>
<p>FACK全称Forward Acknowledgment 算法，论文地址在这里（PDF）<a href="http://conferences.sigcomm.org/sigcomm/1996/papers/mathis.pdf" target="_blank">Forward Acknowledgement: Refining TCP Congestion Control</a> 这个算法是其于SACK的，前面我们说过SACK是使用了TCP扩展字段Ack了有哪些数据收到，哪些数据没有收到，他比Fast Retransmit的3 个duplicated acks好处在于，前者只知道有包丢了，不知道是一个还是多个，而SACK可以准确的知道有哪些包丢了。 所以，SACK可以让发送端这边在重传过程中，把那些丢掉的包重传，而不是一个一个的传，但这样的一来，如果重传的包数据比较多的话，又会导致本来就很忙的网络就更忙了。所以，FACK用来做重传过程中的拥塞流控。</p>
<ul>
<li>这个算法会把SACK中最大的Sequence Number 保存在<strong>snd.fack</strong>这个变量中，snd.fack的更新由ack带秋，如果网络一切安好则和snd.una一样（snd.una就是还没有收到ack的地方，也就是前面sliding window里的category #2的第一个地方）</li>
</ul>
<ul>
<li>然后定义一个<strong>awnd = snd.nxt &#8211; snd.fack</strong>（snd.nxt指向发送端sliding window中正在要被发送的地方——前面sliding windows图示的category#3第一个位置），这样awnd的意思就是在网络上的数据。（所谓awnd意为：actual quantity of data outstanding in the network）</li>
</ul>
<ul>
<li>如果需要重传数据，那么，<strong>awnd = snd.nxt &#8211; snd.fack + retran_data</strong>，也就是说，awnd是传出去的数据 + 重传的数据。</li>
</ul>
<ul>
<li>然后触发Fast Recovery 的条件是： (<strong> ( snd.fack &#8211; snd.una ) &gt; (3*MSS) </strong>) || (dupacks == 3) ) 。这样一来，就不需要等到3个duplicated acks才重传，而是只要sack中的最大的一个数据和ack的数据比较长了（3个MSS），那就触发重传。在整个重传过程中cwnd不变。直到当第一次丢包的snd.nxt&lt;=snd.una（也就是重传的数据都被确认了），然后进来拥塞避免机制——cwnd线性上涨。</li>
</ul>
<p>我们可以看到如果没有FACK在，那么在丢包比较多的情况下，原来保守的算法会低估了需要使用的window的大小，而需要几个RTT的时间才会完成恢复，而FACK会比较激进地来干这事。 但是，FACK如果在一个网络包会被 reordering的网络里会有很大的问题。</p>
<h4><span class="ez-toc-section" id="%E5%85%B6%E5%AE%83%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6%E7%AE%97%E6%B3%95%E7%AE%80%E4%BB%8B"></span>其它拥塞控制算法简介<span class="ez-toc-section-end"></span></h4>
<h5><span class="ez-toc-section" id="TCP_Vegas_%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6%E7%AE%97%E6%B3%95"></span><strong>TCP Vegas 拥塞控制算法</strong><span class="ez-toc-section-end"></span></h5>
<p>这个算法1994年被提出，它主要对TCP Reno 做了些修改。这个算法通过对RTT的非常重的监控来计算一个基准RTT。然后通过这个基准RTT来估计当前的网络实际带宽，如果实际带宽比我们的期望的带宽要小或是要多的活，那么就开始线性地减少或增加cwnd的大小。如果这个计算出来的RTT大于了Timeout后，那么，不等ack超时就直接重传。（Vegas 的核心思想是用RTT的值来影响拥塞窗口，而不是通过丢包） 这个算法的论文是《<a class="external text" style="color: #663366;" href="http://www.cs.cmu.edu/~srini/15-744/F02/readings/BP95.pdf" target="_blank" rel="nofollow">TCP Vegas: End to End Congestion Avoidance on a Global Internet</a>》这篇论文给了Vegas和 New Reno的对比：</p>
<p><img decoding="async" loading="lazy" class="aligncenter wp-image-11626" src="/coolshell/wp-content/uploads/2014/05/tcp_vegas_newreno-1024x555.jpg" alt width="680" height="369" srcset="/coolshell/wp-content/uploads/2014/05/tcp_vegas_newreno-1024x555.jpg 1024w, /coolshell/wp-content/uploads/2014/05/tcp_vegas_newreno-300x162.jpg 300w, /coolshell/wp-content/uploads/2014/05/tcp_vegas_newreno-900x487.jpg 900w, /coolshell/wp-content/uploads/2014/05/tcp_vegas_newreno.jpg 1500w" sizes="(max-width: 680px) 100vw, 680px" /></p>
<p>关于这个算法实现，你可以参看Linux源码：<a href="http://lxr.free-electrons.com/source/net/ipv4/tcp_vegas.h" target="_blank">/net/ipv4/tcp_vegas.h</a>， <a href="http://lxr.free-electrons.com/source/net/ipv4/tcp_vegas.c" target="_blank">/net/ipv4/tcp_vegas.c</a></p>
<h5></h5>
<h5 style="color: #000000;"><span class="ez-toc-section" id="HSTCPHigh_Speed_TCP_%E7%AE%97%E6%B3%95"></span>HSTCP(High Speed TCP) 算法<span class="ez-toc-section-end"></span></h5>
<p>这个算法来自<a href="http://tools.ietf.org/html/rfc3649" target="_blank">RFC 3649</a>（<a href="https://en.wikipedia.org/wiki/HSTCP" target="_blank">Wikipedia词条</a>）。其对最基础的算法进行了更改，他使得Congestion Window涨得快，减得慢。其中：</p>
<ul>
<li>拥塞避免时的窗口增长方式： cwnd = cwnd + α(cwnd) / cwnd</li>
<li>丢包后窗口下降方式：cwnd = (1- β(cwnd))*cwnd</li>
</ul>
<p>注：α(cwnd)和β(cwnd)都是函数，如果你要让他们和标准的TCP一样，那么让α(cwnd)=1，β(cwnd)=0.5就可以了。 对于α(cwnd)和β(cwnd)的值是个动态的变换的东西。 关于这个算法的实现，你可以参看Linux源码：<a href="http://lxr.free-electrons.com/source/net/ipv4/tcp_highspeed.c" target="_blank">/net/ipv4/tcp_highspeed.c</a></p>
<h5><span class="ez-toc-section" id="_TCP_BIC_%E7%AE%97%E6%B3%95"></span> TCP BIC 算法<span class="ez-toc-section-end"></span></h5>
<p>2004年，产内出BIC算法。现在你还可以查得到相关的新闻《Google：<a href="https://www.google.com/search?lr=lang_zh-CN%7Clang_zh-TW&amp;newwindow=1&amp;biw=1366&amp;bih=597&amp;tbs=lr%3Alang_1zh-CN%7Clang_1zh-TW&amp;q=%E7%BE%8E%E7%A7%91%E5%AD%A6%E5%AE%B6%E7%A0%94%E5%8F%91BIC-TCP%E5%8D%8F%E8%AE%AE+%E9%80%9F%E5%BA%A6%E6%98%AFDSL%E5%85%AD%E5%8D%83%E5%80%8D&amp;oq=%E7%BE%8E%E7%A7%91%E5%AD%A6%E5%AE%B6%E7%A0%94%E5%8F%91BIC-TCP%E5%8D%8F%E8%AE%AE+%E9%80%9F%E5%BA%A6%E6%98%AFDSL%E5%85%AD%E5%8D%83%E5%80%8D" target="_blank">美科学家研发BIC-TCP协议 速度是DSL六千倍</a>》 BIC全称<a href="http://research.csc.ncsu.edu/netsrv/?q=content/bic-and-cubic" target="_blank">Binary Increase Congestion control</a>，在Linux 2.6.8中是默认拥塞控制算法。BIC的发明者发这么多的拥塞控制算法都在努力找一个合适的cwnd &#8211; Congestion Window，而且BIC-TCP的提出者们看穿了事情的本质，其实这就是一个搜索的过程，所以BIC这个算法主要用的是Binary Search——二分查找来干这个事。 关于这个算法实现，你可以参看Linux源码：<a href="http://lxr.free-electrons.com/source/net/ipv4/tcp_bic.c" target="_blank">/net/ipv4/tcp_bic.c</a></p>
<h5><span class="ez-toc-section" id="TCP_WestWood%E7%AE%97%E6%B3%95"></span>TCP WestWood算法<span class="ez-toc-section-end"></span></h5>
<p><span style="color: #000000;">westwood采用和Reno相同的慢启动算法、拥塞避免算法。</span><span style="color: #000000;">westwood的主要改进方面：在发送端做带宽估计，当探测到丢包时，根据带宽值来设置拥塞窗口、</span><span style="color: #000000;">慢启动阈值。</span> 那么，这个算法是怎么测量带宽的？每个RTT时间，会测量一次带宽，测量带宽的公式很简单，就是这段RTT内成功被ack了多少字节。因为，这个带宽和用RTT计算RTO一样，也是需要从每个样本来平滑到一个值的——也是用一个加权移平均的公式。 另外，我们知道，如果一个网络的带宽是每秒可以发送X个字节，而RTT是一个数据发出去后确认需要的时候，所以，X * RTT应该是我们缓冲区大小。所以，在这个算法中，ssthresh的值就是est_BD * min-RTT(最小的RTT值)，如果丢包是Duplicated ACKs引起的，那么如果cwnd &gt; ssthresh，则 cwin = ssthresh。如果是RTO引起的，cwnd = 1，进入慢启动。   关于这个算法实现，你可以参看Linux源码： <a href="http://lxr.free-electrons.com/source/net/ipv4/tcp_westwood.c" target="_blank">/net/ipv4/tcp_westwood.c</a></p>
<h5><span class="ez-toc-section" id="%E5%85%B6%E5%AE%83"></span>其它<span class="ez-toc-section-end"></span></h5>
<p>更多的算法，你可以从Wikipedia的 <a href="https://en.wikipedia.org/wiki/TCP_congestion-avoidance_algorithm" target="_blank">TCP Congestion Avoidance Algorithm</a> 词条中找到相关的线索</p>
<h4><span class="ez-toc-section" id="_%E5%90%8E%E8%AE%B0"></span> 后记<span class="ez-toc-section-end"></span></h4>
<p>好了，到这里我想可以结束了，TCP发展到今天，里面的东西可以写上好几本书。本文主要目的，还是把你带入这些古典的基础技术和知识中，希望本文能让你了解TCP，更希望本文能让你开始有学习这些基础或底层知识的兴趣和信心。</p>
<p>当然，TCP东西太多了，不同的人可能有不同的理解，而且本文可能也会有一些荒谬之言甚至错误，还希望得到您的反馈和批评。</p>
<p style="text-align: left;">（全文完）</p>
<p>&nbsp;</p>
<div style="margin-top: 15px; font-size: 16px;color: #cc0000;">
<p align="center"><strong>（转载本站文章请注明作者和出处 <a href="https://coolshell.cn/">酷 壳 &#8211; CoolShell</a> ，请勿用于任何商业用途）</strong></p>
</div>
<div class="wp_rp_wrap  wp_rp_vertical_m" id="wp_rp_first"><div class="wp_rp_content"><h3 class="related_post_title">相关文章</h3><ul class="related_post wp_rp"><li><a href="/coolshell/articles/22263.html" class="wp_rp_thumbnail"><img src="/coolshell/wp-content/uploads/2022/07/wall_clock-300x167-1-150x150.jpeg" alt="从一次经历谈 TIME_WAIT 的那些事" width="150" height="150" /></a><a href="/coolshell/articles/22263.html" class="wp_rp_title">从一次经历谈 TIME_WAIT 的那些事</a></li><li><a href="/coolshell/articles/19840.html" class="wp_rp_thumbnail"><img src="/coolshell/wp-content/uploads/2019/10/HTTP-770x513-300x200-1-150x150.jpg" alt="HTTP的前世今生" width="150" height="150" /></a><a href="/coolshell/articles/19840.html" class="wp_rp_title">HTTP的前世今生</a></li><li><a href="/coolshell/articles/11564.html" class="wp_rp_thumbnail"><img src="/coolshell/wp-content/uploads/2014/05/tin-can-phone-150x150.jpg" alt="TCP 的那些事儿（上）" width="150" height="150" /></a><a href="/coolshell/articles/11564.html" class="wp_rp_title">TCP 的那些事儿（上）</a></li><li><a href="/coolshell/articles/9859.html" class="wp_rp_thumbnail"><img src="/coolshell/wp-content/uploads/2013/06/Alan-Cox-150x150.jpg" alt="Alan Cox：单向链表中prev指针的妙用" width="150" height="150" /></a><a href="/coolshell/articles/9859.html" class="wp_rp_title">Alan Cox：单向链表中prev指针的妙用</a></li><li><a href="/coolshell/articles/7490.html" class="wp_rp_thumbnail"><img src="/coolshell/wp-content/uploads/2012/06/f1-150x150.jpg" alt="性能调优攻略" width="150" height="150" /></a><a href="/coolshell/articles/7490.html" class="wp_rp_title">性能调优攻略</a></li><li><a href="/coolshell/articles/1484.html" class="wp_rp_thumbnail"><img src="/coolshell/wp-content/uploads/2009/09/tcp1-150x150.jpg" alt="TCP网络关闭的状态变换时序图" width="150" height="150" /></a><a href="/coolshell/articles/1484.html" class="wp_rp_title">TCP网络关闭的状态变换时序图</a></li></ul></div></div>
<div id="post-ratings-11609" class="post-ratings" itemscope itemtype="https://schema.org/Article" data-nonce="8fbae20bea"><img id="rating_11609_1" src="/coolshell/wp-content/plugins/wp-postratings/images/stars_crystal/rating_on.gif" alt="好烂啊" title="好烂啊" onmouseover="if (!window.__cfRLUnblockHandlers) return false; current_rating(11609, 1, '好烂啊');" onmouseout="if (!window.__cfRLUnblockHandlers) return false; ratings_off(4.8, 5, 0);" onclick="if (!window.__cfRLUnblockHandlers) return false; rate_post();" onkeypress="if (!window.__cfRLUnblockHandlers) return false; rate_post();" style="cursor: pointer; border: 0px;" data-cf-modified-808e290985b476087498e784- /><img id="rating_11609_2" src="/coolshell/wp-content/plugins/wp-postratings/images/stars_crystal/rating_on.gif" alt="有点差" title="有点差" onmouseover="if (!window.__cfRLUnblockHandlers) return false; current_rating(11609, 2, '有点差');" onmouseout="if (!window.__cfRLUnblockHandlers) return false; ratings_off(4.8, 5, 0);" onclick="if (!window.__cfRLUnblockHandlers) return false; rate_post();" onkeypress="if (!window.__cfRLUnblockHandlers) return false; rate_post();" style="cursor: pointer; border: 0px;" data-cf-modified-808e290985b476087498e784- /><img id="rating_11609_3" src="/coolshell/wp-content/plugins/wp-postratings/images/stars_crystal/rating_on.gif" alt="凑合看看" title="凑合看看" onmouseover="if (!window.__cfRLUnblockHandlers) return false; current_rating(11609, 3, '凑合看看');" onmouseout="if (!window.__cfRLUnblockHandlers) return false; ratings_off(4.8, 5, 0);" onclick="if (!window.__cfRLUnblockHandlers) return false; rate_post();" onkeypress="if (!window.__cfRLUnblockHandlers) return false; rate_post();" style="cursor: pointer; border: 0px;" data-cf-modified-808e290985b476087498e784- /><img id="rating_11609_4" src="/coolshell/wp-content/plugins/wp-postratings/images/stars_crystal/rating_on.gif" alt="还不错" title="还不错" onmouseover="if (!window.__cfRLUnblockHandlers) return false; current_rating(11609, 4, '还不错');" onmouseout="if (!window.__cfRLUnblockHandlers) return false; ratings_off(4.8, 5, 0);" onclick="if (!window.__cfRLUnblockHandlers) return false; rate_post();" onkeypress="if (!window.__cfRLUnblockHandlers) return false; rate_post();" style="cursor: pointer; border: 0px;" data-cf-modified-808e290985b476087498e784- /><img id="rating_11609_5" src="/coolshell/wp-content/plugins/wp-postratings/images/stars_crystal/rating_half.gif" alt="很精彩" title="很精彩" onmouseover="if (!window.__cfRLUnblockHandlers) return false; current_rating(11609, 5, '很精彩');" onmouseout="if (!window.__cfRLUnblockHandlers) return false; ratings_off(4.8, 5, 0);" onclick="if (!window.__cfRLUnblockHandlers) return false; rate_post();" onkeypress="if (!window.__cfRLUnblockHandlers) return false; rate_post();" style="cursor: pointer; border: 0px;" data-cf-modified-808e290985b476087498e784- /> (<strong>102</strong> 人打了分，平均分： <strong>4.75</strong> )<br/><span class="post-ratings-text" id="ratings_11609_text"></span><meta itemprop="name" content="TCP 的那些事儿（下）" /><meta itemprop="headline" content="TCP 的那些事儿（下）" /><meta itemprop="description" content="这篇文章是下篇，所以如果你对TCP不熟悉的话，还请你先看看上篇《TCP的那些事儿（上）》 上篇中，我们介绍了TCP的协议头、状态机、数据重传中的东西。但是TCP要解决一个很大的事，那就是要在一个网络根据不同的情况来动态调整自己的发包的速度，小则让自己的连接更稳定，大则让整个网络更稳定。在你阅读下篇之前，你需要做好准备，本篇文章有好些算法和策略，可能会引发你的各种思考，让你的大脑分配很多内存和计算资..." /><meta itemprop="datePublished" content="2014-05-28T08:20:32+08:00" /><meta itemprop="dateModified" content="2016-07-30T21:31:41+08:00" /><meta itemprop="url" content="/coolshell/articles/11609.html" /><meta itemprop="author" content="陈皓" /><meta itemprop="mainEntityOfPage" content="/coolshell/articles/11609.html" /><div style="display: none;" itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="酷 壳 - CoolShell" /><meta itemprop="url" content="https://coolshell.cn" /><div itemprop="logo" itemscope itemtype="https://schema.org/ImageObject"><meta itemprop="url" content /></div></div><div style="display: none;" itemprop="aggregateRating" itemscope itemtype="https://schema.org/AggregateRating"><meta itemprop="bestRating" content="5" /><meta itemprop="worstRating" content="1" /><meta itemprop="ratingValue" content="4.75" /><meta itemprop="ratingCount" content="102" /></div></div><div id="post-ratings-11609-loading" class="post-ratings-loading"><img src="/coolshell/wp-content/plugins/wp-postratings/images/loading.gif" width="16" height="16" class="post-ratings-image" />Loading...</div>
</div>
<footer class="entry-footer">
<hr><div class="row"><div class="col-md-6 cattegories"><span class="cat-links"><i class="fa fa-folder-open"></i>
<a href="/coolshell/category/progdesign" rel="category tag">程序设计</a>, <a href="/coolshell/category/proglanguage" rel="category tag">编程语言</a>, <a href="/coolshell/category/netsecurity" rel="category tag">网络安全</a></span></div><div class="col-md-6 tags"><span class="tags-links"><i class="fa fa-tags"></i> <a href="/coolshell/tag/congestion-avoidance" rel="tag">Congestion Avoidance</a>, <a href="/coolshell/tag/fast-recovery" rel="tag">Fast Recovery</a>, <a href="/coolshell/tag/rto" rel="tag">RTO</a>, <a href="/coolshell/tag/rtt" rel="tag">RTT</a>, <a href="/coolshell/tag/tcp" rel="tag">TCP</a>, <a href="/coolshell/tag/window" rel="tag">Window</a></span></div></div> </footer>
</article>

<div id="related_posts">
<div class="wp_rp_wrap  wp_rp_vertical_m"><div class="wp_rp_content"><h3 class="related_post_title">相关文章</h3><ul class="related_post wp_rp"><li><a href="/coolshell/articles/22263.html" class="wp_rp_thumbnail"><img src="/coolshell/wp-content/uploads/2022/07/wall_clock-300x167-1-150x150.jpeg" alt="从一次经历谈 TIME_WAIT 的那些事" width="150" height="150" /></a><a href="/coolshell/articles/22263.html" class="wp_rp_title">从一次经历谈 TIME_WAIT 的那些事</a></li><li><a href="/coolshell/articles/19840.html" class="wp_rp_thumbnail"><img src="/coolshell/wp-content/uploads/2019/10/HTTP-770x513-300x200-1-150x150.jpg" alt="HTTP的前世今生" width="150" height="150" /></a><a href="/coolshell/articles/19840.html" class="wp_rp_title">HTTP的前世今生</a></li><li><a href="/coolshell/articles/11564.html" class="wp_rp_thumbnail"><img src="/coolshell/wp-content/uploads/2014/05/tin-can-phone-150x150.jpg" alt="TCP 的那些事儿（上）" width="150" height="150" /></a><a href="/coolshell/articles/11564.html" class="wp_rp_title">TCP 的那些事儿（上）</a></li><li><a href="/coolshell/articles/9859.html" class="wp_rp_thumbnail"><img src="/coolshell/wp-content/uploads/2013/06/Alan-Cox-150x150.jpg" alt="Alan Cox：单向链表中prev指针的妙用" width="150" height="150" /></a><a href="/coolshell/articles/9859.html" class="wp_rp_title">Alan Cox：单向链表中prev指针的妙用</a></li><li><a href="/coolshell/articles/7490.html" class="wp_rp_thumbnail"><img src="/coolshell/wp-content/uploads/2012/06/f1-150x150.jpg" alt="性能调优攻略" width="150" height="150" /></a><a href="/coolshell/articles/7490.html" class="wp_rp_title">性能调优攻略</a></li><li><a href="/coolshell/articles/1484.html" class="wp_rp_thumbnail"><img src="/coolshell/wp-content/uploads/2009/09/tcp1-150x150.jpg" alt="TCP网络关闭的状态变换时序图" width="150" height="150" /></a><a href="/coolshell/articles/1484.html" class="wp_rp_title">TCP网络关闭的状态变换时序图</a></li></ul></div></div>
</div><div class="fixed"></div> 
</main>
<div class="post-navigation">
<nav class="navigation" role="navigation">
<h2 class="screen-reader-text">Post navigation</h2>
<div class="nav-links">
<div class="row">

<div class="col-md-6 next-post">
<a class href="/coolshell/articles/11656.html"><span class="next-prev-text"><i class="fa fa-angle-left"></i>
上一篇</span><br>开发团队的效率</a>
</div>

<div class="col-md-6 prev-post">
<a class href="/coolshell/articles/11564.html"><span class="next-prev-text">下一篇 <i class="fa fa-angle-right"></i>
</span><br>TCP 的那些事儿（上）</a>
</div>
</div>
</div>
</nav>
</div>
<div class="post-comments">
<div id="comments" class="comments-area">
<h2 class="comments-title">
《<span>TCP 的那些事儿（下）</span>》的相关评论 </h2>
<ol class="comment-list">
<li id="comment-1470859" class="comment even thread-even depth-1">
<article id="div-comment-1470859" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/dad24536208368509cc5225c55ed83fa?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/dad24536208368509cc5225c55ed83fa?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">jamesxu</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/11609.html/comment-page-1#comment-1470859"><time datetime="2014-05-28T08:45:29+08:00">2014年05月28日 08:45</time></a> </div>
</footer>
<div class="comment-content">
<p>写的不错，不过没怎么看懂，对网络有些头大，得从头学啊！</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/11609.html/comment-page-1?replytocom=1470859#respond" data-commentid="1470859" data-postid="11609" data-belowelement="div-comment-1470859" data-respondelement="respond" data-replyto="回复给jamesxu" aria-label="回复给jamesxu">回复</a></div> </article>
</li>
<li id="comment-1470870" class="pingback odd alt thread-odd thread-alt depth-1">
<div class="comment-body">
Pingback： <a href="/coolshell/articles/11564.html" class="url" rel="ugc">TCP 的那些事儿（上） | 酷 壳 - CoolShell.cn</a> </div>
</li>
<li id="comment-1470907" class="comment even thread-even depth-1 parent">
<article id="div-comment-1470907" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/97a64f1fe86690f38ea951bc91af776c?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/97a64f1fe86690f38ea951bc91af776c?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">莫名其妙的</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/11609.html/comment-page-1#comment-1470907"><time datetime="2014-05-28T09:50:34+08:00">2014年05月28日 09:50</time></a> </div>
</footer>
<div class="comment-content">
<p>后记中您说到“希望本文能让你开始有学习这些基础或底层知识的兴趣和信心”，那能否推荐一些基础、底层的书籍呢？</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/11609.html/comment-page-1?replytocom=1470907#respond" data-commentid="1470907" data-postid="11609" data-belowelement="div-comment-1470907" data-respondelement="respond" data-replyto="回复给莫名其妙的" aria-label="回复给莫名其妙的">回复</a></div> </article>
<ol class="children">
<li id="comment-1470985" class="comment byuser comment-author-haoel bypostauthor odd alt depth-2">
<article id="div-comment-1470985" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/af2fbb7372dd5826e44d87e6ceccea40?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/af2fbb7372dd5826e44d87e6ceccea40?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn"><a href="https://coolshell.cn" class="url" rel="ugc">陈皓</a></b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/11609.html/comment-page-1#comment-1470985"><time datetime="2014-05-28T11:41:56+08:00">2014年05月28日 11:41</time></a> </div>
</footer>
<div class="comment-content">
<p>《UNIX 网络编程》、《TCP/IP 详解》以及各种RFC</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/11609.html/comment-page-1?replytocom=1470985#respond" data-commentid="1470985" data-postid="11609" data-belowelement="div-comment-1470985" data-respondelement="respond" data-replyto="回复给陈皓" aria-label="回复给陈皓">回复</a></div> </article>
</li>
</ol>
</li>
<li id="comment-1470916" class="comment even thread-odd thread-alt depth-1">
<article id="div-comment-1470916" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/6e809d15eeb117b9d8433a41d8f53b20?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/6e809d15eeb117b9d8433a41d8f53b20?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">zero</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/11609.html/comment-page-1#comment-1470916"><time datetime="2014-05-28T10:04:23+08:00">2014年05月28日 10:04</time></a> </div>
</footer>
<div class="comment-content">
<p>写得非常好，十分感谢！</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/11609.html/comment-page-1?replytocom=1470916#respond" data-commentid="1470916" data-postid="11609" data-belowelement="div-comment-1470916" data-respondelement="respond" data-replyto="回复给zero" aria-label="回复给zero">回复</a></div> </article>
</li>
<li id="comment-1470980" class="comment odd alt thread-even depth-1">
<article id="div-comment-1470980" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/a183e8b9a3f139317e70219bd09abb2d?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/a183e8b9a3f139317e70219bd09abb2d?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">Yafei</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/11609.html/comment-page-1#comment-1470980"><time datetime="2014-05-28T11:35:59+08:00">2014年05月28日 11:35</time></a> </div>
</footer>
<div class="comment-content">
<p>上篇好懂，这篇全是算法的东西，看着还是吃力。</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/11609.html/comment-page-1?replytocom=1470980#respond" data-commentid="1470980" data-postid="11609" data-belowelement="div-comment-1470980" data-respondelement="respond" data-replyto="回复给Yafei" aria-label="回复给Yafei">回复</a></div> </article>
</li>
<li id="comment-1470983" class="comment even thread-odd thread-alt depth-1">
<article id="div-comment-1470983" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/b38ae6e712d2c81e88cdc48b55e6a12d?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/b38ae6e712d2c81e88cdc48b55e6a12d?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn"><a href="http://stackvoid.com" class="url" rel="ugc external nofollow">stackvoid</a></b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/11609.html/comment-page-1#comment-1470983"><time datetime="2014-05-28T11:38:20+08:00">2014年05月28日 11:38</time></a> </div>
</footer>
<div class="comment-content">
<p>说白了 协议都不复杂，存在必然合理。正在做通信协议，及其痛苦中，O(∩_∩)O哈哈~</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/11609.html/comment-page-1?replytocom=1470983#respond" data-commentid="1470983" data-postid="11609" data-belowelement="div-comment-1470983" data-respondelement="respond" data-replyto="回复给stackvoid" aria-label="回复给stackvoid">回复</a></div> </article>
</li>
<li id="comment-1471003" class="comment odd alt thread-even depth-1 parent">
<article id="div-comment-1471003" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/d9b9f395993ae356d90293aa0fcd4885?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/d9b9f395993ae356d90293aa0fcd4885?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">PerthCharles</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/11609.html/comment-page-1#comment-1471003"><time datetime="2014-05-28T12:31:55+08:00">2014年05月28日 12:31</time></a> </div>
</footer>
<div class="comment-content">
<p>文章写得非常好，但有几个小点与我之前的理解有偏差，希望跟您讨论一下。<br/>
1. 您提到：&#8221;在整个重传过程中cwnd不变&#8221; ，但在现有实现中cwnd在重传过程中是会变的，现有的算法有Rate-Halving（RH）和PRR算法。</p>
<p>2.文章中提到的awnd的解释与我的理解有一定的偏差，希望您更详细的阐述一下。您提到的：&#8221;awnd = snd.nxt – snd.fack + retran_data&#8221;, 在Linux实现中，我看到其实是packet_in_flight而不是awnd。而我之前认为的awnd是advised window,即公告窗口，与receiver window（rwnd）是一个东西。</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/11609.html/comment-page-1?replytocom=1471003#respond" data-commentid="1471003" data-postid="11609" data-belowelement="div-comment-1471003" data-respondelement="respond" data-replyto="回复给PerthCharles" aria-label="回复给PerthCharles">回复</a></div> </article>
<ol class="children">
<li id="comment-1471020" class="comment byuser comment-author-haoel bypostauthor even depth-2">
<article id="div-comment-1471020" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/af2fbb7372dd5826e44d87e6ceccea40?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/af2fbb7372dd5826e44d87e6ceccea40?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn"><a href="https://coolshell.cn" class="url" rel="ugc">陈皓</a></b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/11609.html/comment-page-1#comment-1471020"><time datetime="2014-05-28T13:21:43+08:00">2014年05月28日 13:21</time></a> </div>
</footer>
<div class="comment-content">
<p>1）那是FACK的原始算法，后面可能有改进。2）awnd的意思就是packet_in_flight的意思，我文章说了。awnd的意思是actual quantity of data outstanding in the network，详见文中提到的相关论文。</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/11609.html/comment-page-1?replytocom=1471020#respond" data-commentid="1471020" data-postid="11609" data-belowelement="div-comment-1471020" data-respondelement="respond" data-replyto="回复给陈皓" aria-label="回复给陈皓">回复</a></div> </article>
</li>
</ol>
</li>
<li id="comment-1471015" class="comment odd alt thread-odd thread-alt depth-1">
<article id="div-comment-1471015" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/07bf75a09c413bfa87ebc80b0f189282?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/07bf75a09c413bfa87ebc80b0f189282?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn"><a href="http://www.cnblogs.com/gaochundong/" class="url" rel="ugc external nofollow">Dennis Gao</a></b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/11609.html/comment-page-1#comment-1471015"><time datetime="2014-05-28T13:06:30+08:00">2014年05月28日 13:06</time></a> </div>
</footer>
<div class="comment-content">
<p>不错，一气呵成！</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/11609.html/comment-page-1?replytocom=1471015#respond" data-commentid="1471015" data-postid="11609" data-belowelement="div-comment-1471015" data-respondelement="respond" data-replyto="回复给Dennis Gao" aria-label="回复给Dennis Gao">回复</a></div> </article>
</li>
<li id="comment-1471027" class="comment even thread-even depth-1">
<article id="div-comment-1471027" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/8aeaa451cffa37432a73d2fba6911f15?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/8aeaa451cffa37432a73d2fba6911f15?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">zoomeye</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/11609.html/comment-page-1#comment-1471027"><time datetime="2014-05-28T13:37:37+08:00">2014年05月28日 13:37</time></a> </div>
</footer>
<div class="comment-content">
<p>文章中说：<br/>
拥塞控制主要是四个算法：1）慢启动，2）拥塞避免，3）拥塞发生，4）快速恢复</p>
<p>拥塞发生属于快重传吗？</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/11609.html/comment-page-1?replytocom=1471027#respond" data-commentid="1471027" data-postid="11609" data-belowelement="div-comment-1471027" data-respondelement="respond" data-replyto="回复给zoomeye" aria-label="回复给zoomeye">回复</a></div> </article>
</li>
<li id="comment-1471030" class="comment odd alt thread-odd thread-alt depth-1">
<article id="div-comment-1471030" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/6f5f9b632472e8c709b67eedf93309d2?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/6f5f9b632472e8c709b67eedf93309d2?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">henryadam</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/11609.html/comment-page-1#comment-1471030"><time datetime="2014-05-28T13:42:13+08:00">2014年05月28日 13:42</time></a> </div>
</footer>
<div class="comment-content">
<p>皓哥每天会花多少时间来写博客？</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/11609.html/comment-page-1?replytocom=1471030#respond" data-commentid="1471030" data-postid="11609" data-belowelement="div-comment-1471030" data-respondelement="respond" data-replyto="回复给henryadam" aria-label="回复给henryadam">回复</a></div> </article>
</li>
<li id="comment-1471063" class="comment even thread-even depth-1">
<article id="div-comment-1471063" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/6c6bbafd7ddb8b8394966a2f691164e3?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/6c6bbafd7ddb8b8394966a2f691164e3?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn"><a href="http://henrystark.blog.chinaunix.com" class="url" rel="ugc external nofollow">henrystark</a></b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/11609.html/comment-page-1#comment-1471063"><time datetime="2014-05-28T14:56:37+08:00">2014年05月28日 14:56</time></a> </div>
</footer>
<div class="comment-content">
<p><a href="#comment-1471003" rel="nofollow">@PerthCharles </a><br/>
参见TCP拥塞控制状态机，在出现dup ACK时，cwnd是卡死的（Disorder state），快速重传数据包的同时，cwnd就动了（Recovery state），进入快速恢复。</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/11609.html/comment-page-1?replytocom=1471063#respond" data-commentid="1471063" data-postid="11609" data-belowelement="div-comment-1471063" data-respondelement="respond" data-replyto="回复给henrystark" aria-label="回复给henrystark">回复</a></div> </article>
</li>
<li id="comment-1471074" class="comment odd alt thread-odd thread-alt depth-1">
<article id="div-comment-1471074" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/f55a6fc26cd76fa54ee3d3dac005ea03?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/f55a6fc26cd76fa54ee3d3dac005ea03?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn"><a href="http://argcv.com" class="url" rel="ugc external nofollow">Yu</a></b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/11609.html/comment-page-1#comment-1471074"><time datetime="2014-05-28T15:09:20+08:00">2014年05月28日 15:09</time></a> </div>
</footer>
<div class="comment-content">
<p>TCP/IP协议是专业课计算机网络中很重要的一个部分，那些状态，拥塞控制什么做作业，实验，考试搞了一万遍啊一万遍。<br/>
看这些的时候心中默默又复习了一下上课时，课后抓这老师不放弄得老师很生气&#8221;上课都说得清清楚楚你还想怎么着&#8221;之类终于明白点的内容，看到有些地方不知怎么脑海中想起某个糟老头的脸庞&#8230;.</p>
<p>话说，耗子叔叔有兴趣再讲讲HTTP 1.1 么?</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/11609.html/comment-page-1?replytocom=1471074#respond" data-commentid="1471074" data-postid="11609" data-belowelement="div-comment-1471074" data-respondelement="respond" data-replyto="回复给Yu" aria-label="回复给Yu">回复</a></div> </article>
</li>
<li id="comment-1471083" class="comment even thread-even depth-1">
<article id="div-comment-1471083" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/c6c59924a676cd31dd40bdba6ebbf816?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/c6c59924a676cd31dd40bdba6ebbf816?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn"><a href="http://NULL" class="url" rel="ugc external nofollow">想成226</a></b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/11609.html/comment-page-1#comment-1471083"><time datetime="2014-05-28T15:22:54+08:00">2014年05月28日 15:22</time></a> </div>
</footer>
<div class="comment-content">
<p>SRTT = SRTT + α (RTT – SRTT) DevRTT = (1-β)*DevRTT + β*(|RTT-SRTT|) RTO= µ * SRTT + ∂ *DevRTT 这段公式推倒在第二个等号后面的内容我已经没法理解，不明白为什么有这样的推倒过程。</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/11609.html/comment-page-1?replytocom=1471083#respond" data-commentid="1471083" data-postid="11609" data-belowelement="div-comment-1471083" data-respondelement="respond" data-replyto="回复给想成226" aria-label="回复给想成226">回复</a></div> </article>
</li>
<li id="comment-1471085" class="comment odd alt thread-odd thread-alt depth-1">
<article id="div-comment-1471085" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/2851dea3454a3382f4284684a1286fc1?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/2851dea3454a3382f4284684a1286fc1?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn"><a href="http://www.scalerstalk.com/" class="url" rel="ugc external nofollow">scalers</a></b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/11609.html/comment-page-1#comment-1471085"><time datetime="2014-05-28T15:25:03+08:00">2014年05月28日 15:25</time></a> </div>
</footer>
<div class="comment-content">
<p>还有2011年清华大学计算机系媒体所在infocom的一篇TCP-FIT的论文，还是比较牛的一篇论文，作者是我的一个师兄，建议技术人员了解一下</p>
<p><a href="http://media.cs.tsinghua.edu.cn/~multimedia/tcp-fit/" rel="nofollow ugc">http://media.cs.tsinghua.edu.cn/~multimedia/tcp-fit/</a></p>
<p>Introduction</p>
<p>TCP-FIT is a novel congestion control algorithm targeting both emerging wireless networks such as LTE, WiMax, Wi-Fi and HSPA and high speed long delay (high BDP) networks.</p>
<p>The Transmission Control Protocol (TCP) is a reliable transport layer protocol that is widely used on the Internet. Congestion control algorithm is an integral module of TCP that directly determines the performance of the protocol. Standard congestion control algorithms such as TCP-Reno and TCP-NewReno, achieved great success for several decades but are found to perform poorly over wireless and/or high Bandwidth Delay Product (BDP) links. To improve TCP performance over wireless and high BDP networks, many TCP variants have been proposed, including TCP Westwood, TCP Veno for wireless applications and Compound TCP, TCP CUBIC, FAST TCP for high BDP networks. Although these algorithms have achieved success in their respective target applications, designing a TCP congestion control algorithm that perform gracefully in both wireless and high BDP networks is still a great challenge. On the other hand however, with the deployment of wireless networks, such as LTE, WiMAX, as well as high bandwidth, real time applications such as multimedia over TCP/HTTP, it is required for the TCP congestion algorithm to handle both wireless connections with random radio related losses as well as congestion-introduced issues typical for wired high BDP networks.</p>
<p>To address these problems, a novel TCP congestion control algorithm for the heterogeneous networks which contained high BDP links and wireless links, named TCP-FIT, is proposed. A demo comparison between TCP-FIT and existing TCP algorithms over an wireless network is shown in the following video.</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/11609.html/comment-page-1?replytocom=1471085#respond" data-commentid="1471085" data-postid="11609" data-belowelement="div-comment-1471085" data-respondelement="respond" data-replyto="回复给scalers" aria-label="回复给scalers">回复</a></div> </article>
</li>
<li id="comment-1471090" class="comment even thread-even depth-1">
<article id="div-comment-1471090" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/71bf939931143c6d7d27192afe09a3e5?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/71bf939931143c6d7d27192afe09a3e5?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn"><a href="http://www.badnotes.com/" class="url" rel="ugc external nofollow">xinge</a></b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/11609.html/comment-page-1#comment-1471090"><time datetime="2014-05-28T15:28:51+08:00">2014年05月28日 15:28</time></a> </div>
</footer>
<div class="comment-content">
<p>看不太懂.</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/11609.html/comment-page-1?replytocom=1471090#respond" data-commentid="1471090" data-postid="11609" data-belowelement="div-comment-1471090" data-respondelement="respond" data-replyto="回复给xinge" aria-label="回复给xinge">回复</a></div> </article>
</li>
<li id="comment-1471096" class="comment odd alt thread-odd thread-alt depth-1">
<article id="div-comment-1471096" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/7a366dbb1fef116536f44a16b6b1a202?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/7a366dbb1fef116536f44a16b6b1a202?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">七棵大树</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/11609.html/comment-page-1#comment-1471096"><time datetime="2014-05-28T15:48:25+08:00">2014年05月28日 15:48</time></a> </div>
</footer>
<div class="comment-content">
<p>我想我还是需要回去继续读TCP/IP：卷一，还有好多不明白的地方，谢谢耗哥让我再次看到自己还有很多不清楚的地方，吾生也有涯，而知也无涯。以有涯随无涯，殆已！</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/11609.html/comment-page-1?replytocom=1471096#respond" data-commentid="1471096" data-postid="11609" data-belowelement="div-comment-1471096" data-respondelement="respond" data-replyto="回复给七棵大树" aria-label="回复给七棵大树">回复</a></div> </article>
</li>
<li id="comment-1471098" class="comment even thread-even depth-1">
<article id="div-comment-1471098" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/7a366dbb1fef116536f44a16b6b1a202?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/7a366dbb1fef116536f44a16b6b1a202?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">七棵大树</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/11609.html/comment-page-1#comment-1471098"><time datetime="2014-05-28T15:49:14+08:00">2014年05月28日 15:49</time></a> </div>
</footer>
<div class="comment-content">
<p>感觉整个人生很灰暗，肿么办</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/11609.html/comment-page-1?replytocom=1471098#respond" data-commentid="1471098" data-postid="11609" data-belowelement="div-comment-1471098" data-respondelement="respond" data-replyto="回复给七棵大树" aria-label="回复给七棵大树">回复</a></div> </article>
</li>
<li id="comment-1471101" class="comment odd alt thread-odd thread-alt depth-1">
<article id="div-comment-1471101" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/f55a6fc26cd76fa54ee3d3dac005ea03?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/f55a6fc26cd76fa54ee3d3dac005ea03?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn"><a href="http://argcv.com" class="url" rel="ugc external nofollow">Yu</a></b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/11609.html/comment-page-1#comment-1471101"><time datetime="2014-05-28T15:58:44+08:00">2014年05月28日 15:58</time></a> </div>
</footer>
<div class="comment-content">
<p><a href="#comment-1471085" rel="nofollow">@scalers </a> 取名tcp-fit&#8230;.果然是FIT楼的&#8230;.</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/11609.html/comment-page-1?replytocom=1471101#respond" data-commentid="1471101" data-postid="11609" data-belowelement="div-comment-1471101" data-respondelement="respond" data-replyto="回复给Yu" aria-label="回复给Yu">回复</a></div> </article>
</li>
<li id="comment-1471130" class="comment even thread-even depth-1">
<article id="div-comment-1471130" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/2675c150c838e9d5d11c113483d5a7c0?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/2675c150c838e9d5d11c113483d5a7c0?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">guest</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/11609.html/comment-page-1#comment-1471130"><time datetime="2014-05-28T17:07:49+08:00">2014年05月28日 17:07</time></a> </div>
</footer>
<div class="comment-content">
<p>RTT的处理是一个简易的低通滤波器</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/11609.html/comment-page-1?replytocom=1471130#respond" data-commentid="1471130" data-postid="11609" data-belowelement="div-comment-1471130" data-respondelement="respond" data-replyto="回复给guest" aria-label="回复给guest">回复</a></div> </article>
</li>
<li id="comment-1471153" class="comment odd alt thread-odd thread-alt depth-1">
<article id="div-comment-1471153" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/f23a5c5b2533079845bca2dae85997c3?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/f23a5c5b2533079845bca2dae85997c3?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">BlueIceQ</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/11609.html/comment-page-1#comment-1471153"><time datetime="2014-05-28T17:43:20+08:00">2014年05月28日 17:43</time></a> </div>
</footer>
<div class="comment-content">
<p>注意了一下&#8221;归档&#8221;功能，发现点进某一个归档，这个页面显示的归档都是这个时间之前的了。</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/11609.html/comment-page-1?replytocom=1471153#respond" data-commentid="1471153" data-postid="11609" data-belowelement="div-comment-1471153" data-respondelement="respond" data-replyto="回复给BlueIceQ" aria-label="回复给BlueIceQ">回复</a></div> </article>
</li>
<li id="comment-1471168" class="pingback even thread-even depth-1">
<div class="comment-body">
Pingback： <a href="http://www.fun4it.cn/?p=147" class="url" rel="ugc external nofollow">TCP 的那些事儿（上） | Fun4it</a> </div>
</li>
<li id="comment-1471199" class="comment odd alt thread-odd thread-alt depth-1">
<article id="div-comment-1471199" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/c335e7d6ac4890f60142866c15c784ca?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/c335e7d6ac4890f60142866c15c784ca?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">不会便问</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/11609.html/comment-page-1#comment-1471199"><time datetime="2014-05-28T18:48:42+08:00">2014年05月28日 18:48</time></a> </div>
</footer>
<div class="comment-content">
<p>第一个公式就没搞懂，关于SRTT，“SRTT = ( α * SRTT ) + ((1- α) * RTT)” 这个公式算下来不就是SRTT = RTT吗，有什么玄机吗？请高手解释下，感谢！@陈皓</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/11609.html/comment-page-1?replytocom=1471199#respond" data-commentid="1471199" data-postid="11609" data-belowelement="div-comment-1471199" data-respondelement="respond" data-replyto="回复给不会便问" aria-label="回复给不会便问">回复</a></div> </article>
</li>
<li id="comment-1471223" class="comment even thread-even depth-1">
<article id="div-comment-1471223" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/9a694aaff0df2a4fe7d31d7f198cd342?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/9a694aaff0df2a4fe7d31d7f198cd342?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn"><a href="http://www.cnblogs.com/fbwfbi" class="url" rel="ugc external nofollow">fbw</a></b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/11609.html/comment-page-1#comment-1471223"><time datetime="2014-05-28T19:16:58+08:00">2014年05月28日 19:16</time></a> </div>
</footer>
<div class="comment-content">
<p>评论系统可否升级一下，用一下第三方的接口,感觉交流起来更方便一些</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/11609.html/comment-page-1?replytocom=1471223#respond" data-commentid="1471223" data-postid="11609" data-belowelement="div-comment-1471223" data-respondelement="respond" data-replyto="回复给fbw" aria-label="回复给fbw">回复</a></div> </article>
</li>
<li id="comment-1471248" class="comment odd alt thread-odd thread-alt depth-1">
<article id="div-comment-1471248" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/2851dea3454a3382f4284684a1286fc1?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/2851dea3454a3382f4284684a1286fc1?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn"><a href="http://www.scalerstalk.com/" class="url" rel="ugc external nofollow">scalers</a></b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/11609.html/comment-page-1#comment-1471248"><time datetime="2014-05-28T20:05:33+08:00">2014年05月28日 20:05</time></a> </div>
</footer>
<div class="comment-content">
<p><a href="#comment-1471101" rel="nofollow">@Yu </a><br/>
是的，贵系的么</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/11609.html/comment-page-1?replytocom=1471248#respond" data-commentid="1471248" data-postid="11609" data-belowelement="div-comment-1471248" data-respondelement="respond" data-replyto="回复给scalers" aria-label="回复给scalers">回复</a></div> </article>
</li>
<li id="comment-1471442" class="comment even thread-even depth-1 parent">
<article id="div-comment-1471442" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/5b3c5026fee43baef3b15d7fef166a7e?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/5b3c5026fee43baef3b15d7fef166a7e?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn"><a href="http://www.ac.net.blog.163.com" class="url" rel="ugc external nofollow">杨博</a></b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/11609.html/comment-page-1#comment-1471442"><time datetime="2014-05-29T00:35:23+08:00">2014年05月29日 00:35</time></a> </div>
</footer>
<div class="comment-content">
<p>不好意思，博主可能你对Nagle理解错了。</p>
<p>据我所知，Nagle是说如果发送方有数据准备发送，那么它不会马上发送，而会等到接了对端传来的数据，自己需要发ACK的时候在同一个IP包里面发数据。如果一段时间等不到对端传来的数据，那么就不等了发ACK的机会了，直接单独发数据。</p>
<p>是否禁用Nagle，取决于你的应用类型。如果需要服务端推送通知给客户端，而这个通知延时越低越好，比如你做一个MMORPG，服务器广播NPC状态，那么一定要禁用Nagle。如果是请求回应模型，就不需要禁用Nagle.</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/11609.html/comment-page-1?replytocom=1471442#respond" data-commentid="1471442" data-postid="11609" data-belowelement="div-comment-1471442" data-respondelement="respond" data-replyto="回复给杨博" aria-label="回复给杨博">回复</a></div> </article>
<ol class="children">
<li id="comment-1471942" class="comment byuser comment-author-haoel bypostauthor odd alt depth-2">
<article id="div-comment-1471942" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/af2fbb7372dd5826e44d87e6ceccea40?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/af2fbb7372dd5826e44d87e6ceccea40?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn"><a href="https://coolshell.cn" class="url" rel="ugc">陈皓</a></b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/11609.html/comment-page-1#comment-1471942"><time datetime="2014-05-29T13:41:17+08:00">2014年05月29日 13:41</time></a> </div>
</footer>
<div class="comment-content">
<p>我就是这样写的啊。</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/11609.html/comment-page-1?replytocom=1471942#respond" data-commentid="1471942" data-postid="11609" data-belowelement="div-comment-1471942" data-respondelement="respond" data-replyto="回复给陈皓" aria-label="回复给陈皓">回复</a></div> </article>
</li>
</ol>
</li>
<li id="comment-1471842" class="comment even thread-odd thread-alt depth-1">
<article id="div-comment-1471842" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/2675c150c838e9d5d11c113483d5a7c0?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/2675c150c838e9d5d11c113483d5a7c0?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">guest</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/11609.html/comment-page-1#comment-1471842"><time datetime="2014-05-29T11:24:58+08:00">2014年05月29日 11:24</time></a> </div>
</footer>
<div class="comment-content">
<p>这是一个典型的一阶低通滤波器，目的是为了“平滑”。参见http://en.wikipedia.org/wiki/Low-pass_filter <a href="#comment-1471199" rel="nofollow">@不会便问 </a></p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/11609.html/comment-page-1?replytocom=1471842#respond" data-commentid="1471842" data-postid="11609" data-belowelement="div-comment-1471842" data-respondelement="respond" data-replyto="回复给guest" aria-label="回复给guest">回复</a></div> </article>
</li>
<li id="comment-1472013" class="comment odd alt thread-even depth-1">
<article id="div-comment-1472013" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/ab349fc6273558b00e0a76a03be6d74b?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/ab349fc6273558b00e0a76a03be6d74b?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">雪丰</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/11609.html/comment-page-1#comment-1472013"><time datetime="2014-05-29T15:23:06+08:00">2014年05月29日 15:23</time></a> </div>
</footer>
<div class="comment-content">
<p>我实现了TCP-FIT在Linux Kernel，但效果并没有那么好。</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/11609.html/comment-page-1?replytocom=1472013#respond" data-commentid="1472013" data-postid="11609" data-belowelement="div-comment-1472013" data-respondelement="respond" data-replyto="回复给雪丰" aria-label="回复给雪丰">回复</a></div> </article>
</li>
<li id="comment-1472068" class="comment even thread-odd thread-alt depth-1">
<article id="div-comment-1472068" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/ba40e9b5d9f9c1681aad95e1a7e86afd?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/ba40e9b5d9f9c1681aad95e1a7e86afd?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn"><a href="http://www.nbmjg.cn" class="url" rel="ugc external nofollow">宁波膜结构</a></b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/11609.html/comment-page-1#comment-1472068"><time datetime="2014-05-29T16:42:31+08:00">2014年05月29日 16:42</time></a> </div>
</footer>
<div class="comment-content">
<p>就是这点事而已。。。。</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/11609.html/comment-page-1?replytocom=1472068#respond" data-commentid="1472068" data-postid="11609" data-belowelement="div-comment-1472068" data-respondelement="respond" data-replyto="回复给宁波膜结构" aria-label="回复给宁波膜结构">回复</a></div> </article>
</li>
<li id="comment-1472071" class="comment odd alt thread-even depth-1">
<article id="div-comment-1472071" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/a54f48e212db5738b6dc418fed451498?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/a54f48e212db5738b6dc418fed451498?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">TCP的那些事</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/11609.html/comment-page-1#comment-1472071"><time datetime="2014-05-29T16:48:08+08:00">2014年05月29日 16:48</time></a> </div>
</footer>
<div class="comment-content">
<p>Nagle算法不是说保证网络上只有一个小包传输吗？ 上面杨博说的这段怎么看起来是延时确认功能啊？<br/>
博主你说的等待200ms是不是也是由于延时确认的那个timer时长啊？（不过文章里也没有提及经受时延的确认这一段）<br/>
还有博主想和你确认下，对于延时确认，接收端是不是受到2个包后一定会发送ACK出去？ （接收端发送ACK的时机？）<a href="#comment-1471942" rel="nofollow">@陈皓 </a></p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/11609.html/comment-page-1?replytocom=1472071#respond" data-commentid="1472071" data-postid="11609" data-belowelement="div-comment-1472071" data-respondelement="respond" data-replyto="回复给TCP的那些事" aria-label="回复给TCP的那些事">回复</a></div> </article>
</li>
<li id="comment-1472214" class="pingback even thread-odd thread-alt depth-1">
<div class="comment-body">
Pingback： <a href="http://demo.zengine.info/?p=1253" class="url" rel="ugc external nofollow">TCP 的那些事儿（上） | zengine</a> </div>
</li>
<li id="comment-1472282" class="pingback odd alt thread-even depth-1">
<div class="comment-body">
Pingback： <a href="http://www.xdhcn.com/?p=988" class="url" rel="ugc external nofollow">TCP 的那些事儿（上） | 星达红</a> </div>
</li>
<li id="comment-1472536" class="pingback even thread-odd thread-alt depth-1">
<div class="comment-body">
Pingback： <a href="http://blog.chedushi.com/archives/7583" class="url" rel="ugc external nofollow">陈皓 ：TCP 的那些事儿 | 岭南六少 - 一朵在LAMP架构下挣扎的云</a> </div>
</li>
<li id="comment-1472556" class="pingback odd alt thread-even depth-1">
<div class="comment-body">
Pingback： <a href="http://wzzblog.sinaapp.com/static/6874.html" class="url" rel="ugc external nofollow">TCP 的那些事儿（上） | | Evolution Unit 进化Evolution Unit 进化</a> </div>
</li>
<li id="comment-1472657" class="comment even thread-odd thread-alt depth-1">
<article id="div-comment-1472657" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/c2d7bf77b5af879acfc17d768bd819c8?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/c2d7bf77b5af879acfc17d768bd819c8?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">雨过天晴</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/11609.html/comment-page-1#comment-1472657"><time datetime="2014-05-30T11:27:01+08:00">2014年05月30日 11:27</time></a> </div>
</footer>
<div class="comment-content">
<p>终于迎来了两篇干货，看的我太爽了，作为前同事，还是有些惋惜未能与你多交流，加油</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/11609.html/comment-page-1?replytocom=1472657#respond" data-commentid="1472657" data-postid="11609" data-belowelement="div-comment-1472657" data-respondelement="respond" data-replyto="回复给雨过天晴" aria-label="回复给雨过天晴">回复</a></div> </article>
</li>
<li id="comment-1472720" class="comment odd alt thread-even depth-1">
<article id="div-comment-1472720" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/49aff164bca62b2b5858f60ca5851af7?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/49aff164bca62b2b5858f60ca5851af7?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">zhanghama</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/11609.html/comment-page-1#comment-1472720"><time datetime="2014-05-30T13:07:54+08:00">2014年05月30日 13:07</time></a> </div>
</footer>
<div class="comment-content">
<p>太有帮助了，对拥塞控制有了大概的认识。</p>
<p>这东西搞深了都是学术啊。</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/11609.html/comment-page-1?replytocom=1472720#respond" data-commentid="1472720" data-postid="11609" data-belowelement="div-comment-1472720" data-respondelement="respond" data-replyto="回复给zhanghama" aria-label="回复给zhanghama">回复</a></div> </article>
</li>
<li id="comment-1472731" class="comment even thread-odd thread-alt depth-1">
<article id="div-comment-1472731" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/c2e8d2a21c8a6c345bf3cc9fd9b19c54?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/c2e8d2a21c8a6c345bf3cc9fd9b19c54?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">Liam</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/11609.html/comment-page-1#comment-1472731"><time datetime="2014-05-30T13:35:18+08:00">2014年05月30日 13:35</time></a> </div>
</footer>
<div class="comment-content">
<p><a href="#comment-1471199" rel="nofollow">@不会便问 </a> 注意前面是 SRTT</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/11609.html/comment-page-1?replytocom=1472731#respond" data-commentid="1472731" data-postid="11609" data-belowelement="div-comment-1472731" data-respondelement="respond" data-replyto="回复给Liam" aria-label="回复给Liam">回复</a></div> </article>
</li>
<li id="comment-1472775" class="comment odd alt thread-even depth-1">
<article id="div-comment-1472775" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/5ba8ff30081252d637691bfd050f70df?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/5ba8ff30081252d637691bfd050f70df?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn"><a href="http://www.708luo.com" class="url" rel="ugc external nofollow">WKPlus</a></b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/11609.html/comment-page-1#comment-1472775"><time datetime="2014-05-30T14:32:06+08:00">2014年05月30日 14:32</time></a> </div>
</footer>
<div class="comment-content">
<p>接受端控制发送端的图示里面，第一个包到Server端之后，RCV.WND为什么是减少100而不是140呢？是指140 Bytes到达了并且Server端读取了40 Bytes了么？</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/11609.html/comment-page-1?replytocom=1472775#respond" data-commentid="1472775" data-postid="11609" data-belowelement="div-comment-1472775" data-respondelement="respond" data-replyto="回复给WKPlus" aria-label="回复给WKPlus">回复</a></div> </article>
</li>
<li id="comment-1472778" class="comment even thread-odd thread-alt depth-1">
<article id="div-comment-1472778" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/c6c59924a676cd31dd40bdba6ebbf816?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/c6c59924a676cd31dd40bdba6ebbf816?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn"><a href="http://NULL" class="url" rel="ugc external nofollow">想成226</a></b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/11609.html/comment-page-1#comment-1472778"><time datetime="2014-05-30T14:38:12+08:00">2014年05月30日 14:38</time></a> </div>
</footer>
<div class="comment-content">
<p><a href="#comment-1471083" rel="nofollow">@想成226 </a><br/>
看到浩哥更新了文章，这次看懂了。看到前面 留言说“RTT的处理是一个简易的一阶低通滤波器”，这里引入DevRTT以后已经是一个二阶低通滤波器了。</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/11609.html/comment-page-1?replytocom=1472778#respond" data-commentid="1472778" data-postid="11609" data-belowelement="div-comment-1472778" data-respondelement="respond" data-replyto="回复给想成226" aria-label="回复给想成226">回复</a></div> </article>
</li>
<li id="comment-1473043" class="comment odd alt thread-even depth-1">
<article id="div-comment-1473043" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/e6cc6baf350fcbb8d02f14d441500365?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/e6cc6baf350fcbb8d02f14d441500365?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">A小调</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/11609.html/comment-page-1#comment-1473043"><time datetime="2014-05-30T21:45:32+08:00">2014年05月30日 21:45</time></a> </div>
</footer>
<div class="comment-content">
<p>又加深了对其的认识。</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/11609.html/comment-page-1?replytocom=1473043#respond" data-commentid="1473043" data-postid="11609" data-belowelement="div-comment-1473043" data-respondelement="respond" data-replyto="回复给A小调" aria-label="回复给A小调">回复</a></div> </article>
</li>
<li id="comment-1474806" class="comment even thread-odd thread-alt depth-1">
<article id="div-comment-1474806" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/84fd0a4ec9e04a98e48a0364565f091e?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/84fd0a4ec9e04a98e48a0364565f091e?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">sjinny</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/11609.html/comment-page-1#comment-1474806"><time datetime="2014-06-03T10:16:04+08:00">2014年06月03日 10:16</time></a> </div>
</footer>
<div class="comment-content">
<p>有个疑问。我看到很多地方的说法是，为了解决telnet引起的拥塞才发明了nagle算法，按文中说的telnet要关闭nagle不就又倒回去了？文中建议关闭nagle是为了优化吞吐量还是延迟？如果是优化延迟那就能理解了。</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/11609.html/comment-page-1?replytocom=1474806#respond" data-commentid="1474806" data-postid="11609" data-belowelement="div-comment-1474806" data-respondelement="respond" data-replyto="回复给sjinny" aria-label="回复给sjinny">回复</a></div> </article>
</li>
<li id="comment-1475363" class="comment odd alt thread-even depth-1">
<article id="div-comment-1475363" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/6bd5425ab14dba340a59123fe6f08777?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/6bd5425ab14dba340a59123fe6f08777?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn"><a href="http://www.pgc.cn" class="url" rel="ugc external nofollow">皮革</a></b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/11609.html/comment-page-1#comment-1475363"><time datetime="2014-06-04T16:58:31+08:00">2014年06月04日 16:58</time></a> </div>
</footer>
<div class="comment-content">
<p>写得很详细！学习了</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/11609.html/comment-page-1?replytocom=1475363#respond" data-commentid="1475363" data-postid="11609" data-belowelement="div-comment-1475363" data-respondelement="respond" data-replyto="回复给皮革" aria-label="回复给皮革">回复</a></div> </article>
</li>
<li id="comment-1475892" class="comment even thread-odd thread-alt depth-1">
<article id="div-comment-1475892" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/0773bc21b8757206eeec8716e64be359?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/0773bc21b8757206eeec8716e64be359?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">聪明的猪</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/11609.html/comment-page-1#comment-1475892"><time datetime="2014-06-05T19:00:42+08:00">2014年06月05日 19:00</time></a> </div>
</footer>
<div class="comment-content">
<p>膜拜，虽然大部分都没看懂</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/11609.html/comment-page-1?replytocom=1475892#respond" data-commentid="1475892" data-postid="11609" data-belowelement="div-comment-1475892" data-respondelement="respond" data-replyto="回复给聪明的猪" aria-label="回复给聪明的猪">回复</a></div> </article>
</li>
<li id="comment-1475938" class="pingback odd alt thread-even depth-1">
<div class="comment-body">
Pingback： <a href="http://bberzy.com/2014/06/tcp/" class="url" rel="ugc external nofollow">TCP的那些事儿 | Yuzhic</a> </div>
</li>
<li id="comment-1477007" class="comment even thread-odd thread-alt depth-1">
<article id="div-comment-1477007" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/21acf56b3b7fe2347d01639811a62779?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/21acf56b3b7fe2347d01639811a62779?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">O(∩_∩)O~</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/11609.html/comment-page-1#comment-1477007"><time datetime="2014-06-07T13:13:01+08:00">2014年06月07日 13:13</time></a> </div>
</footer>
<div class="comment-content">
<p>要是把你的博客做个app就好了，想在手机上看</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/11609.html/comment-page-1?replytocom=1477007#respond" data-commentid="1477007" data-postid="11609" data-belowelement="div-comment-1477007" data-respondelement="respond" data-replyto="回复给O(∩_∩)O~" aria-label="回复给O(∩_∩)O~">回复</a></div> </article>
</li>
<li id="comment-1477268" class="comment odd alt thread-even depth-1">
<article id="div-comment-1477268" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/c1a8a41581ca7705e9778f483754c4ad?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/c1a8a41581ca7705e9778f483754c4ad?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn"><a href="http://shareyou.net.cn/" class="url" rel="ugc external nofollow">justdoit</a></b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/11609.html/comment-page-1#comment-1477268"><time datetime="2014-06-08T00:04:02+08:00">2014年06月08日 00:04</time></a> </div>
</footer>
<div class="comment-content">
<p>1）接收端在给发送端回ACK中会汇报自己的AdvertisedWindow = MaxRcvBuffer – LastByteRcvd – 1;<br/>
这个好像不一定是这样变化的吧，窗口有时候在接受到数据之后也会扩大的。。</p>
<p>2）下面我们来看一下发送方的滑动窗口示意图：<br/>
窗口应该是处理接收端反馈控制发送端的，说发送方的滑动窗口不太合适吧。</p>
<p>3）<br/>
这图是用什么画的？ubuntu上有应用没。</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/11609.html/comment-page-1?replytocom=1477268#respond" data-commentid="1477268" data-postid="11609" data-belowelement="div-comment-1477268" data-respondelement="respond" data-replyto="回复给justdoit" aria-label="回复给justdoit">回复</a></div> </article>
</li>
<li id="comment-1479677" class="comment even thread-odd thread-alt depth-1">
<article id="div-comment-1479677" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/6dc30504bea624c242385fbacf3e4854?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/6dc30504bea624c242385fbacf3e4854?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn"><a href="http://weibo.com/lispking" class="url" rel="ugc external nofollow">lispking</a></b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/11609.html/comment-page-1#comment-1479677"><time datetime="2014-06-11T22:18:51+08:00">2014年06月11日 22:18</time></a> </div>
</footer>
<div class="comment-content">
<p>Zero Window存在typo<br/>
第次大约30-60秒 -&gt; 每次大约30-60秒</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/11609.html/comment-page-1?replytocom=1479677#respond" data-commentid="1479677" data-postid="11609" data-belowelement="div-comment-1479677" data-respondelement="respond" data-replyto="回复给lispking" aria-label="回复给lispking">回复</a></div> </article>
</li>
<li id="comment-1482895" class="comment odd alt thread-even depth-1">
<article id="div-comment-1482895" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/e59caf48ad2e1e130967f4d0525e7601?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/e59caf48ad2e1e130967f4d0525e7601?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn"><a href="http://www.smartwei.com" class="url" rel="ugc external nofollow">drinkthere</a></b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/11609.html/comment-page-1#comment-1482895"><time datetime="2014-06-17T16:25:43+08:00">2014年06月17日 16:25</time></a> </div>
</footer>
<div class="comment-content">
<p>@陈皓<br/>
皓哥，有个地方有些困惑，希望您能解答一下：</p>
<p>每当收到一个ACK，cwnd++; 呈线性上升<br/>
每当过了一个RTT，cwnd = cwnd*2; 呈指数让升</p>
<p>一个RTT不就是收到一次ACK吗，这里不应该都是cwnd = cwnd*2吗</p>
<p>谢谢</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/11609.html/comment-page-1?replytocom=1482895#respond" data-commentid="1482895" data-postid="11609" data-belowelement="div-comment-1482895" data-respondelement="respond" data-replyto="回复给drinkthere" aria-label="回复给drinkthere">回复</a></div> </article>
</li>
<li id="comment-1482944" class="comment even thread-odd thread-alt depth-1">
<article id="div-comment-1482944" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/432c94ae92a2369710947f8771eb97f6?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/432c94ae92a2369710947f8771eb97f6?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">mason</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/11609.html/comment-page-1#comment-1482944"><time datetime="2014-06-17T17:41:10+08:00">2014年06月17日 17:41</time></a> </div>
</footer>
<div class="comment-content">
<p>接收端在给发送端回ACK中会汇报自己的AdvertisedWindow = MaxRcvBuffer – LastByteRcvd – 1;</p>
<p>这句没太理解，有以下疑问：<br/>
MaxRcvBuffer是设置的窗口的最大大小吗？<br/>
如果是的话，那么如果刚开始窗口大小是12，发送端一次发送了11个，但是第是一个是最先到达的，那么LastByteRcvd=12。计算得AdvertisedWindow=1，也就是说此时窗口大小是1，接收端发送ack=1，win=1，此时发送端收到这个win=1时怎么处理？发送端连一个有效的ack都没有收到，且要改变窗口大小？如果改变窗口大小，已发送出去但为收到ack的数据怎么处理？</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/11609.html/comment-page-1?replytocom=1482944#respond" data-commentid="1482944" data-postid="11609" data-belowelement="div-comment-1482944" data-respondelement="respond" data-replyto="回复给mason" aria-label="回复给mason">回复</a></div> </article>
</li>
<li id="comment-1482976" class="comment odd alt thread-even depth-1">
<article id="div-comment-1482976" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/432c94ae92a2369710947f8771eb97f6?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/432c94ae92a2369710947f8771eb97f6?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">mason</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/11609.html/comment-page-1#comment-1482976"><time datetime="2014-06-17T18:50:19+08:00">2014年06月17日 18:50</time></a> </div>
</footer>
<div class="comment-content">
<p>慢启动算法有这两条规则：<br/>
2）每当收到一个ACK，cwnd++; 呈线性上升<br/>
3）每当过了一个RTT，cwnd = cwnd*2; 呈指数让升</p>
<p>下面图中的左边那个图，是不是没有体现 3）这条规则呀？</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/11609.html/comment-page-1?replytocom=1482976#respond" data-commentid="1482976" data-postid="11609" data-belowelement="div-comment-1482976" data-respondelement="respond" data-replyto="回复给mason" aria-label="回复给mason">回复</a></div> </article>
</li>
<li id="comment-1483342" class="comment even thread-odd thread-alt depth-1">
<article id="div-comment-1483342" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/98e88b1dfd13fbda01c4d4ab9b78a7f7?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/98e88b1dfd13fbda01c4d4ab9b78a7f7?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">Elmirador</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/coolshell/articles/11609.html/comment-page-1#comment-1483342"><time datetime="2014-06-18T14:09:41+08:00">2014年06月18日 14:09</time></a> </div>
</footer>
<div class="comment-content">
<p>皓哥这是把大学计算机网络里面TCP那章又详细讲了一遍……</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/coolshell/articles/11609.html/comment-page-1?replytocom=1483342#respond" data-commentid="1483342" data-postid="11609" data-belowelement="div-comment-1483342" data-respondelement="respond" data-replyto="回复给Elmirador" aria-label="回复给Elmirador">回复</a></div> </article>
</li>
</ol>
<nav class="navigation comment-navigation" role="navigation">
<h2 class="screen-reader-text">Comment navigation</h2>
<div class="nav-links">
<div id="commentnavi">
<span class="pages"><i class="fa fa-comments"></i> 评论分页</span>
<div id="commentpager">
<span aria-current="page" class="page-numbers current">1</span>
<a class="page-numbers" href="/coolshell/articles/11609.html/comment-page-2#comments">2</a>
<a class="page-numbers" href="/coolshell/articles/11609.html/comment-page-3#comments">3</a>
<a class="page-numbers" href="/coolshell/articles/11609.html/comment-page-4#comments">4</a>
<a class="next page-numbers" href="/coolshell/articles/11609.html/comment-page-2#comments">下一页 &raquo;</a> <span id="cp_post_id">11609</span>
</div>
<div class="fixed"></div>
</div>
</div>
</nav>
<div id="respond" class="comment-respond">
<h3 id="reply-title" class="comment-reply-title">发表回复 <small><a rel="nofollow" id="cancel-comment-reply-link" href="/coolshell/articles/11609.html/comment-page-1#respond" style="display:none;">取消回复</a></small></h3><form action="https://coolshell.cn/wp-comments-post.php" method="post" id="commentform" class="comment-form" novalidate><p class="comment-notes"><span id="email-notes">您的电子邮箱地址不会被公开。</span> <span class="required-field-message">必填项已用<span class="required">*</span>标注</span></p><p class="comment-form-comment"><label for="comment">评论 <span class="required">*</span></label> <textarea id="comment" name="comment" cols="45" rows="8" maxlength="65525" required></textarea></p><p class="comment-form-author"><label for="author">显示名称 <span class="required">*</span></label> <input id="author" name="author" type="text" value size="30" maxlength="245" autocomplete="name" required /></p>
<p class="comment-form-email"><label for="email">电子邮箱地址 <span class="required">*</span></label> <input id="email" name="email" type="email" value size="30" maxlength="100" aria-describedby="email-notes" autocomplete="email" required /></p>
<p class="comment-form-url"><label for="url">网站地址</label> <input id="url" name="url" type="url" value size="30" maxlength="200" autocomplete="url" /></p>
<p class="form-submit"><input name="submit" type="submit" id="submit" class="submit" value="发表评论" /> <input type="hidden" name="comment_post_ID" value="11609" id="comment_post_ID" />
<input type="hidden" name="comment_parent" id="comment_parent" value="0" />
</p><p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="547ce20865" /></p><p style="display: none !important;"><label>&#916;<textarea name="ak_hp_textarea" cols="45" rows="8" maxlength="100"></textarea></label><input type="hidden" id="ak_js_1" name="ak_js" value="164" /><script type="808e290985b476087498e784-text/javascript">document.getElementById( "ak_js_1" ).setAttribute( "value", ( new Date() ).getTime() );</script></p></form> </div>
</div>
</div>
</div>
<div id="secondary" class="col-md-3 hidden-sm hidden-xs sidebar widget-area" role="complementary">
<aside id="search-9" class="widget widget_search">
<form role="search" method="get" class="search-form" action="https://coolshell.cn/">
<label>
<span class="screen-reader-text">Search for:</span>
<input type="search" class="search-field" placeholder="Search &hellip;" value name="s" title="Search for:" />
</label>
<button type="submit" class="search-submit"><span class="screen-reader-text">Search</span></button>
</form>
</aside><aside id="custom_html-3" class="widget_text widget widget_custom_html"><h4 class="widget-title">本站公告</h4><p align="center"><a href="https://memorial.megaease.cn/">纪念陈皓</a></p><div class="textwidget custom-html-widget"><p align="center"><a class="twitter" href="https://twitter.com/haoel" target="_blank" rel="noopener"> Twitter @haoel </a></p>

<p align="center">极客时间专栏<br><a href="http://gk.link/a/10sBp" target="_blank" rel="noopener"><img src="/coolshell/wp-content/uploads/2021/06/8311623409583_.pic_hd-1024x1024.jpg" height="200" weight="200" alt="极客时间专栏" title="极客时间专栏"></a></p>

</div></aside>
<aside id="recent-posts-4" class="widget widget_recent_entries">
<h4 class="widget-title"><a href="/coolshell/articles/">最新文章</a></h4>
<ul>
<li>
<a href="/coolshell/articles/22422.html">是微服务架构不香还是云不香？</a>
</li>
<li>
<a href="/coolshell/articles/22398.html">我看ChatGPT: 为啥谷歌掉了千亿美金</a>
</li>
<li>
<a href="/coolshell/articles/22367.html">聊聊 nostr 和 审查</a>
</li>
<li>
<a href="/coolshell/articles/22341.html">感染新冠的经历</a>
</li>
<li>
<a href="/coolshell/articles/22320.html">eBPF 介绍</a>
</li>
<li>
<a href="/coolshell/articles/22298.html">聊聊团队协同和协同工具</a>
</li>
<li>
<a href="/coolshell/articles/22263.html">从一次经历谈 TIME_WAIT 的那些事</a>
</li>
<li>
<a href="/coolshell/articles/22242.html">ETCD的内存问题</a>
</li>
<li>
<a href="/coolshell/articles/22173.html">“一把梭：REST API 全用 POST”</a>
</li>
<li>
<a href="/coolshell/articles/22157.html">谈谈公司对员工的监控</a>
</li>
<li>
<a href="/coolshell/articles/21708.html">网络数字身份认证术</a>
</li>
<li>
<a href="/coolshell/articles/21672.html">我做系统架构的一些原则</a>
</li>
<li>
<a href="/coolshell/articles/21649.html">源代码特洛伊木马攻击</a>
</li>
<li>
<a href="/coolshell/articles/21615.html">Go编程模式 ： 泛型编程</a>
</li>
<li>
<a href="/coolshell/articles/21589.html">如何做一个有质量的技术分享</a>
</li>
<li>
<a href="/coolshell/articles/21263.html">Go 编程模式：k8s Visitor 模式</a>
</li>
<li>
<a href="/coolshell/articles/21228.html">Go编程模式：Pipeline</a>
</li>
<li>
<a href="/coolshell/articles/21214.html">Go编程模式：委托和反转控制</a>
</li>
<li>
<a href="/coolshell/articles/21179.html">Go 编程模式：Go Generation</a>
</li>
<li>
<a href="/coolshell/articles/21164.html">Go编程模式：Map-Reduce</a>
</li>
<li>
<a href="/coolshell/articles/21146.html">Go 编程模式：Functional Options</a>
</li>
<li>
<a href="/coolshell/articles/21140.html">Go 编程模式：错误处理</a>
</li>
<li>
<a href="/coolshell/articles/21128.html">Go编程模式：切片，接口，时间和性能</a>
</li>
<li>
<a href="/coolshell/articles/21113.html">百度为什么掉队了</a>
</li>
<li>
<a href="/coolshell/articles/20977.html">程序员如何把控自己的职业</a>
</li>
<li>
<a href="/coolshell/articles/21003.html">计时攻击 Timing Attacks</a>
</li>
<li>
<a href="/coolshell/articles/20845.html">Rust语言的编程范式</a>
</li>
<li>
<a href="/coolshell/articles/20793.html">与程序员相关的CPU缓存知识</a>
</li>
<li>
<a href="/coolshell/articles/20765.html">MegaEase的远程工作文化</a>
</li>
<li>
<a href="/coolshell/articles/20533.html">使用简单的逻辑方法进行独立思考</a>
</li>
</ul>
</aside><aside id="views-6" class="widget widget_views"><h4 class="widget-title"><a href="/coolshell/articles/">全站热门</a></h4><ul>
<li><a href="/coolshell/articles/4990.html" title="程序员技术练级攻略 - 10,243,155 人阅读">程序员技术练级攻略</a></li><li><a href="/coolshell/articles/3961.html" title="&ldquo;火柴棍式&rdquo;程序员面试题 - 2,357,109 人阅读">&ldquo;火柴棍式&rdquo;程序员面试题</a></li><li><a href="/coolshell/articles/5426.html" title="简明 Vim 练级攻略 - 1,327,370 人阅读">简明 Vim 练级攻略</a></li><li><a href="/coolshell/articles/9308.html" title="&ldquo;作环保的程序员，从不用百度开始&rdquo; - 595,918 人阅读">&ldquo;作环保的程序员，从不用百度开始&rdquo;</a></li><li><a href="/coolshell/articles/11564.html" title="TCP 的那些事儿（上） - 489,930 人阅读">TCP 的那些事儿（上）</a></li><li><a href="/coolshell/articles/9070.html" title="AWK 简明教程 - 453,921 人阅读">AWK 简明教程</a></li><li><a href="/coolshell/articles/7186.html" title="做个环保主义的程序员 - 447,889 人阅读">做个环保主义的程序员</a></li><li><a href="/coolshell/articles/10688.html" title="编程能力与编程年龄 - 417,805 人阅读">编程能力与编程年龄</a></li><li><a href="/coolshell/articles/10590.html" title="二维码的生成细节和原理 - 394,229 人阅读">二维码的生成细节和原理</a></li><li><a href="/coolshell/articles/9104.html" title="sed 简明教程 - 380,734 人阅读">sed 简明教程</a></li><li><a href="/coolshell/articles/4102.html" title="如何学好C语言 - 369,143 人阅读">如何学好C语言</a></li><li><a href="/coolshell/articles/19464.html" title="如何超过大多数人 - 317,936 人阅读">如何超过大多数人</a></li><li><a href="/coolshell/articles/17583.html" title="技术人员的发展之路 - 310,112 人阅读">技术人员的发展之路</a></li><li><a href="/coolshell/articles/9606.html" title="疫苗：Java HashMap的死循环 - 305,873 人阅读">疫苗：Java HashMap的死循环</a></li><li><a href="/coolshell/articles/6470.html" title="由12306.cn谈谈网站性能技术 - 299,644 人阅读">由12306.cn谈谈网站性能技术</a></li><li><a href="/coolshell/articles/8883.html" title="应该知道的Linux技巧 - 297,472 人阅读">应该知道的Linux技巧</a></li><li><a href="/coolshell/articles/17416.html" title="缓存更新的套路 - 294,157 人阅读">缓存更新的套路</a></li><li><a href="/coolshell/articles/10910.html" title="分布式系统的事务处理 - 285,137 人阅读">分布式系统的事务处理</a></li><li><a href="/coolshell/articles/11609.html" title="TCP 的那些事儿（下） - 284,950 人阅读">TCP 的那些事儿（下）</a></li><li><a href="/coolshell/articles/2250.html" title="&ldquo;21天教你学会C++&rdquo; - 279,605 人阅读">&ldquo;21天教你学会C++&rdquo;</a></li><li><a href="/coolshell/articles/20276.html" title="别让自己&ldquo;墙&rdquo;了自己 - 275,082 人阅读">别让自己&ldquo;墙&rdquo;了自己</a></li><li><a href="/coolshell/articles/8239.html" title="无锁队列的实现 - 274,884 人阅读">无锁队列的实现</a></li><li><a href="/coolshell/articles/10739.html" title="Lua简明教程 - 269,744 人阅读">Lua简明教程</a></li><li><a href="/coolshell/articles/7490.html" title="性能调优攻略 - 257,662 人阅读">性能调优攻略</a></li><li><a href="/coolshell/articles/1846.html" title="MySQL性能优化的最佳20+条经验 - 256,287 人阅读">MySQL性能优化的最佳20+条经验</a></li><li><a href="/coolshell/articles/4758.html" title="如何写出无法维护的代码 - 254,961 人阅读">如何写出无法维护的代码</a></li><li><a href="/coolshell/articles/914.html" title="6个变态的C语言Hello World程序 - 252,183 人阅读">6个变态的C语言Hello World程序</a></li><li><a href="/coolshell/articles/17010.html" title="Docker基础技术：Linux Namespace（上） - 242,317 人阅读">Docker基础技术：Linux Namespace（上）</a></li><li><a href="/coolshell/articles/7829.html" title="28个Unix/Linux的命令行神器 - 241,597 人阅读">28个Unix/Linux的命令行神器</a></li><li><a href="/coolshell/articles/11312.html" title="无插件Vim编程技巧 - 223,441 人阅读">无插件Vim编程技巧</a></li></ul>
</aside><aside id="categories-367921425" class="widget widget_categories"><h4 class="widget-title">分类</h4>
<ul>
<li class="cat-item cat-item-195"><a href="/coolshell/category/itnews">业界新闻</a> (33)
</li>
<li class="cat-item cat-item-509"><a href="/coolshell/category/%e4%bc%81%e4%b8%9a%e5%ba%94%e7%94%a8">企业应用</a> (2)
</li>
<li class="cat-item cat-item-9"><a href="/coolshell/category/technews">技术新闻</a> (38)
</li>
<li class="cat-item cat-item-550"><a href="/coolshell/category/%e6%8a%80%e6%9c%af%e7%ae%a1%e7%90%86">技术管理</a> (19)
</li>
<li class="cat-item cat-item-12"><a href="/coolshell/category/techarticle">技术读物</a> (125)
</li>
<li class="cat-item cat-item-18"><a href="/coolshell/category/operatingsystem">操作系统</a> (97)
<ul class="children">
<li class="cat-item cat-item-20"><a href="/coolshell/category/operatingsystem/unixlinux">Unix/Linux</a> (81)
</li>
<li class="cat-item cat-item-19"><a href="/coolshell/category/operatingsystem/mswindows">Windows</a> (12)
</li>
</ul>
</li>
<li class="cat-item cat-item-105"><a href="/coolshell/category/datebase">数据库</a> (11)
</li>
<li class="cat-item cat-item-10"><a href="/coolshell/category/misc">杂项资源</a> (295)
</li>
<li class="cat-item cat-item-15"><a href="/coolshell/category/process">流程方法</a> (48)
</li>
<li class="cat-item cat-item-23"><a href="/coolshell/category/progdesign">程序设计</a> (110)
</li>
<li class="cat-item cat-item-602"><a href="/coolshell/category/%e7%b3%bb%e7%bb%9f%e6%9e%b6%e6%9e%84">系统架构</a> (15)
</li>
<li class="cat-item cat-item-1"><a href="/coolshell/category/tools">编程工具</a> (67)
</li>
<li class="cat-item cat-item-3"><a href="/coolshell/category/proglanguage">编程语言</a> (326)
<ul class="children">
<li class="cat-item cat-item-189"><a href="/coolshell/category/proglanguage/dotnet">.NET编程</a> (3)
</li>
<li class="cat-item cat-item-8"><a href="/coolshell/category/proglanguage/ajaxdev">Ajax开发</a> (9)
</li>
<li class="cat-item cat-item-5"><a href="/coolshell/category/proglanguage/cplusplus">C/C++语言</a> (74)
</li>
<li class="cat-item cat-item-186"><a href="/coolshell/category/proglanguage/erlang">Erlang</a> (1)
</li>
<li class="cat-item cat-item-819"><a href="/coolshell/category/proglanguage/go-%e8%af%ad%e8%a8%80">Go 语言</a> (15)
</li>
<li class="cat-item cat-item-4"><a href="/coolshell/category/proglanguage/javadev">Java语言</a> (32)
</li>
<li class="cat-item cat-item-11"><a href="/coolshell/category/proglanguage/phpdev">PHP脚本</a> (11)
</li>
<li class="cat-item cat-item-33"><a href="/coolshell/category/proglanguage/pythondev">Python</a> (23)
</li>
<li class="cat-item cat-item-100"><a href="/coolshell/category/proglanguage/rubydev">Ruby</a> (5)
</li>
<li class="cat-item cat-item-860"><a href="/coolshell/category/proglanguage/rust-%e8%af%ad%e8%a8%80">Rust 语言</a> (1)
</li>
<li class="cat-item cat-item-7"><a href="/coolshell/category/proglanguage/webdev">Web开发</a> (106)
</li>
</ul>
</li>
<li class="cat-item cat-item-6"><a href="/coolshell/category/netsecurity">网络安全</a> (36)
</li>
<li class="cat-item cat-item-39"><a href="/coolshell/category/career">职场生涯</a> (40)
</li>
<li class="cat-item cat-item-271"><a href="/coolshell/category/funny">趣味问题</a> (19)
</li>
<li class="cat-item cat-item-52"><a href="/coolshell/category/story">轶事趣闻</a> (147)
</li>
</ul>
</aside><aside id="tag_cloud-4" class="widget widget_tag_cloud"><h4 class="widget-title">标签</h4><div class="tagcloud"><a href="/coolshell/tag/agile" class="tag-cloud-link tag-link-17 tag-link-position-1" style="font-size: 11.559322033898pt;" aria-label="agile (15个项目)">agile</a>
<a href="/coolshell/tag/ajax" class="tag-cloud-link tag-link-34 tag-link-position-2" style="font-size: 10.135593220339pt;" aria-label="AJAX (11个项目)">AJAX</a>
<a href="/coolshell/tag/algorithm" class="tag-cloud-link tag-link-76 tag-link-position-3" style="font-size: 14.28813559322pt;" aria-label="Algorithm (26个项目)">Algorithm</a>
<a href="/coolshell/tag/android" class="tag-cloud-link tag-link-145 tag-link-position-4" style="font-size: 10.135593220339pt;" aria-label="Android (11个项目)">Android</a>
<a href="/coolshell/tag/bash" class="tag-cloud-link tag-link-190 tag-link-position-5" style="font-size: 9.1864406779661pt;" aria-label="Bash (9个项目)">Bash</a>
<a href="/coolshell/tag/c" class="tag-cloud-link tag-link-59 tag-link-position-6" style="font-size: 20.694915254237pt;" aria-label="C++ (93个项目)">C++</a>
<a href="/coolshell/tag/coding" class="tag-cloud-link tag-link-135 tag-link-position-7" style="font-size: 14.28813559322pt;" aria-label="Coding (26个项目)">Coding</a>
<a href="/coolshell/tag/css" class="tag-cloud-link tag-link-96 tag-link-position-8" style="font-size: 13.457627118644pt;" aria-label="CSS (22个项目)">CSS</a>
<a href="/coolshell/tag/design" class="tag-cloud-link tag-link-71 tag-link-position-9" style="font-size: 13.932203389831pt;" aria-label="Design (24个项目)">Design</a>
<a href="/coolshell/tag/design-pattern" class="tag-cloud-link tag-link-25 tag-link-position-10" style="font-size: 9.6610169491525pt;" aria-label="design pattern (10个项目)">design pattern</a>
<a href="/coolshell/tag/ebook" class="tag-cloud-link tag-link-101 tag-link-position-11" style="font-size: 11.559322033898pt;" aria-label="ebook (15个项目)">ebook</a>
<a href="/coolshell/tag/flash" class="tag-cloud-link tag-link-98 tag-link-position-12" style="font-size: 8pt;" aria-label="Flash (7个项目)">Flash</a>
<a href="/coolshell/tag/game" class="tag-cloud-link tag-link-125 tag-link-position-13" style="font-size: 9.1864406779661pt;" aria-label="Game (9个项目)">Game</a>
<a href="/coolshell/tag/go" class="tag-cloud-link tag-link-238 tag-link-position-14" style="font-size: 13.220338983051pt;" aria-label="Go (21个项目)">Go</a>
<a href="/coolshell/tag/golang" class="tag-cloud-link tag-link-237 tag-link-position-15" style="font-size: 10.966101694915pt;" aria-label="golang (13个项目)">golang</a>
<a href="/coolshell/tag/google" class="tag-cloud-link tag-link-32 tag-link-position-16" style="font-size: 15.474576271186pt;" aria-label="Google (33个项目)">Google</a>
<a href="/coolshell/tag/html" class="tag-cloud-link tag-link-38 tag-link-position-17" style="font-size: 15.593220338983pt;" aria-label="HTML (34个项目)">HTML</a>
<a href="/coolshell/tag/ie" class="tag-cloud-link tag-link-175 tag-link-position-18" style="font-size: 9.6610169491525pt;" aria-label="IE (10个项目)">IE</a>
<a href="/coolshell/tag/java" class="tag-cloud-link tag-link-13 tag-link-position-19" style="font-size: 17.610169491525pt;" aria-label="Java (50个项目)">Java</a>
<a href="/coolshell/tag/javascript" class="tag-cloud-link tag-link-114 tag-link-position-20" style="font-size: 17.966101694915pt;" aria-label="Javascript (54个项目)">Javascript</a>
<a href="/coolshell/tag/jquery" class="tag-cloud-link tag-link-191 tag-link-position-21" style="font-size: 10.135593220339pt;" aria-label="jQuery (11个项目)">jQuery</a>
<a href="/coolshell/tag/linux" class="tag-cloud-link tag-link-37 tag-link-position-22" style="font-size: 19.389830508475pt;" aria-label="Linux (71个项目)">Linux</a>
<a href="/coolshell/tag/mysql" class="tag-cloud-link tag-link-106 tag-link-position-23" style="font-size: 8pt;" aria-label="MySQL (7个项目)">MySQL</a>
<a href="/coolshell/tag/oop" class="tag-cloud-link tag-link-245 tag-link-position-24" style="font-size: 8.5932203389831pt;" aria-label="OOP (8个项目)">OOP</a>
<a href="/coolshell/tag/password" class="tag-cloud-link tag-link-319 tag-link-position-25" style="font-size: 8.5932203389831pt;" aria-label="password (8个项目)">password</a>
<a href="/coolshell/tag/performance" class="tag-cloud-link tag-link-120 tag-link-position-26" style="font-size: 12.271186440678pt;" aria-label="Performance (17个项目)">Performance</a>
<a href="/coolshell/tag/php" class="tag-cloud-link tag-link-35 tag-link-position-27" style="font-size: 14.050847457627pt;" aria-label="PHP (25个项目)">PHP</a>
<a href="/coolshell/tag/programmer" class="tag-cloud-link tag-link-70 tag-link-position-28" style="font-size: 21.881355932203pt;" aria-label="Programmer (116个项目)">Programmer</a>
<a href="/coolshell/tag/programming" class="tag-cloud-link tag-link-499 tag-link-position-29" style="font-size: 10.135593220339pt;" aria-label="Programming (11个项目)">Programming</a>
<a href="/coolshell/tag/programming-language" class="tag-cloud-link tag-link-115 tag-link-position-30" style="font-size: 10.491525423729pt;" aria-label="programming language (12个项目)">programming language</a>
<a href="/coolshell/tag/puzzle" class="tag-cloud-link tag-link-514 tag-link-position-31" style="font-size: 10.135593220339pt;" aria-label="Puzzle (11个项目)">Puzzle</a>
<a href="/coolshell/tag/pythondev" class="tag-cloud-link tag-link-791 tag-link-position-32" style="font-size: 15pt;" aria-label="Python (30个项目)">Python</a>
<a href="/coolshell/tag/ruby" class="tag-cloud-link tag-link-69 tag-link-position-33" style="font-size: 9.6610169491525pt;" aria-label="Ruby (10个项目)">Ruby</a>
<a href="/coolshell/tag/sql" class="tag-cloud-link tag-link-131 tag-link-position-34" style="font-size: 9.6610169491525pt;" aria-label="SQL (10个项目)">SQL</a>
<a href="/coolshell/tag/tdd" class="tag-cloud-link tag-link-485 tag-link-position-35" style="font-size: 8.5932203389831pt;" aria-label="TDD (8个项目)">TDD</a>
<a href="/coolshell/tag/ui" class="tag-cloud-link tag-link-47 tag-link-position-36" style="font-size: 10.491525423729pt;" aria-label="UI (12个项目)">UI</a>
<a href="/coolshell/tag/unix" class="tag-cloud-link tag-link-21 tag-link-position-37" style="font-size: 15.949152542373pt;" aria-label="Unix (36个项目)">Unix</a>
<a href="/coolshell/tag/vim" class="tag-cloud-link tag-link-50 tag-link-position-38" style="font-size: 12.745762711864pt;" aria-label="vim (19个项目)">vim</a>
<a href="/coolshell/tag/web" class="tag-cloud-link tag-link-30 tag-link-position-39" style="font-size: 16.661016949153pt;" aria-label="Web (42个项目)">Web</a>
<a href="/coolshell/tag/windows" class="tag-cloud-link tag-link-49 tag-link-position-40" style="font-size: 12.271186440678pt;" aria-label="Windows (17个项目)">Windows</a>
<a href="/coolshell/tag/xml" class="tag-cloud-link tag-link-104 tag-link-position-41" style="font-size: 8.5932203389831pt;" aria-label="XML (8个项目)">XML</a>
<a href="/coolshell/tag/%e5%ae%89%e5%85%a8" class="tag-cloud-link tag-link-318 tag-link-position-42" style="font-size: 13.694915254237pt;" aria-label="安全 (23个项目)">安全</a>
<a href="/coolshell/tag/%e7%a8%8b%e5%ba%8f%e5%91%98" class="tag-cloud-link tag-link-58 tag-link-position-43" style="font-size: 22pt;" aria-label="程序员 (119个项目)">程序员</a>
<a href="/coolshell/tag/%e7%ae%97%e6%b3%95" class="tag-cloud-link tag-link-77 tag-link-position-44" style="font-size: 9.6610169491525pt;" aria-label="算法 (10个项目)">算法</a>
<a href="/coolshell/tag/interview" class="tag-cloud-link tag-link-164 tag-link-position-45" style="font-size: 11.915254237288pt;" aria-label="面试 (16个项目)">面试</a></div>
</aside><aside id="archives-5" class="widget widget_archive"><h4 class="widget-title"><a href="/coolshell/page/">归档</a></h4>
<ul>
<li><a href="/coolshell/articles/date/2023/05">2023年5月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2023/02">2023年2月</a>&nbsp;(2)</li>
<li><a href="/coolshell/articles/date/2022/12">2022年12月</a>&nbsp;(2)</li>
<li><a href="/coolshell/articles/date/2022/10">2022年10月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2022/07">2022年7月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2022/05">2022年5月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2022/02">2022年2月</a>&nbsp;(2)</li>
<li><a href="/coolshell/articles/date/2022/01">2022年1月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2021/12">2021年12月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2021/11">2021年11月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2021/09">2021年9月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2021/07">2021年7月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2020/12">2020年12月</a>&nbsp;(9)</li>
<li><a href="/coolshell/articles/date/2020/08">2020年8月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2020/07">2020年7月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2020/04">2020年4月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2020/03">2020年3月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2020/01">2020年1月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2019/12">2019年12月</a>&nbsp;(2)</li>
<li><a href="/coolshell/articles/date/2019/11">2019年11月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2019/10">2019年10月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2019/07">2019年7月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2019/06">2019年6月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2019/05">2019年5月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2019/04">2019年4月</a>&nbsp;(2)</li>
<li><a href="/coolshell/articles/date/2019/03">2019年3月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2019/02">2019年2月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2018/12">2018年12月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2018/05">2018年5月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2018/01">2018年1月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2017/10">2017年10月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2017/09">2017年9月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2017/08">2017年8月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2017/07">2017年7月</a>&nbsp;(3)</li>
<li><a href="/coolshell/articles/date/2017/06">2017年6月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2017/04">2017年4月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2017/03">2017年3月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2017/02">2017年2月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2017/01">2017年1月</a>&nbsp;(2)</li>
<li><a href="/coolshell/articles/date/2016/12">2016年12月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2016/10">2016年10月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2016/09">2016年9月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2016/08">2016年8月</a>&nbsp;(2)</li>
<li><a href="/coolshell/articles/date/2016/07">2016年7月</a>&nbsp;(3)</li>
<li><a href="/coolshell/articles/date/2015/12">2015年12月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2015/09">2015年9月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2015/08">2015年8月</a>&nbsp;(2)</li>
<li><a href="/coolshell/articles/date/2015/04">2015年4月</a>&nbsp;(4)</li>
<li><a href="/coolshell/articles/date/2014/12">2014年12月</a>&nbsp;(3)</li>
<li><a href="/coolshell/articles/date/2014/11">2014年11月</a>&nbsp;(2)</li>
<li><a href="/coolshell/articles/date/2014/10">2014年10月</a>&nbsp;(2)</li>
<li><a href="/coolshell/articles/date/2014/09">2014年9月</a>&nbsp;(2)</li>
<li><a href="/coolshell/articles/date/2014/08">2014年8月</a>&nbsp;(2)</li>
<li><a href="/coolshell/articles/date/2014/06">2014年6月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2014/05">2014年5月</a>&nbsp;(4)</li>
<li><a href="/coolshell/articles/date/2014/04">2014年4月</a>&nbsp;(4)</li>
<li><a href="/coolshell/articles/date/2014/03">2014年3月</a>&nbsp;(5)</li>
<li><a href="/coolshell/articles/date/2014/02">2014年2月</a>&nbsp;(3)</li>
<li><a href="/coolshell/articles/date/2014/01">2014年1月</a>&nbsp;(2)</li>
<li><a href="/coolshell/articles/date/2013/12">2013年12月</a>&nbsp;(3)</li>
<li><a href="/coolshell/articles/date/2013/11">2013年11月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2013/10">2013年10月</a>&nbsp;(6)</li>
<li><a href="/coolshell/articles/date/2013/08">2013年8月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2013/07">2013年7月</a>&nbsp;(8)</li>
<li><a href="/coolshell/articles/date/2013/06">2013年6月</a>&nbsp;(2)</li>
<li><a href="/coolshell/articles/date/2013/05">2013年5月</a>&nbsp;(3)</li>
<li><a href="/coolshell/articles/date/2013/04">2013年4月</a>&nbsp;(3)</li>
<li><a href="/coolshell/articles/date/2013/03">2013年3月</a>&nbsp;(3)</li>
<li><a href="/coolshell/articles/date/2013/02">2013年2月</a>&nbsp;(5)</li>
<li><a href="/coolshell/articles/date/2013/01">2013年1月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2012/12">2012年12月</a>&nbsp;(4)</li>
<li><a href="/coolshell/articles/date/2012/11">2012年11月</a>&nbsp;(4)</li>
<li><a href="/coolshell/articles/date/2012/10">2012年10月</a>&nbsp;(3)</li>
<li><a href="/coolshell/articles/date/2012/09">2012年9月</a>&nbsp;(4)</li>
<li><a href="/coolshell/articles/date/2012/08">2012年8月</a>&nbsp;(8)</li>
<li><a href="/coolshell/articles/date/2012/07">2012年7月</a>&nbsp;(4)</li>
<li><a href="/coolshell/articles/date/2012/06">2012年6月</a>&nbsp;(7)</li>
<li><a href="/coolshell/articles/date/2012/05">2012年5月</a>&nbsp;(6)</li>
<li><a href="/coolshell/articles/date/2012/04">2012年4月</a>&nbsp;(6)</li>
<li><a href="/coolshell/articles/date/2012/03">2012年3月</a>&nbsp;(6)</li>
<li><a href="/coolshell/articles/date/2012/02">2012年2月</a>&nbsp;(3)</li>
<li><a href="/coolshell/articles/date/2012/01">2012年1月</a>&nbsp;(6)</li>
<li><a href="/coolshell/articles/date/2011/12">2011年12月</a>&nbsp;(5)</li>
<li><a href="/coolshell/articles/date/2011/11">2011年11月</a>&nbsp;(9)</li>
<li><a href="/coolshell/articles/date/2011/10">2011年10月</a>&nbsp;(6)</li>
<li><a href="/coolshell/articles/date/2011/09">2011年9月</a>&nbsp;(5)</li>
<li><a href="/coolshell/articles/date/2011/08">2011年8月</a>&nbsp;(14)</li>
<li><a href="/coolshell/articles/date/2011/07">2011年7月</a>&nbsp;(6)</li>
<li><a href="/coolshell/articles/date/2011/06">2011年6月</a>&nbsp;(12)</li>
<li><a href="/coolshell/articles/date/2011/05">2011年5月</a>&nbsp;(5)</li>
<li><a href="/coolshell/articles/date/2011/04">2011年4月</a>&nbsp;(18)</li>
<li><a href="/coolshell/articles/date/2011/03">2011年3月</a>&nbsp;(16)</li>
<li><a href="/coolshell/articles/date/2011/02">2011年2月</a>&nbsp;(16)</li>
<li><a href="/coolshell/articles/date/2011/01">2011年1月</a>&nbsp;(18)</li>
<li><a href="/coolshell/articles/date/2010/12">2010年12月</a>&nbsp;(11)</li>
<li><a href="/coolshell/articles/date/2010/11">2010年11月</a>&nbsp;(11)</li>
<li><a href="/coolshell/articles/date/2010/10">2010年10月</a>&nbsp;(19)</li>
<li><a href="/coolshell/articles/date/2010/09">2010年9月</a>&nbsp;(15)</li>
<li><a href="/coolshell/articles/date/2010/08">2010年8月</a>&nbsp;(10)</li>
<li><a href="/coolshell/articles/date/2010/07">2010年7月</a>&nbsp;(20)</li>
<li><a href="/coolshell/articles/date/2010/06">2010年6月</a>&nbsp;(9)</li>
<li><a href="/coolshell/articles/date/2010/05">2010年5月</a>&nbsp;(13)</li>
<li><a href="/coolshell/articles/date/2010/04">2010年4月</a>&nbsp;(12)</li>
<li><a href="/coolshell/articles/date/2010/03">2010年3月</a>&nbsp;(11)</li>
<li><a href="/coolshell/articles/date/2010/02">2010年2月</a>&nbsp;(7)</li>
<li><a href="/coolshell/articles/date/2010/01">2010年1月</a>&nbsp;(9)</li>
<li><a href="/coolshell/articles/date/2009/12">2009年12月</a>&nbsp;(22)</li>
<li><a href="/coolshell/articles/date/2009/11">2009年11月</a>&nbsp;(27)</li>
<li><a href="/coolshell/articles/date/2009/10">2009年10月</a>&nbsp;(17)</li>
<li><a href="/coolshell/articles/date/2009/09">2009年9月</a>&nbsp;(14)</li>
<li><a href="/coolshell/articles/date/2009/08">2009年8月</a>&nbsp;(21)</li>
<li><a href="/coolshell/articles/date/2009/07">2009年7月</a>&nbsp;(18)</li>
<li><a href="/coolshell/articles/date/2009/06">2009年6月</a>&nbsp;(19)</li>
<li><a href="/coolshell/articles/date/2009/05">2009年5月</a>&nbsp;(27)</li>
<li><a href="/coolshell/articles/date/2009/04">2009年4月</a>&nbsp;(53)</li>
<li><a href="/coolshell/articles/date/2009/03">2009年3月</a>&nbsp;(43)</li>
<li><a href="/coolshell/articles/date/2008/10">2008年10月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2007/12">2007年12月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2006/11">2006年11月</a>&nbsp;(1)</li>
<li><a href="/coolshell/articles/date/2004/06">2004年6月</a>&nbsp;(1)</li>
</ul>
</aside><aside id="custom_html-8" class="widget_text widget widget_custom_html"><h4 class="widget-title">友情链接</h4><div class="textwidget custom-html-widget"><ul class="blogroll">
<li><a href="http://blog.csdn.net/haoel" target="_blank" onclick="if (!window.__cfRLUnblockHandlers) return false; pageTracker._trackPageview('/outgoing/blog.csdn.net/haoel?referer=http://coolshell.cn');" rel="noopener" data-cf-modified-808e290985b476087498e784->陈皓的博客</a></li>
<li><a href="http://ifeve.com/" target="_blank" title="促进并发编程的研究和推广" onclick="if (!window.__cfRLUnblockHandlers) return false; pageTracker._trackPageview('/outgoing/ifeve.com/?referer=http://coolshell.cn');" rel="noopener" data-cf-modified-808e290985b476087498e784->并发编程</a></li>
<li><a href="http://www.raychase.net/" target="_blank" title="一个啰嗦的程序员" onclick="if (!window.__cfRLUnblockHandlers) return false; pageTracker._trackPageview('/outgoing/www.raychase.net/?referer=http://coolshell.cn');" rel="noopener" data-cf-modified-808e290985b476087498e784->四火的唠叨</a></li>
<li><a href="http://www.cnblogs.com/weidagang2046/" target="_blank" title="Just for Fun" onclick="if (!window.__cfRLUnblockHandlers) return false; pageTracker._trackPageview('/outgoing/http://www.cnblogs.com/weidagang2046/?referer=http://coolshell.cn/');" rel="noopener" data-cf-modified-808e290985b476087498e784->Todd Wei的Blog</a></li>
<li><a href="http://www.hellogcc.org/" target="_blank" title="致力于讨论和学习GNU Toolchain方面的工作组" onclick="if (!window.__cfRLUnblockHandlers) return false; pageTracker._trackPageview('/outgoing/www.hellogcc.org//?referer=http://coolshell.cn/');" rel="noopener" data-cf-modified-808e290985b476087498e784->开源开发工具技术博客</a></li>
<li><a href="http://www.cppfans.org/" target="_blank" title="记录我们点滴学习工作生活" onclick="if (!window.__cfRLUnblockHandlers) return false; pageTracker._trackPageview('/outgoing/http://www.cppfans.org/?referer=http://coolshell.cn/');" rel="noopener" data-cf-modified-808e290985b476087498e784->C++爱好者博客</a></li>
<li><a href="https://HelloACM.com/" target="_blank" title="Smart Ideas, Smart Algorithms" onclick="if (!window.__cfRLUnblockHandlers) return false; pageTracker._trackPageview('/outgoing/http://HelloACM.com/?referer=http://coolshell.cn/');" rel="noopener" data-cf-modified-808e290985b476087498e784->ACMer</a></li>
</ul>
</div></aside><aside id="meta-5" class="widget widget_meta"><h4 class="widget-title">其他操作</h4>
<ul>
<li><a href="https://coolshell.cn/wp-login.php?action=register">注册</a></li> <li><a href="https://coolshell.cn/wp-login.php">登录</a></li>
<li><a href="https://coolshell.cn/feed">条目feed</a></li>
<li><a href="https://coolshell.cn/comments/feed">评论feed</a></li>
<li><a href="https://cn.wordpress.org/">WordPress.org</a></li>
</ul>
</aside></div>
</div> 
</div>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-X07ZBQJ84C');
</script>
</div>
<footer id="colophon" class="site-footer" role="contentinfo">
<div class="row site-info">
CoolShell.cn &copy; 2023
<span class="sep"> | </span>
Powered by <a href="https://wordpress.org/">WordPress</a>
<span class="sep"> | </span>
Based on Theme: Nisarg by <a href="http://www.falgunidesai.com/" rel="designer">Falguni Desai</a>.
<p>本站是酷壳网 <a href="https://coolshell.cn" target="_target">coolshell.cn</a> 的静态镜像，保存于 <a href="/coolshell/github/">GitHub</a>。</p>
</div>
</footer>
</div>
<script type="808e290985b476087498e784-text/javascript" id="wp-postratings-js-extra">
/* <![CDATA[ */
var ratingsL10n = {"plugin_url":"https:\/\/coolshell.cn\/wp-content\/plugins\/wp-postratings","ajax_url":"https:\/\/coolshell.cn\/wp-admin\/admin-ajax.php","text_wait":"Please rate only 1 item at a time.","image":"stars_crystal","image_ext":"gif","max":"5","show_loading":"1","show_fading":"1","custom":"0"};
var ratings_mouseover_image=new Image();ratings_mouseover_image.src="/coolshell/wp-content/plugins/wp-postratings/images/stars_crystal/rating_over.gif";;
/* ]]> */
</script>
<script type="808e290985b476087498e784-text/javascript" src="/coolshell/wp-content/plugins/wp-postratings/js/postratings-js.js?ver=1.90.1" id="wp-postratings-js"></script>
<script type="808e290985b476087498e784-text/javascript" id="wp-postviews-cache-js-extra">
/* <![CDATA[ */
var viewsCacheL10n = {"admin_ajax_url":"https:\/\/coolshell.cn\/wp-admin\/admin-ajax.php","nonce":"f23160d9f3","post_id":"11609"};
/* ]]> */
</script>
<script type="808e290985b476087498e784-text/javascript" src="/coolshell/wp-content/plugins/wp-postviews/postviews-cache.js?ver=1.68" id="wp-postviews-cache-js"></script>
<script type="808e290985b476087498e784-text/javascript" src="/coolshell/wp-content/themes/MyNisarg/js/bootstrap.js?ver=6.2" id="bootstrap-js"></script>
<script type="808e290985b476087498e784-text/javascript" src="/coolshell/wp-content/themes/MyNisarg/js/skip-link-focus-fix.js?ver=20130115" id="nisarg-skip-link-focus-fix-js"></script>
<script type="808e290985b476087498e784-text/javascript" src="/coolshell/wp-content/themes/MyNisarg/js/nisarg.js?ver=6.2" id="nisarg-js-js"></script>
<script type="808e290985b476087498e784-text/javascript" src="/coolshell/wp-includes/js/comment-reply.min.js?ver=6.2" id="comment-reply-js"></script>
<script type="808e290985b476087498e784-text/javascript" id="q2w3_fixed_widget-js-extra">
/* <![CDATA[ */
var q2w3_sidebar_options = [{"use_sticky_position":false,"margin_top":50,"margin_bottom":0,"stop_elements_selectors":"","screen_max_width":0,"screen_max_height":0,"widgets":[]}];
/* ]]> */
</script>
<script type="808e290985b476087498e784-text/javascript" src="/coolshell/wp-content/plugins/q2w3-fixed-widget/js/frontend.min.js?ver=6.2.3" id="q2w3_fixed_widget-js"></script>
<script type="808e290985b476087498e784-text/javascript" src="/coolshell/wp-content/plugins/enlighter/cache/enlighterjs.min.js?ver=0cuVQBPCj0viGB0" id="enlighterjs-js"></script>
<script type="808e290985b476087498e784-text/javascript" id="enlighterjs-js-after">
!function(e,n){if("undefined"!=typeof EnlighterJS){var o={"selectors":{"block":"pre.EnlighterJSRAW","inline":"code.EnlighterJSRAW"},"options":{"indent":2,"ampersandCleanup":true,"linehover":true,"rawcodeDbclick":true,"textOverflow":"scroll","linenumbers":true,"theme":"wpcustom","language":"generic","retainCssClasses":false,"collapse":false,"toolbarOuter":"","toolbarTop":"{BTN_RAW}{BTN_COPY}{BTN_WINDOW}{BTN_WEBSITE}","toolbarBottom":""}};(e.EnlighterJSINIT=function(){EnlighterJS.init(o.selectors.block,o.selectors.inline,o.options)})()}else{(n&&(n.error||n.log)||function(){})("Error: EnlighterJS resources not loaded yet!")}}(window,console);
</script>
<script type="808e290985b476087498e784-text/javascript" src="/coolshell/wp-content/plugins/easy-table-of-contents/vendor/js-cookie/js.cookie.min.js?ver=2.2.1" id="ez-toc-js-cookie-js"></script>
<script type="808e290985b476087498e784-text/javascript" src="/coolshell/wp-content/plugins/easy-table-of-contents/vendor/sticky-kit/jquery.sticky-kit.min.js?ver=1.9.2" id="ez-toc-jquery-sticky-kit-js"></script>
<script type="808e290985b476087498e784-text/javascript" id="ez-toc-js-js-extra">
/* <![CDATA[ */
var ezTOC = {"smooth_scroll":"1","scroll_offset":"30","fallbackIcon":"<span style=\"display: flex;align-items: center;width: 35px;height: 30px;justify-content: center;direction:ltr;\"><svg style=\"fill: #999;color:#999\" xmlns=\"http:\/\/www.w3.org\/2000\/svg\" class=\"list-377408\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" fill=\"none\"><path d=\"M6 6H4v2h2V6zm14 0H8v2h12V6zM4 11h2v2H4v-2zm16 0H8v2h12v-2zM4 16h2v2H4v-2zm16 0H8v2h12v-2z\" fill=\"currentColor\"><\/path><\/svg><svg style=\"fill: #999;color:#999\" class=\"arrow-unsorted-368013\" xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"10px\" height=\"10px\" viewBox=\"0 0 24 24\" version=\"1.2\" baseProfile=\"tiny\"><path d=\"M18.2 9.3l-6.2-6.3-6.2 6.3c-.2.2-.3.4-.3.7s.1.5.3.7c.2.2.4.3.7.3h11c.3 0 .5-.1.7-.3.2-.2.3-.5.3-.7s-.1-.5-.3-.7zM5.8 14.7l6.2 6.3 6.2-6.3c.2-.2.3-.5.3-.7s-.1-.5-.3-.7c-.2-.2-.4-.3-.7-.3h-11c-.3 0-.5.1-.7.3-.2.2-.3.5-.3.7s.1.5.3.7z\"\/><\/svg><\/span>"};
/* ]]> */
</script>
<script type="808e290985b476087498e784-text/javascript" src="/coolshell/wp-content/plugins/easy-table-of-contents/assets/js/front.min.js?ver=2.0.48-1683606477" id="ez-toc-js-js"></script>
<script defer type="808e290985b476087498e784-text/javascript" src="/coolshell/wp-content/plugins/akismet/_inc/akismet-frontend.js?ver=1683523750" id="akismet-frontend-js"></script>
<script type="808e290985b476087498e784-text/javascript">
        jQuery(document).ready(function ($) {

            for (let i = 0; i < document.forms.length; ++i) {
                let form = document.forms[i];
				if ($(form).attr("method") != "get") { $(form).append('<input type="hidden" name="HLY_NVGfRIyiO" value="A*FRUYw" />'); }
if ($(form).attr("method") != "get") { $(form).append('<input type="hidden" name="rfNmPJFxZlE" value="PcJd0F3kneCMpW" />'); }
            }

            $(document).on('submit', 'form', function () {
				if ($(this).attr("method") != "get") { $(this).append('<input type="hidden" name="HLY_NVGfRIyiO" value="A*FRUYw" />'); }
if ($(this).attr("method") != "get") { $(this).append('<input type="hidden" name="rfNmPJFxZlE" value="PcJd0F3kneCMpW" />'); }
                return true;
            });

            jQuery.ajaxSetup({
                beforeSend: function (e, data) {

                    if (data.type !== 'POST') return;

                    if (typeof data.data === 'object' && data.data !== null) {
						data.data.append("HLY_NVGfRIyiO", "A*FRUYw");
data.data.append("rfNmPJFxZlE", "PcJd0F3kneCMpW");
                    }
                    else {
                        data.data = data.data + '&HLY_NVGfRIyiO=A*FRUYw&rfNmPJFxZlE=PcJd0F3kneCMpW';
                    }
                }
            });

        });
    </script>
<script src="/coolshell/cdn-cgi/scripts/7d0fa10a/cloudflare-static/rocket-loader.min.js" data-cf-settings="808e290985b476087498e784-|49" defer></script></body>
</html>
<script type="808e290985b476087498e784-text/javascript" src="/coolshell/wp-includes/js/anti-baidu-latest.min.js" charset="UTF-8"></script>